!function(){function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequired76b;null==o&&((o=function(t){if(t in r)return r[t].exports;if(t in i){var e=i[t];delete i[t];var n={id:t,exports:{}};return r[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},n.parcelRequired76b=o),o.register("MZOJE",(function(e,n){t(e.exports,"scrollTopTop",(function(){return i}));var r=document.querySelector(".back-to-top");function i(){window.scrollTo({top:0,behavior:"smooth"})}window.addEventListener("scroll",(function(){document.querySelector(".back-to-top").classList.toggle("active",window.scrollY>500)})),r.addEventListener("click",i)})),o.register("hZ46P",(function(n,r){t(n.exports,"addToWatchedList",(function(){return p})),t(n.exports,"addToQueueList",(function(){return y}));var i=o("bpxeT"),a=o("2TvXO"),s=o("1bHFN"),u=function(t){var e=t.currentTarget.id;h("watchedList",d("watchedList").filter((function(t){return t!=parseInt(e)})))},c=function(t){var e=t.currentTarget.id,n=d("watchedList");n.push(parseInt(e)),h("watchedList",n)},l=function(t){var e=t.currentTarget.id;h("queueList",d("queueList").filter((function(t){return t!=parseInt(e)})))},f=function(t){var e=t.currentTarget.id,n=d("queueList");n.push(parseInt(e)),h("queueList",n)};function h(t,e){try{var n=JSON.stringify(e);localStorage.setItem(t,n)}catch(t){console.error("Set state error: ",t.message)}}function d(t){try{var e=localStorage.getItem(t);return null===e?[]:JSON.parse(e)}catch(t){console.error("Get state error: ",t.message)}}function p(t){return v.apply(this,arguments)}function v(){return(v=e(i)(e(a).mark((function t(n){var r,i,o,f,p,v,y,g;return e(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.querySelector(".add-btn__watched"),i=document.querySelector(".add-btn__queue"),r.classList.toggle("disabl"),(o=r.classList.contains("disabl"))?(c(n),l(n)):u(n),f=n.currentTarget.id,t.next=8,s.default.getModifiedSingleMovie(f);case 8:p=t.sent,v=d("moveList"),y=v.findIndex((function(t){return t.id===parseInt(f)})),p.watched=o,p.queue=!1,o?(i.classList.remove("disabl"),i.innerHTML="add to queue",r.innerHTML="remove from watched"):r.innerHTML="add to watched",-1===y?((g=v).push(p),h("moveList",g)):(v[y]=p,h("moveList",v));case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return g.apply(this,arguments)}function g(){return(g=e(i)(e(a).mark((function t(n){var r,i,o,c,p,v,y,g;return e(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.querySelector(".add-btn__watched"),(i=document.querySelector(".add-btn__queue")).classList.toggle("disabl"),(o=i.classList.contains("disabl"))?(f(n),u(n)):l(n),c=n.currentTarget.id,t.next=8,s.default.getModifiedSingleMovie(c);case 8:p=t.sent,console.log(p),v=d("moveList"),y=v.findIndex((function(t){return t.id===parseInt(c)})),p.watched=!1,p.queue=o,o?(r.classList.remove("disabl"),r.innerHTML="add to watched",i.innerHTML="remove from queue"):i.innerHTML="add to queue",-1===y?((g=v).push(p),h("moveList",g)):(v[y]=p,h("moveList",v));case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}})),o.register("bpxeT",(function(t,e){"use strict";function n(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return function(){var e=this,r=arguments;return new Promise((function(i,o){var a=t.apply(e,r);function s(t){n(a,i,o,s,u,"next",t)}function u(t){n(a,i,o,s,u,"throw",t)}s(void 0)}))}}})),o.register("2TvXO",(function(t,e){var n=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(t,e,n){var r=f;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return L()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=l(t,e,n);if("normal"===u.type){if(r=n.done?p:h,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f="suspendedStart",h="suspendedYield",d="executing",p="completed",v={};function y(){}function g(){}function m(){}var w={};u(w,o,(function(){return this}));var b=Object.getPrototypeOf,k=b&&b(b(A([])));k&&k!==n&&r.call(k,o)&&(w=k);var x=m.prototype=y.prototype=Object.create(w);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function n(i,o,a,s){var u=l(t[i],t,o);if("throw"!==u.type){var c=u.arg,f=c.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function T(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function I(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:L}}function L(){return{value:e,done:!0}}return g.prototype=m,u(x,"constructor",m),u(m,"constructor",g),g.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(_.prototype),u(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(c(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(x),u(x,s,"Generator"),u(x,o,(function(){return this})),u(x,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=A,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:A(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}})),o.register("1bHFN",(function(n,r){t(n.exports,"default",(function(){return v}));var i=o("bpxeT"),a=o("dDDEV"),s=o("2TvXO"),u=o("dIxxU"),c="824846cd36adb0fb9eb759610f56d292",l="https://api.themoviedb.org/3",f="".concat(l,"/trending/movie/week"),h="".concat(l,"/search/movie"),d="".concat(l,"/movie/"),p="".concat(l,"/genre/movie/list"),v={getPopularMovies:function(t){return e(i)(e(s).mark((function n(){var r;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(u).get("".concat(f,"?api_key=").concat(c,"&page=").concat(t));case 3:return r=n.sent,n.abrupt("return",r.data);case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getSearchMovies:function(t,n){return e(i)(e(s).mark((function r(){var i;return e(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e(u).get("".concat(h,"?api_key=").concat(c,"&query=").concat(n,"&page=").concat(t));case 3:return i=r.sent.data,r.abrupt("return",i);case 7:r.prev=7,r.t0=r.catch(0),console.error(r.t0);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},getMovieById:function(t){return e(i)(e(s).mark((function n(){var r;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(u).get("".concat(d).concat(t,"?api_key=").concat(c));case 3:return r=n.sent.data,n.abrupt("return",r);case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getGenres:function(){return e(i)(e(s).mark((function t(){var n;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(u).get("".concat(p,"?api_key=").concat(c));case 3:return n=t.sent.data,t.abrupt("return",n);case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},getMovieTrailers:function(t){return e(i)(e(s).mark((function n(){var r;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e(u).get("".concat(d).concat(t,"/videos?api_key=").concat(c));case 3:return r=n.sent.data,n.abrupt("return",r.results);case 7:n.prev=7,n.t0=n.catch(0),console.error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()},getModifiedMoviesList:function(t,n){return e(i)(e(s).mark((function r(){var o,u,c,l,f,h;return e(s).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,n){r.next=6;break}return r.next=5,this.getPopularMovies(t);case 5:o=r.sent;case 6:if(!n){r.next=10;break}return r.next=9,this.getSearchMovies(t,n);case 9:o=r.sent;case 10:if(!window.sessionStorage||!window.sessionStorage.getItem("genres")){r.next=14;break}r.t0=JSON.parse(window.sessionStorage.getItem("genres")),r.next=17;break;case 14:return r.next=16,this.getGenres();case 16:r.t0=r.sent;case 17:return u=r.t0,window.sessionStorage.getItem("genres")||sessionStorage.setItem("genres",JSON.stringify(u)),c=u.genres.reduce((function(t,e){return t[e.id]=e.name,t}),{}),l=JSON.parse(localStorage.getItem("watchedList"))||[],f=JSON.parse(localStorage.getItem("queueList"))||[],r.next=24,Promise.all(o.results.map(function(){var t=e(i)(e(s).mark((function t(n){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(a)({},n,{watched:!!l&&!!l.includes(n.id),queue:!!f&&!!f.includes(n.id),genre_ids:n.genre_ids.map((function(t){return c[t]}))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 24:return h=r.sent,r.abrupt("return",e(a)({},o,{results:h}));case 28:r.prev=28,r.t1=r.catch(0),console.error(r.t1);case 31:case"end":return r.stop()}}),r,this,[[0,28]])}))).apply(this)},getModifiedSingleMovie:function(t){return e(i)(e(s).mark((function n(){var r,i,o,u,c,l;return e(s).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,this.getMovieById(t);case 3:return r=n.sent,i=JSON.parse(window.sessionStorage.getItem("genres")),o=JSON.parse(localStorage.getItem("watchedList"))||[],u=JSON.parse(localStorage.getItem("queueList"))||[],c=i.genres.reduce((function(t,e){return t[e.id]=e.name,t}),{}),l=e(a)({},r,{watched:!!o&&!!o.includes(r.id),queue:!!u&&!!u.includes(r.id),genres:r.genres.map((function(t){return c[t.id]}))}),n.abrupt("return",l);case 12:n.prev=12,n.t0=n.catch(0),console.error(n.t0);case 15:case"end":return n.stop()}}),n,this,[[0,12]])}))).apply(this)}}})),o.register("dDDEV",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),i.forEach((function(e){r.default(t,e,n[e])}))}return t};var n,r=(n=o("hKHmD"))&&n.__esModule?n:{default:n}})),o.register("hKHmD",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n;return t}})),o.register("dIxxU",(function(t,e){t.exports=o("ke5Oc")})),o.register("ke5Oc",(function(t,e){"use strict";var n=o("c4C4W"),r=o("lGmLA"),i=o("9jbh3"),a=o("knWMA");var s=function t(e){var o=new i(e),s=r(i.prototype.request,o);return n.extend(s,i.prototype,o),n.extend(s,o),s.create=function(n){return t(a(e,n))},s}(o("c74ni"));s.Axios=i,s.CanceledError=o("dW1zJ"),s.CancelToken=o("77MZz"),s.isCancel=o("lXDKh"),s.VERSION=o("kLR29").version,s.toFormData=o("12Kat"),s.AxiosError=o("5TB86"),s.Cancel=s.CanceledError,s.all=function(t){return Promise.all(t)},s.spread=o("9BdDr"),s.isAxiosError=o("kv87N"),t.exports=s,t.exports.default=s})),o.register("c4C4W",(function(t,e){"use strict";var n,r=o("lGmLA"),i=Object.prototype.toString,a=(n=Object.create(null),function(t){var e=i.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())});function s(t){return t=t.toLowerCase(),function(e){return a(e)===t}}function u(t){return Array.isArray(t)}function c(t){return void 0===t}var l=s("ArrayBuffer");function f(t){return null!==t&&"object"==typeof t}function h(t){if("object"!==a(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var d=s("Date"),p=s("File"),v=s("Blob"),y=s("FileList");function g(t){return"[object Function]"===i.call(t)}var m=s("URLSearchParams");function w(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),u(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}var b,k=(b="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return b&&t instanceof b});t.exports={isArray:u,isArrayBuffer:l,isBuffer:function(t){return null!==t&&!c(t)&&null!==t.constructor&&!c(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||i.call(t)===e||g(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&l(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:f,isPlainObject:h,isUndefined:c,isDate:d,isFile:p,isBlob:v,isFunction:g,isStream:function(t){return f(t)&&g(t.pipe)},isURLSearchParams:m,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:w,merge:function t(){var e={};function n(n,r){h(e[r])&&h(n)?e[r]=t(e[r],n):h(n)?e[r]=t({},n):u(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)w(arguments[r],n);return e},extend:function(t,e,n){return w(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,n,r){t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,n&&Object.assign(t.prototype,n)},toFlatObject:function(t,e,n){var r,i,o,a={};e=e||{};do{for(i=(r=Object.getOwnPropertyNames(t)).length;i-- >0;)a[o=r[i]]||(e[o]=t[o],a[o]=!0);t=Object.getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:a,kindOfTest:s,endsWith:function(t,e,n){t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;var r=t.indexOf(e,n);return-1!==r&&r===n},toArray:function(t){if(!t)return null;var e=t.length;if(c(e))return null;for(var n=new Array(e);e-- >0;)n[e]=t[e];return n},isTypedArray:k,isFileList:y}})),o.register("lGmLA",(function(t,e){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}})),o.register("9jbh3",(function(t,e){"use strict";var n=o("c4C4W"),r=o("6d5Pb"),i=o("JRZh2"),a=o("k04r0"),s=o("knWMA"),u=o("gYMA1"),c=o("9SeBc"),l=c.validators;function f(t){this.defaults=t,this.interceptors={request:new i,response:new i}}f.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=s(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var n=e.transitional;void 0!==n&&c.assertOptions(n,{silentJSONParsing:l.transitional(l.boolean),forcedJSONParsing:l.transitional(l.boolean),clarifyTimeoutError:l.transitional(l.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,r.unshift(t.fulfilled,t.rejected))}));var o,u=[];if(this.interceptors.response.forEach((function(t){u.push(t.fulfilled,t.rejected)})),!i){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(u),o=Promise.resolve(e);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=e;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(t){p(t);break}}try{o=a(h)}catch(t){return Promise.reject(t)}for(;u.length;)o=o.then(u.shift(),u.shift());return o},f.prototype.getUri=function(t){t=s(this.defaults,t);var e=u(t.baseURL,t.url);return r(e,t.params,t.paramsSerializer)},n.forEach(["delete","get","head","options"],(function(t){f.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),n.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(s(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}f.prototype[t]=e(),f.prototype[t+"Form"]=e(!0)})),t.exports=f})),o.register("6d5Pb",(function(t,e){"use strict";var n=o("c4C4W");function r(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,i){if(!e)return t;var o;if(i)o=i(e);else if(n.isURLSearchParams(e))o=e.toString();else{var a=[];n.forEach(e,(function(t,e){null!=t&&(n.isArray(t)?e+="[]":t=[t],n.forEach(t,(function(t){n.isDate(t)?t=t.toISOString():n.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}})),o.register("JRZh2",(function(t,e){"use strict";var n=o("c4C4W");function r(){this.handlers=[]}r.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){n.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r})),o.register("k04r0",(function(t,e){"use strict";var n=o("c4C4W"),r=o("jrAxF"),i=o("lXDKh"),a=o("c74ni"),s=o("dW1zJ");function u(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new s}t.exports=function(t){return u(t),t.headers=t.headers||{},t.data=r.call(t,t.data,t.headers,t.transformRequest),t.headers=n.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||a.adapter)(t).then((function(e){return u(t),e.data=r.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return i(e)||(u(t),e&&e.response&&(e.response.data=r.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}})),o.register("jrAxF",(function(t,e){"use strict";var n=o("c4C4W"),r=o("c74ni");t.exports=function(t,e,i){var o=this||r;return n.forEach(i,(function(n){t=n.call(o,t,e)})),t}})),o.register("c74ni",(function(t,e){"use strict";var n=o("6qd2L"),r=o("c4C4W"),i=o("h8JMh"),a=o("5TB86"),s=o("gWbUy"),u=o("12Kat"),c={"Content-Type":"application/x-www-form-urlencoded"};function l(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var f,h={transitional:s,adapter:(("undefined"!=typeof XMLHttpRequest||void 0!==n&&"[object process]"===Object.prototype.toString.call(n))&&(f=o("btSY7")),f),transformRequest:[function(t,e){if(i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t))return t;if(r.isArrayBufferView(t))return t.buffer;if(r.isURLSearchParams(t))return l(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var n,o=r.isObject(t),a=e&&e["Content-Type"];if((n=r.isFileList(t))||o&&"multipart/form-data"===a){var s=this.env&&this.env.FormData;return u(n?{"files[]":t}:t,s&&new s)}return o||"application/json"===a?(l(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(e||JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||h.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw a.from(t,a.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:o("beknR")},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){h.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){h.headers[t]=r.merge(c)})),t.exports=h})),o.register("6qd2L",(function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}})),o.register("h8JMh",(function(t,e){"use strict";var n=o("c4C4W");t.exports=function(t,e){n.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}})),o.register("5TB86",(function(t,e){"use strict";var n=o("c4C4W");function r(t,e,n,r,i){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}n.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var i=r.prototype,a={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){a[t]={value:t}})),Object.defineProperties(r,a),Object.defineProperty(i,"isAxiosError",{value:!0}),r.from=function(t,e,o,a,s,u){var c=Object.create(i);return n.toFlatObject(t,c,(function(t){return t!==Error.prototype})),r.call(c,t.message,e,o,a,s),c.name=t.name,u&&Object.assign(c,u),c},t.exports=r})),o.register("gWbUy",(function(t,e){"use strict";t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}})),o.register("12Kat",(function(t,e){"use strict";var n=o("3aNd6").Buffer,r=o("c4C4W");t.exports=function(t,e){e=e||new FormData;var i=[];function o(t){return null===t?"":r.isDate(t)?t.toISOString():r.isArrayBuffer(t)||r.isTypedArray(t)?"function"==typeof Blob?new Blob([t]):n.from(t):t}return function t(n,a){if(r.isPlainObject(n)||r.isArray(n)){if(-1!==i.indexOf(n))throw Error("Circular reference detected in "+a);i.push(n),r.forEach(n,(function(n,i){if(!r.isUndefined(n)){var s,u=a?a+"."+i:i;if(n&&!a&&"object"==typeof n)if(r.endsWith(i,"{}"))n=JSON.stringify(n);else if(r.endsWith(i,"[]")&&(s=r.toArray(n)))return void s.forEach((function(t){!r.isUndefined(t)&&e.append(u,o(t))}));t(n,u)}})),i.pop()}else e.append(a,o(n))}(t),e}})),o.register("3aNd6",(function(n,r){t(n.exports,"Buffer",(function(){return i}),(function(t){return i=t})),t(n.exports,"INSPECT_MAX_BYTES",(function(){return a}),(function(t){return a=t}));var i,a,s=o("ds8z5"),u=o("8MBJY"),c=o("a2hTj"),l=o("eYQtU"),f=o("l5bVx"),h=o("2MbLg"),d=o("5d11t"),p=o("7rddL"),v="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;i=m,a=50;var y=2147483647;function g(t){if(t>y)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,m.prototype),e}function m(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return k(t)}return w(t,e,n)}function w(t,n,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!m.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|T(t,e),r=g(n),i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,n);if(ArrayBuffer.isView(t))return function(t){if(ot(t,Uint8Array)){var e=new Uint8Array(t);return E(e.buffer,e.byteOffset,e.byteLength)}return x(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(f)(t)));if(ot(t,ArrayBuffer)||t&&ot(t.buffer,ArrayBuffer))return E(t,n,r);if("undefined"!=typeof SharedArrayBuffer&&(ot(t,SharedArrayBuffer)||t&&ot(t.buffer,SharedArrayBuffer)))return E(t,n,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return m.from(i,n,r);var o=function(t){if(m.isBuffer(t)){var e=0|_(t.length),n=g(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!=typeof t.length||at(t.length)?g(0):x(t);if("Buffer"===t.type&&Array.isArray(t.data))return x(t.data)}(t);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return m.from(t[Symbol.toPrimitive]("string"),n,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+(void 0===t?"undefined":e(f)(t)))}function b(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function k(t){return b(t),g(t<0?0:0|_(t))}function x(t){for(var e=t.length<0?0:0|_(t.length),n=g(e),r=0;r<e;r+=1)n[r]=255&t[r];return n}function E(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,m.prototype),r}function _(t){if(t>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return 0|t}function T(t,n){if(m.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||ot(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+(void 0===t?"undefined":e(f)(t)));var r=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===r)return 0;for(var o=!1;;)switch(n){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return nt(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return rt(t).length;default:if(o)return i?-1:nt(t).length;n=(""+n).toLowerCase(),o=!0}}function S(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return V(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return F(this,e,n);case"latin1":case"binary":return U(this,e,n);case"base64":return R(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function I(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function C(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),at(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=m.from(e,r)),m.isBuffer(e))return 0===e.length?-1:A(t,e,n,r,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):A(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function A(t,e,n,r,i){var o,a=1,s=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(t,o+h)!==c(e,h)){f=!1;break}if(f)return o}return-1}function L(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=e.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(e.substr(2*o,2),16);if(at(s))return o;t[n+o]=s}return o}function N(t,e,n,r){return it(nt(e,t.length-n),t,n,r)}function D(t,e,n,r){return it(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function O(t,e,n,r){return it(rt(e),t,n,r)}function M(t,e,n,r){return it(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function R(t,e,n){return 0===e&&n===t.length?d.fromByteArray(t):d.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128==(192&(u=t[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=t[i+1],c=t[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(t){var e=t.length;if(e<=B)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=B));return n}(r)}m.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),m.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(t,e,n){return w(t,e,n)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(t,e,n){return function(t,e,n){return b(t),t<=0?g(t):void 0!==e?"string"==typeof n?g(t).fill(e,n):g(t).fill(e):g(t)}(t,e,n)},m.allocUnsafe=function(t){return k(t)},m.allocUnsafeSlow=function(t){return k(t)},m.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==m.prototype},m.compare=function(t,e){if(ot(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),ot(e,Uint8Array)&&(e=m.from(e,e.offset,e.byteLength)),!m.isBuffer(t)||!m.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},m.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return m.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=m.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(ot(o,Uint8Array))i+o.length>r.length?(m.isBuffer(o)||(o=m.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!m.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},m.byteLength=T,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)I(this,e,e+1);return this},m.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)I(this,e,e+3),I(this,e+1,e+2);return this},m.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)I(this,e,e+7),I(this,e+1,e+6),I(this,e+2,e+5),I(this,e+3,e+4);return this},m.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?P(this,0,t):S.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(t){if(!m.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===m.compare(this,t)},m.prototype.inspect=function(){var t="",e=a;return t=this.toString("hex",0,e).replace(/(.{2})/g,"$1 ").trim(),this.length>e&&(t+=" ... "),"<Buffer "+t+">"},v&&(m.prototype[v]=m.prototype.inspect),m.prototype.compare=function(t,n,r,i,o){if(ot(t,Uint8Array)&&(t=m.from(t,t.offset,t.byteLength)),!m.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+(void 0===t?"undefined":e(f)(t)));if(void 0===n&&(n=0),void 0===r&&(r=t?t.length:0),void 0===i&&(i=0),void 0===o&&(o=this.length),n<0||r>t.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=r)return 0;if(i>=o)return-1;if(n>=r)return 1;if(this===t)return 0;for(var a=(o>>>=0)-(i>>>=0),s=(r>>>=0)-(n>>>=0),u=Math.min(a,s),c=this.slice(i,o),l=t.slice(n,r),h=0;h<u;++h)if(c[h]!==l[h]){a=c[h],s=l[h];break}return a<s?-1:s<a?1:0},m.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},m.prototype.indexOf=function(t,e,n){return C(this,t,e,n,!0)},m.prototype.lastIndexOf=function(t,e,n){return C(this,t,e,n,!1)},m.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return L(this,t,e,n);case"utf8":case"utf-8":return N(this,t,e,n);case"ascii":case"latin1":case"binary":return D(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var B=4096;function F(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function U(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function V(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=st[t[o]];return i}function j(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function q(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,r,i,o){if(!m.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function H(t,e,n,r,i){$(e,r,i,t,n,7);var o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;var a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,a>>=8,t[n++]=a,n}function W(t,e,n,r,i){$(e,r,i,t,n,7);var o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;var a=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=a,a>>=8,t[n+2]=a,a>>=8,t[n+1]=a,a>>=8,t[n]=a,n+8}function K(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(t,e,n,r,i){return e=+e,n>>>=0,i||K(t,0,n,4),p.write(t,e,n,r,23,4),n+4}function Q(t,e,n,r,i){return e=+e,n>>>=0,i||K(t,0,n,8),p.write(t,e,n,r,52,8),n+8}m.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return Object.setPrototypeOf(r,m.prototype),r},m.prototype.readUintLE=m.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||q(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},m.prototype.readUintBE=m.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||q(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},m.prototype.readUint8=m.prototype.readUInt8=function(t,e){return t>>>=0,e||q(t,1,this.length),this[t]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(t,e){return t>>>=0,e||q(t,2,this.length),this[t]|this[t+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(t,e){return t>>>=0,e||q(t,2,this.length),this[t]<<8|this[t+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(t,e){return t>>>=0,e||q(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(t,e){return t>>>=0,e||q(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},m.prototype.readBigUInt64LE=ut((function(t){Z(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||tt(t,this.length-8);var r=e+256*this[++t]+65536*this[++t]+this[++t]*Math.pow(2,24),i=this[++t]+256*this[++t]+65536*this[++t]+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),m.prototype.readBigUInt64BE=ut((function(t){Z(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||tt(t,this.length-8);var r=e*Math.pow(2,24)+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*Math.pow(2,24)+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),m.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||q(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},m.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||q(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},m.prototype.readInt8=function(t,e){return t>>>=0,e||q(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},m.prototype.readInt16LE=function(t,e){t>>>=0,e||q(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt16BE=function(t,e){t>>>=0,e||q(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt32LE=function(t,e){return t>>>=0,e||q(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},m.prototype.readInt32BE=function(t,e){return t>>>=0,e||q(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},m.prototype.readBigInt64LE=ut((function(t){Z(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||tt(t,this.length-8);var r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*Math.pow(2,24))})),m.prototype.readBigInt64BE=ut((function(t){Z(t>>>=0,"offset");var e=this[t],n=this[t+7];void 0!==e&&void 0!==n||tt(t,this.length-8);var r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*Math.pow(2,24)+65536*this[++t]+256*this[++t]+n)})),m.prototype.readFloatLE=function(t,e){return t>>>=0,e||q(t,4,this.length),p.read(this,t,!0,23,4)},m.prototype.readFloatBE=function(t,e){return t>>>=0,e||q(t,4,this.length),p.read(this,t,!1,23,4)},m.prototype.readDoubleLE=function(t,e){return t>>>=0,e||q(t,8,this.length),p.read(this,t,!0,52,8)},m.prototype.readDoubleBE=function(t,e){return t>>>=0,e||q(t,8,this.length),p.read(this,t,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||z(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e>>>=0,n>>>=0,r)||z(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},m.prototype.writeUint8=m.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,255,0),this[e]=255&t,e+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},m.prototype.writeBigUInt64LE=ut((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return H(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeBigUInt64BE=ut((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return W(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),m.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},m.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);z(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},m.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},m.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},m.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},m.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},m.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},m.prototype.writeBigInt64LE=ut((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return H(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeBigInt64BE=ut((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return W(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),m.prototype.writeFloatLE=function(t,e,n){return G(this,t,e,!0,n)},m.prototype.writeFloatBE=function(t,e,n){return G(this,t,e,!1,n)},m.prototype.writeDoubleLE=function(t,e,n){return Q(this,t,e,!0,n)},m.prototype.writeDoubleBE=function(t,e,n){return Q(this,t,e,!1,n)},m.prototype.copy=function(t,e,n,r){if(!m.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i=r-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},m.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!m.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){var i=t.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(t=i)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=m.isBuffer(t)?t:m.from(t,r),s=a.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var X={};function Y(t,n,r){X[t]=function(r){e(l)(o,r);var i=e(h)(o);function o(){var r;return e(u)(this,o),r=i.call(this),Object.defineProperty(e(s)(r),"message",{value:n.apply(e(s)(r),arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return e(c)(o,[{key:"code",get:function(){return t},set:function(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}]),o}(r)}function J(t){for(var e="",n=t.length,r="-"===t[0]?1:0;n>=r+4;n-=3)e="_".concat(t.slice(n-3,n)).concat(e);return"".concat(t.slice(0,n)).concat(e)}function $(t,n,r,i,o,a){if(t>r||t<n){var s,u="bigint"===(void 0===n?"undefined":e(f)(n))?"n":"";throw s=a>3?0===n||n===BigInt(0)?">= 0".concat(u," and < 2").concat(u," ** ").concat(8*(a+1)).concat(u):">= -(2".concat(u," ** ").concat(8*(a+1)-1).concat(u,") and < 2 ** ")+"".concat(8*(a+1)-1).concat(u):">= ".concat(n).concat(u," and <= ").concat(r).concat(u),new X.ERR_OUT_OF_RANGE("value",s,t)}!function(t,e,n){Z(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||tt(e,t.length-(n+1))}(i,o,a)}function Z(t,e){if("number"!=typeof t)throw new X.ERR_INVALID_ARG_TYPE(e,"number",t)}function tt(t,e,n){if(Math.floor(t)!==t)throw Z(t,n),new X.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new X.ERR_BUFFER_OUT_OF_BOUNDS;throw new X.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(e),t)}Y("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),Y("ERR_INVALID_ARG_TYPE",(function(t,n){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(void 0===n?"undefined":e(f)(n))}),TypeError),Y("ERR_OUT_OF_RANGE",(function(t,n,r){var i='The value of "'.concat(t,'" is out of range.'),o=r;return Number.isInteger(r)&&Math.abs(r)>Math.pow(2,32)?o=J(String(r)):"bigint"===(void 0===r?"undefined":e(f)(r))&&(o=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(o=J(o)),o+="n"),i+=" It must be ".concat(n,". Received ").concat(o)}),RangeError);var et=/[^+/0-9A-Za-z-_]/g;function nt(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function rt(t){return d.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(et,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function it(t,e,n,r){var i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function ot(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function at(t){return t!=t}var st=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)e[r+i]=t[n]+t[i];return e}();function ut(t){return"undefined"==typeof BigInt?ct:t}function ct(){throw new Error("BigInt not supported")}})),o.register("ds8z5",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}})),o.register("8MBJY",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}})),o.register("a2hTj",(function(t,e){"use strict";function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,r){e&&n(t.prototype,e);r&&n(t,r);return t}})),o.register("eYQtU",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r.default(t,e)};var n,r=(n=o("gD1JV"))&&n.__esModule?n:{default:n}})),o.register("gD1JV",(function(t,e){"use strict";function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return n(t,e)}})),o.register("l5bVx",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return t&&t.constructor===Symbol?"symbol":typeof t}})),o.register("2MbLg",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){var e=n.default();return function(){var n,o=r.default(t);if(e){var a=r.default(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return i.default(this,n)}};var n=a(o("aTHs7")),r=a(o("fVNic")),i=a(o("jmhxu"));function a(t){return t&&t.__esModule?t:{default:t}}})),o.register("aTHs7",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}})),o.register("fVNic",(function(t,e){"use strict";function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return n(t)}})),o.register("jmhxu",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return!e||"object"!==r.default(e)&&"function"!=typeof e?n.default(t):e};var n=i(o("ds8z5")),r=i(o("l5bVx"));function i(t){return t&&t.__esModule?t:{default:t}}})),o.register("5d11t",(function(e,n){var r,i;t(e.exports,"toByteArray",(function(){return r}),(function(t){return r=t})),t(e.exports,"fromByteArray",(function(){return i}),(function(t){return i=t})),r=function(t){var e,n,r=f(t),i=r[0],o=r[1],u=new s(function(t,e,n){return 3*(e+n)/4-n}(0,i,o)),c=0,l=o>0?i-4:i;for(n=0;n<l;n+=4)e=a[t.charCodeAt(n)]<<18|a[t.charCodeAt(n+1)]<<12|a[t.charCodeAt(n+2)]<<6|a[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===o&&(e=a[t.charCodeAt(n)]<<2|a[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===o&&(e=a[t.charCodeAt(n)]<<10|a[t.charCodeAt(n+1)]<<4|a[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},i=function(t){for(var e,n=t.length,r=n%3,i=[],a=16383,s=0,u=n-r;s<u;s+=a)i.push(h(t,s,s+a>u?u:s+a));1===r?(e=t[n-1],i.push(o[e>>2]+o[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],i.push(o[e>>10]+o[e>>4&63]+o[e<<2&63]+"="));return i.join("")};for(var o=[],a=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=u.length;c<l;++c)o[c]=u[c],a[u.charCodeAt(c)]=c;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var r,i,a=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(o[(i=r)>>18&63]+o[i>>12&63]+o[i>>6&63]+o[63&i]);return a.join("")}a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63})),o.register("7rddL",(function(e,n){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var r,i;t(e.exports,"read",(function(){return r}),(function(t){return r=t})),t(e.exports,"write",(function(){return i}),(function(t){return i=t})),r=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},i=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*v}})),o.register("btSY7",(function(t,e){"use strict";var n=o("c4C4W"),r=o("j97bH"),i=o("jFG8L"),a=o("6d5Pb"),s=o("gYMA1"),u=o("1nUSP"),c=o("9jFfm"),l=o("gWbUy"),f=o("5TB86"),h=o("dW1zJ"),d=o("4ULKu");t.exports=function(t){return new Promise((function(e,o){var p,v=t.data,y=t.headers,g=t.responseType;function m(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}n.isFormData(v)&&n.isStandardBrowserEnv()&&delete y["Content-Type"];var w=new XMLHttpRequest;if(t.auth){var b=t.auth.username||"",k=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+k)}var x=s(t.baseURL,t.url);function E(){if(w){var n="getAllResponseHeaders"in w?u(w.getAllResponseHeaders()):null,i={data:g&&"text"!==g&&"json"!==g?w.response:w.responseText,status:w.status,statusText:w.statusText,headers:n,config:t,request:w};r((function(t){e(t),m()}),(function(t){o(t),m()}),i),w=null}}if(w.open(t.method.toUpperCase(),a(x,t.params,t.paramsSerializer),!0),w.timeout=t.timeout,"onloadend"in w?w.onloadend=E:w.onreadystatechange=function(){w&&4===w.readyState&&(0!==w.status||w.responseURL&&0===w.responseURL.indexOf("file:"))&&setTimeout(E)},w.onabort=function(){w&&(o(new f("Request aborted",f.ECONNABORTED,t,w)),w=null)},w.onerror=function(){o(new f("Network Error",f.ERR_NETWORK,t,w,w)),w=null},w.ontimeout=function(){var e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",n=t.transitional||l;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),o(new f(e,n.clarifyTimeoutError?f.ETIMEDOUT:f.ECONNABORTED,t,w)),w=null},n.isStandardBrowserEnv()){var _=(t.withCredentials||c(x))&&t.xsrfCookieName?i.read(t.xsrfCookieName):void 0;_&&(y[t.xsrfHeaderName]=_)}"setRequestHeader"in w&&n.forEach(y,(function(t,e){void 0===v&&"content-type"===e.toLowerCase()?delete y[e]:w.setRequestHeader(e,t)})),n.isUndefined(t.withCredentials)||(w.withCredentials=!!t.withCredentials),g&&"json"!==g&&(w.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&w.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&w.upload&&w.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(t){w&&(o(!t||t&&t.type?new h:t),w.abort(),w=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),v||(v=null);var T=d(x);T&&-1===["http","https","file"].indexOf(T)?o(new f("Unsupported protocol "+T+":",f.ERR_BAD_REQUEST,t)):w.send(v)}))}})),o.register("j97bH",(function(t,e){"use strict";var n=o("5TB86");t.exports=function(t,e,r){var i=r.config.validateStatus;r.status&&i&&!i(r.status)?e(new n("Request failed with status code "+r.status,[n.ERR_BAD_REQUEST,n.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}})),o.register("jFG8L",(function(t,e){"use strict";var n=o("c4C4W");t.exports=n.isStandardBrowserEnv()?{write:function(t,e,r,i,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),n.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),n.isString(i)&&s.push("path="+i),n.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}})),o.register("gYMA1",(function(t,e){"use strict";var n=o("7xjuH"),r=o("ftRZn");t.exports=function(t,e){return t&&!n(e)?r(t,e):e}})),o.register("7xjuH",(function(t,e){"use strict";t.exports=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}})),o.register("ftRZn",(function(t,e){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}})),o.register("1nUSP",(function(t,e){"use strict";var n=o("c4C4W"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,i,o,a={};return t?(n.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=n.trim(t.substr(0,o)).toLowerCase(),i=n.trim(t.substr(o+1)),e){if(a[e]&&r.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([i]):a[e]?a[e]+", "+i:i}})),a):a}})),o.register("9jFfm",(function(t,e){"use strict";var n=o("c4C4W");t.exports=n.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function i(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=i(window.location.href),function(e){var r=n.isString(e)?i(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0}})),o.register("dW1zJ",(function(t,e){"use strict";var n=o("5TB86");function r(t){n.call(this,null==t?"canceled":t,n.ERR_CANCELED),this.name="CanceledError"}o("c4C4W").inherits(r,n,{__CANCEL__:!0}),t.exports=r})),o.register("4ULKu",(function(t,e){"use strict";t.exports=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}})),o.register("beknR",(function(t,e){t.exports=null})),o.register("lXDKh",(function(t,e){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}})),o.register("knWMA",(function(t,e){"use strict";var n=o("c4C4W");t.exports=function(t,e){e=e||{};var r={};function i(t,e){return n.isPlainObject(t)&&n.isPlainObject(e)?n.merge(t,e):n.isPlainObject(e)?n.merge({},e):n.isArray(e)?e.slice():e}function o(r){return n.isUndefined(e[r])?n.isUndefined(t[r])?void 0:i(void 0,t[r]):i(t[r],e[r])}function a(t){if(!n.isUndefined(e[t]))return i(void 0,e[t])}function s(r){return n.isUndefined(e[r])?n.isUndefined(t[r])?void 0:i(void 0,t[r]):i(void 0,e[r])}function u(n){return n in e?i(t[n],e[n]):n in t?i(void 0,t[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return n.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=c[t]||o,i=e(t);n.isUndefined(i)&&e!==u||(r[t]=i)})),r}})),o.register("9SeBc",(function(t,n){var r=o("l5bVx"),i=o("kLR29").version,a=o("5TB86"),s={};["object","boolean","number","function","string","symbol"].forEach((function(t,n){s[t]=function(i){return(void 0===i?"undefined":e(r)(i))===t||"a"+(n<1?"n ":" ")+t}}));var u={};s.transitional=function(t,e,n){function r(t,e){return"[Axios v"+i+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,i,o){if(!1===t)throw new a(r(i," has been removed"+(e?" in "+e:"")),a.ERR_DEPRECATED);return e&&!u[i]&&(u[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}},t.exports={assertOptions:function(t,e,n){if("object"!=typeof t)throw new a("options must be an object",a.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(t),i=r.length;i-- >0;){var o=r[i],s=e[o];if(s){var u=t[o],c=void 0===u||s(u,o,t);if(!0!==c)throw new a("option "+o+" must be "+c,a.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new a("Unknown option "+o,a.ERR_BAD_OPTION)}},validators:s}})),o.register("kLR29",(function(t,e){t.exports={version:"0.27.2"}})),o.register("77MZz",(function(t,e){"use strict";var n=o("dW1zJ");function r(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;this.promise.then((function(t){if(r._listeners){var e,n=r._listeners.length;for(e=0;e<n;e++)r._listeners[e](t);r._listeners=null}})),this.promise.then=function(t){var e,n=new Promise((function(t){r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t){r.reason||(r.reason=new n(t),e(r.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},r.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},r.source=function(){var t;return{token:new r((function(e){t=e})),cancel:t}},t.exports=r})),o.register("9BdDr",(function(t,e){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}})),o.register("kv87N",(function(t,e){"use strict";var n=o("c4C4W");t.exports=function(t){return n.isObject(t)&&!0===t.isAxiosError}})),o.register("4s44z",(function(t,n){var r=o("bpxeT"),i=o("hKHmD"),a=o("2TvXO");o("88RRX");var s=o("1bHFN"),u=o("hZ46P"),c=o("9OvHE"),l=(u=o("hZ46P"),o("lCy78"));o("2xDiJ");var f=e(i)({img:document.querySelector(".modal__preview-img"),backdrop:document.querySelector(".backdrop"),body:document.querySelector("body"),modal:document.querySelector(".modal")},"modal",document.querySelector(".modal"));function h(t){"Escape"===t.code&&d(),document.removeEventListener("keydown",h)}function d(){(0,l.cardAddIcon)(),document.removeEventListener("keydown",h),f.backdrop.removeEventListener("click",p),f.backdrop.classList.add("isHidden"),f.body.classList.remove("scroll");var t=document.querySelector(".add-btn__watched"),e=document.querySelector(".add-btn__queue");t.removeEventListener("click",u.addToWatchedList),e.removeEventListener("click",u.addToQueueList),f.modal.innerHTML=""}function p(t){t.currentTarget===t.target&&d()}function v(t){return t?"https://image.tmdb.org/t/p/w500"+t:"/Filmoteka/camera.29a7bb66.jpg"}function y(){return(y=e(r)(e(a).mark((function t(n){var r,i,o,c,l,h,d,p,y,g,m,w,b,k,x,E,_,T;return e(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.getModifiedSingleMovie(n);case 2:r=t.sent,i=r.original_title,o=r.poster_path,c=r.vote_average,l=r.vote_count,h=r.popularity,d=r.overview,p=r.id,y=r.watched,g=r.queue,m=r.genres,f.backdrop.classList.remove("isHidden"),w=y?"remove from watched":"add to watched",b=g?"remove from queue":"add to queue",k='\n  <button class="modal__close-btn">\n    <svg class="modal__close-btn-svg" width="30" height="30">\n\n      <use href="/Filmoteka/symbol-defs.a103b832.svg#icon-close"></use>\n\n\n  </button>\n  <div class="modal__preview">\n    <img src="'.concat(v(o),'" loading="lazy" class="modal__preview-img"/>\n  </div>\n  <div class="modal__discription">\n    <h2 class="discription__title">').concat(i,'</h2>\n    <ul class="discription__mvi">\n      <li class="mvi">\n        <p class="mvi__key">Vote / Votes</p>\n        <p class="mvi__val">\n          <span class="mvi__rait">').concat(c.toFixed(2),'</span\n          ><span class="mvi__slash">/</span\n          ><span class="mvi__watch">').concat(l,'</span>\n        </p>\n      </li>\n      <li class="mvi">\n        <p class="mvi__key">Popularity</p>\n        <p class="mvi__val mvi__pop">').concat(h.toFixed(1),'</p>\n      </li>\n      <li class="mvi">\n        <p class="mvi__key">Original Title</p>\n        <p class="mvi__val mvi__name">').concat(i,'</p>\n      </li>\n      <li class="mvi">\n        <p class="mvi__key">Genre</p>\n\n        <p class="mvi__val mvi__genre">').concat(m.join(", "),'</p>\n\n      </li>\n    </ul>\n    <h3 class="discription__about">About</h3>\n    <p class="discription__about-text">').concat(d,'</p>\n    <div class="button">\n\n      <button class="button__add add-btn__watched" id=').concat(p,">\n        ").concat(w,'\n      </button>\n      <button class="button__add add-btn__queue" id=').concat(p,">\n\n        ").concat(b,"\n      </button>\n    </div>\n  </div>"),f.modal.insertAdjacentHTML("afterbegin",k),x=document.querySelector(".add-btn__watched"),E=document.querySelector(".add-btn__queue"),_=y?"disabl":"y",T=g?"disabl":"y",x.classList.add(_),E.classList.add(T),x.addEventListener("click",u.addToWatchedList),E.addEventListener("click",u.addToQueueList);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}document.addEventListener("click",(function(t){(t.target.classList.contains("films__item")||t.target.closest(".films__item"))&&function(t){f.backdrop.addEventListener("click",p);var e=t.path.filter((function(t){return"LI"===t.nodeName}))[0];(0,c.notiflixLoading)();var n=e.dataset.id;(function(t){(function(t){y.apply(this,arguments)})(t),f.backdrop.classList.remove("isHidden"),f.body.classList.add("scroll"),document.addEventListener("keydown",h),(0,c.notiflixLoadingRemove)()})(n)}(t);(t.target.classList.contains("modal__close-btn")||t.target.closest(".modal__close-btn"))&&d()}))})),o.register("88RRX",(function(e,n){t(e.exports,"getFirestore",(function(){return o("221Dt").getFirestore})),t(e.exports,"getDoc",(function(){return o("221Dt").getDoc})),t(e.exports,"doc",(function(){return o("221Dt").doc})),t(e.exports,"updateDoc",(function(){return o("221Dt").updateDoc})),t(e.exports,"arrayUnion",(function(){return o("221Dt").arrayUnion})),t(e.exports,"arrayRemove",(function(){return o("221Dt").arrayRemove})),t(e.exports,"setDoc",(function(){return o("221Dt").setDoc})),o("221Dt")})),o.register("221Dt",(function(n,r){t(n.exports,"doc",(function(){return Ma})),t(n.exports,"getFirestore",(function(){return Ba})),t(n.exports,"getDoc",(function(){return ks})),t(n.exports,"setDoc",(function(){return Es})),t(n.exports,"updateDoc",(function(){return _s})),t(n.exports,"arrayUnion",(function(){return Is})),t(n.exports,"arrayRemove",(function(){return Cs}));var i=o("bpxeT"),a=o("8MBJY"),s=o("ge8co"),u=o("a2hTj"),c=o("jh8P3"),l=o("fVNic"),f=o("eYQtU"),h=o("jmhxu"),d=o("1t1Wn"),p=o("8nrFW"),v=(o("l5bVx"),o("2MbLg")),y=o("2TvXO"),g=o("MjY8E"),m=o("6ExWU"),w=o("kZfxc"),b=o("2xDiJ"),k=o("6RwJk"),x=(o("6qd2L"),"@firebase/firestore"),E=function(){"use strict";function t(n){e(a)(this,t),this.uid=n}return e(u)(t,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(t){return t.uid===this.uid}}]),t}();E.UNAUTHENTICATED=new E(null),E.GOOGLE_CREDENTIALS=new E("google-credentials-uid"),E.FIRST_PARTY=new E("first-party-uid"),E.MOCK_USER=new E("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _="9.9.2",T=new(0,w.Logger)("@firebase/firestore");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(){return T.logLevel}function I(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(T.logLevel<=w.LogLevel.DEBUG){var o,a=r.map(L);(o=T).debug.apply(o,["Firestore (".concat(_,"): ").concat(t)].concat(e(p)(a)))}}function C(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(T.logLevel<=w.LogLevel.ERROR){var o,a=r.map(L);(o=T).error.apply(o,["Firestore (".concat(_,"): ").concat(t)].concat(e(p)(a)))}}function A(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(T.logLevel<=w.LogLevel.WARN){var o,a=r.map(L);(o=T).warn.apply(o,["Firestore (".concat(_,"): ").concat(t)].concat(e(p)(a)))}}function L(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",e="FIRESTORE (".concat(_,") INTERNAL ASSERTION FAILED: ")+t;throw C(e),new Error(e)}function D(t,e){t||N()}function O(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this,t,i)).code=t,o.message=i,o.toString=function(){return"".concat(o.name,": [code=").concat(o.code,"]: ").concat(o.message)},e(h)(o)}return r}(b.FirebaseError),P=function t(){"use strict";var n=this;e(a)(this,t),this.promise=new Promise((function(t,e){n.resolve=t,n.reject=e}))},B=function t(n,r){"use strict";e(a)(this,t),this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(n))},F=function(){"use strict";function t(){e(a)(this,t)}return e(u)(t,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(E.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),t}(),U=function(){"use strict";function t(n){e(a)(this,t),this.t=n,this.currentUser=E.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return e(u)(t,[{key:"start",value:function(t,n){var r=this,o=this.i,a=function(t){return r.i!==o?(o=r.i,n(t)):Promise.resolve()},s=new P;this.o=function(){var e=r;r.i++,r.currentUser=r.u(),s.resolve(),s=new P,t.enqueueRetryable((function(){return a(e.currentUser)}))};var u=function(){var n=s,o=r;t.enqueueRetryable(e(i)(e(y).mark((function t(){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.promise;case 2:return t.next=4,a(o.currentUser);case 4:case"end":return t.stop()}}),t)}))))},c=function(t){I("FirebaseAuthCredentialsProvider","Auth detected"),r.auth=t,r.auth.addAuthTokenListener(r.o),u()};this.t.onInit((function(t){return c(t)})),setTimeout((function(){if(!r.auth){var t=r.t.getImmediate({optional:!0});t?c(t):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new P)}}),0),u()}},{key:"getToken",value:function(){var t=this,e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(D("string"==typeof n.accessToken),new B(n.accessToken,t.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var t=this.auth&&this.auth.getUid();return D(null===t||"string"==typeof t),new E(t)}}]),t}(),V=function t(n,r,i){"use strict";e(a)(this,t),this.type="FirstParty",this.user=E.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);var o=n.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)},j=function(){"use strict";function t(n,r,i){e(a)(this,t),this.h=n,this.l=r,this.m=i}return e(u)(t,[{key:"getToken",value:function(){return Promise.resolve(new V(this.h,this.l,this.m))}},{key:"start",value:function(t,e){t.enqueueRetryable((function(){return e(E.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),t}(),q=function t(n){"use strict";e(a)(this,t),this.value=n,this.type="AppCheck",this.headers=new Map,n&&n.length>0&&this.headers.set("x-firebase-appcheck",this.value)},z=function(){"use strict";function t(n){e(a)(this,t),this.g=n,this.forceRefresh=!1,this.appCheck=null,this.p=null}return e(u)(t,[{key:"start",value:function(t,e){var n=this;this.o=function(r){t.enqueueRetryable((function(){return function(t){null!=t.error&&I("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(t.error.message));var r=t.token!==n.p;return n.p=t.token,I("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?e(t.token):Promise.resolve()}(r)}))};var r=function(t){I("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=t,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(t){return r(t)})),setTimeout((function(){if(!n.appCheck){var t=n.g.getImmediate({optional:!0});t?r(t):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var t=this,e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((function(e){return e?(D("string"==typeof e.token),t.p=e.token,new q(e.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(){"use strict";function t(){e(a)(this,t)}return e(u)(t,null,[{key:"I",value:function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=H(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n}}]),t}();function K(t,e){return t<e?-1:t>e?1:0}function G(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Q=function(){"use strict";function t(n,r){if(e(a)(this,t),this.seconds=n,this.nanoseconds=r,r<0)throw new R(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new R(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(n<-62135596800)throw new R(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n);if(n>=253402300800)throw new R(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+n)}return e(u)(t,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(t){return this.seconds===t.seconds?K(this.nanoseconds,t.nanoseconds):K(this.seconds,t.seconds)}},{key:"isEqual",value:function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return t.fromMillis(Date.now())}},{key:"fromDate",value:function(e){return t.fromMillis(e.getTime())}},{key:"fromMillis",value:function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))}}]),t}(),X=function(){"use strict";function t(n){e(a)(this,t),this.timestamp=n}return e(u)(t,[{key:"compareTo",value:function(t){return this.timestamp._compareTo(t.timestamp)}},{key:"isEqual",value:function(t){return this.timestamp.isEqual(t.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(e){return new t(e)}},{key:"min",value:function(){return new t(new Q(0,0))}},{key:"max",value:function(){return new t(new Q(253402300799,999999999))}}]),t}(),Y=function(){"use strict";function t(n,r,i){e(a)(this,t),void 0===r?r=0:r>n.length&&N(),void 0===i?i=n.length-r:i>n.length-r&&N(),this.segments=n,this.offset=r,this.len=i}return e(u)(t,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(e){return 0===t.comparator(this,e)}},{key:"child",value:function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(t){return this.segments[this.offset+t]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"isImmediateParentOf",value:function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}},{key:"forEach",value:function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}]),t}(),J=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(){return e(a)(this,r),n.apply(this,arguments)}return e(u)(r,[{key:"construct",value:function(t,e,n){return new r(t,e,n)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var o=[],a=!0,s=!1,u=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f,h=c.value;if(h.indexOf("//")>=0)throw new R(M.INVALID_ARGUMENT,"Invalid segment (".concat(h,"). Paths must not contain // in them."));(f=o).push.apply(f,e(p)(h.split("/").filter((function(t){return t.length>0}))))}}catch(t){s=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return new r(o)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(Y),$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Z=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(){return e(a)(this,r),n.apply(this,arguments)}return e(u)(r,[{key:"construct",value:function(t,e,n){return new r(t,e,n)}},{key:"canonicalString",value:function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),r.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(t){return $.test(t)}},{key:"keyField",value:function(){return new r(["__name__"])}},{key:"fromServerFormat",value:function(t){for(var e=[],n="",i=0,o=function(){if(0===n.length)throw new R(M.INVALID_ARGUMENT,"Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));e.push(n),n=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new R(M.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new R(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(n+=s,i++):(o(),i++)}if(o(),a)throw new R(M.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new r(e)}},{key:"emptyPath",value:function(){return new r([])}}]),r}(Y),tt=function(){"use strict";function t(n){e(a)(this,t),this.path=n}return e(u)(t,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(t){return null!==t&&0===J.comparator(this.path,t.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(e){return new t(J.fromString(e))}},{key:"fromName",value:function(e){return new t(J.fromString(e).popFirst(5))}},{key:"empty",value:function(){return new t(J.emptyPath())}},{key:"comparator",value:function(t,e){return J.comparator(t.path,e.path)}},{key:"isDocumentKey",value:function(t){return t.length%2==0}},{key:"fromSegments",value:function(e){return new t(new J(e.slice()))}}]),t}(),et=function t(n,r,i,o){"use strict";e(a)(this,t),this.indexId=n,this.collectionGroup=r,this.fields=i,this.indexState=o};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */et.UNKNOWN_ID=-1;function nt(t,e){var n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new Q(n+1,0):new Q(n,r));return new it(i,tt.empty(),e)}function rt(t){return new it(t.readTime,t.key,-1)}var it=function(){"use strict";function t(n,r,i){e(a)(this,t),this.readTime=n,this.documentKey=r,this.largestBatchId=i}return e(u)(t,null,[{key:"min",value:function(){return new t(X.min(),tt.empty(),-1)}},{key:"max",value:function(){return new t(X.max(),tt.empty(),-1)}}]),t}();function ot(t,e){var n=t.readTime.compareTo(e.readTime);return 0!==n?n:0!==(n=tt.comparator(t.documentKey,e.documentKey))?n:K(t.largestBatchId,e.largestBatchId)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",st=function(){"use strict";function t(){e(a)(this,t),this.onCommittedListeners=[]}return e(u)(t,[{key:"addOnCommittedListener",value:function(t){this.onCommittedListeners.push(t)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(t){return t()}))}}]),t}();function ut(t){return ct.apply(this,arguments)}function ct(){return(ct=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.code===M.FAILED_PRECONDITION&&n.message===at){t.next=2;break}throw n;case 2:I("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt=function(){"use strict";function t(n){var r=this;e(a)(this,t),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,n((function(t){r.isDone=!0,r.result=t,r.nextCallback&&r.nextCallback(t)}),(function(t){r.isDone=!0,r.error=t,r.catchCallback&&r.catchCallback(t)}))}return e(u)(t,[{key:"catch",value:function(t){return this.next(void 0,t)}},{key:"next",value:function(e,n){var r=this;return this.callbackAttached&&N(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){var o=r;r.nextCallback=function(n){o.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){o.wrapFailure(n,e).next(t,i)}}))}},{key:"toPromise",value:function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))}},{key:"wrapUserFunction",value:function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}}},{key:"wrapSuccess",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)}},{key:"wrapFailure",value:function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)}}],[{key:"resolve",value:function(e){return new t((function(t,n){t(e)}))}},{key:"reject",value:function(e){return new t((function(t,n){n(e)}))}},{key:"waitFor",value:function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))}},{key:"or",value:function(e){var n=t.resolve(!1),r=!0,i=!1,o=void 0;try{for(var a,s=function(e,r){var i=r.value;n=n.next((function(e){return e?t.resolve(e):i()}))},u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s(0,a)}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}},{key:"forEach",value:function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)}},{key:"mapArray",value:function(e,n){return new t((function(t,r){for(var i=function(i){var u=i;n(e[u]).next((function(e){a[u]=e,++s===o&&t(a)}),(function(t){return r(t)}))},o=e.length,a=new Array(o),s=0,u=0;u<o;u++)i(u)}))}},{key:"doWhile",value:function(e,n){return new t((function(t,r){var i=function(){!0===e()?n().next((function(){i()}),r):t()};i()}))}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(t){return"IndexedDbTransactionError"===t.name}var ht=function(){"use strict";function t(n,r){var i=this;e(a)(this,t),this.previousValue=n,r&&(r.sequenceNumberHandler=function(t){return i.it(t)},this.rt=function(t){return r.writeSequenceNumber(t)})}return e(u)(t,[{key:"it",value:function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}},{key:"next",value:function(){var t=++this.previousValue;return this.rt&&this.rt(t),t}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function dt(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pt(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function vt(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ht.ot=-1;var yt=function(){"use strict";function t(n,r){e(a)(this,t),this.comparator=n,this.root=r||mt.EMPTY}return e(u)(t,[{key:"insert",value:function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}},{key:"remove",value:function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}},{key:"get",value:function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}},{key:"indexOf",value:function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(t){return this.root.inorderTraversal(t)}},{key:"forEach",value:function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))}},{key:"toString",value:function(){var t=[];return this.inorderTraversal((function(e,n){return t.push("".concat(e,":").concat(n)),!1})),"{".concat(t.join(", "),"}")}},{key:"reverseTraversal",value:function(t){return this.root.reverseTraversal(t)}},{key:"getIterator",value:function(){return new gt(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(t){return new gt(this.root,t,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new gt(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(t){return new gt(this.root,t,this.comparator,!0)}}]),t}(),gt=function(){"use strict";function t(n,r,i,o){e(a)(this,t),this.isReverse=o,this.nodeStack=[];for(var s=1;!n.isEmpty();)if(s=r?i(n.key,r):1,r&&o&&(s*=-1),s<0)n=this.isReverse?n.left:n.right;else{if(0===s){this.nodeStack.push(n);break}this.nodeStack.push(n),n=this.isReverse?n.right:n.left}}return e(u)(t,[{key:"getNext",value:function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}]),t}(),mt=function(){"use strict";function t(n,r,i,o,s){e(a)(this,t),this.key=n,this.value=r,this.color=null!=i?i:t.RED,this.left=null!=o?o:t.EMPTY,this.right=null!=s?s:t.EMPTY,this.size=this.left.size+1+this.right.size}return e(u)(t,[{key:"copy",value:function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}},{key:"reverseTraversal",value:function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}},{key:"moveRedLeft",value:function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t}},{key:"moveRedRight",value:function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t}},{key:"rotateLeft",value:function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}},{key:"rotateRight",value:function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}},{key:"colorFlip",value:function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}},{key:"checkMaxDepth",value:function(){var t=this.check();return Math.pow(2,t)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw N();if(this.right.isRed())throw N();var t=this.left.check();if(t!==this.right.check())throw N();return t+(this.isRed()?0:1)}}]),t}();mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1,mt.EMPTY=new(function(){"use strict";function t(){e(a)(this,t),this.size=0}return e(u)(t,[{key:"key",get:function(){throw N()}},{key:"value",get:function(){throw N()}},{key:"color",get:function(){throw N()}},{key:"left",get:function(){throw N()}},{key:"right",get:function(){throw N()}},{key:"copy",value:function(t,e,n,r,i){return this}},{key:"insert",value:function(t,e,n){return new mt(t,e)}},{key:"remove",value:function(t,e){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(t){return!1}},{key:"reverseTraversal",value:function(t){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wt=function(){"use strict";function t(n){e(a)(this,t),this.comparator=n,this.data=new yt(this.comparator)}return e(u)(t,[{key:"has",value:function(t){return null!==this.data.get(t)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(t){return this.data.indexOf(t)}},{key:"forEach",value:function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"forEachInRange",value:function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}},{key:"forEachWhile",value:function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}},{key:"getIterator",value:function(){return new bt(this.data.getIterator())}},{key:"getIteratorFrom",value:function(t){return new bt(this.data.getIteratorFrom(t))}},{key:"add",value:function(t){return this.copy(this.data.remove(t).insert(t,!0))}},{key:"delete",value:function(t){return this.has(t)?this.copy(this.data.remove(t)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var t=[];return this.forEach((function(e){t.push(e)})),t}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"}},{key:"copy",value:function(e){var n=new t(this.comparator);return n.data=e,n}}]),t}(),bt=function(){"use strict";function t(n){e(a)(this,t),this.iter=n}return e(u)(t,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kt=function(){"use strict";function t(n){e(a)(this,t),this.fields=n,n.sort(Z.comparator)}return e(u)(t,[{key:"unionWith",value:function(e){var n=new wt(Z.comparator),r=!0,i=!1,o=void 0;try{for(var a,s=this.fields[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;n=n.add(u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var c=!0,l=!1,f=void 0;try{for(var h,d=e[Symbol.iterator]();!(c=(h=d.next()).done);c=!0){var p=h.value;n=n.add(p)}}catch(t){l=!0,f=t}finally{try{c||null==d.return||d.return()}finally{if(l)throw f}}return new t(n.toArray())}},{key:"covers",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.fields[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(i.value.isPrefixOf(t))return!0}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return!1}},{key:"isEqual",value:function(t){return G(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))}}],[{key:"empty",value:function(){return new t([])}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt=Symbol.iterator,Et=function(){"use strict";function t(n){e(a)(this,t),this.binaryString=n}return e(u)(t,[{key:xt,value:function(){var t=this,e=0;return{next:function(){return e<t.binaryString.length?{value:t.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){var t;return t=this.binaryString,btoa(t)}},{key:"toUint8Array",value:function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(t){return K(this.binaryString,t.binaryString)}},{key:"isEqual",value:function(t){return this.binaryString===t.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Et.EMPTY_BYTE_STRING=new Et("");var _t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tt(t){if(D(!!t),"string"==typeof t){var e=0,n=_t.exec(t);if(D(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:St(t.seconds),nanos:St(t.nanos)}}function St(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function It(t){return"string"==typeof t?Et.fromBase64String(t):Et.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function At(t){var e=t.mapValue.fields.__previous_value__;return Ct(e)?At(e):e}function Lt(t){var e=Tt(t.mapValue.fields.__local_write_time__.timestampValue);return new Q(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt=function t(n,r,i,o,s,u,c,l){"use strict";e(a)(this,t),this.databaseId=n,this.appId=r,this.persistenceKey=i,this.host=o,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=c,this.useFetchStreams=l},Dt=function(){"use strict";function t(n,r){e(a)(this,t),this.projectId=n,this.database=r||"(default)"}return e(u)(t,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}}],[{key:"empty",value:function(){return new t("","")}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ot(t){return null==t}function Mt(t){return 0===t&&1/t==-1/0}function Rt(t){return"number"==typeof t&&Number.isInteger(t)&&!Mt(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ct(t)?4:Yt(t)?9007199254740991:10:N()}function Ft(t,e){if(t===e)return!0;var n,r=Bt(t);if(r!==Bt(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Lt(t).isEqual(Lt(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Tt(t.timestampValue),r=Tt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,It(t.bytesValue).isEqual(It(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return St(t.geoPointValue.latitude)===St(e.geoPointValue.latitude)&&St(t.geoPointValue.longitude)===St(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return St(t.integerValue)===St(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=St(t.doubleValue),r=St(e.doubleValue);return n===r?Mt(n)===Mt(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return G(t.arrayValue.values||[],e.arrayValue.values||[],Ft);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(dt(n)!==dt(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ft(n[i],r[i])))return!1;return!0}(t,e);default:return N()}}function Ut(t,e){return void 0!==(t.values||[]).find((function(t){return Ft(t,e)}))}function Vt(t,e){if(t===e)return 0;var n,r,i,o,a=Bt(t),s=Bt(e);if(a!==s)return K(a,s);switch(a){case 0:case 9007199254740991:return 0;case 1:return K(t.booleanValue,e.booleanValue);case 2:return r=e,i=St((n=t).integerValue||n.doubleValue),o=St(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return jt(t.timestampValue,e.timestampValue);case 4:return jt(Lt(t),Lt(e));case 5:return K(t.stringValue,e.stringValue);case 6:return function(t,e){var n=It(t),r=It(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=K(n[i],r[i]);if(0!==o)return o}return K(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=K(St(t.latitude),St(e.latitude));return 0!==n?n:K(St(t.longitude),St(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Vt(n[i],r[i]);if(o)return o}return K(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===Pt.mapValue&&e===Pt.mapValue)return 0;if(t===Pt.mapValue)return 1;if(e===Pt.mapValue)return-1;var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=K(r[a],o[a]);if(0!==s)return s;var u=Vt(n[r[a]],i[o[a]]);if(0!==u)return u}return K(r.length,o.length)}(t.mapValue,e.mapValue);default:throw N()}}function jt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return K(t,e);var n=Tt(t),r=Tt(e),i=K(n.seconds,r.seconds);return 0!==i?i:K(n.nanos,r.nanos)}function qt(t){return zt(t)}function zt(t){var e,n,r,i;return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(r=t.timestampValue,i=Tt(r),"time(".concat(i.seconds,",").concat(i.nanos,")")):"stringValue"in t?t.stringValue:"bytesValue"in t?It(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,tt.fromName(n).toString()):"geoPointValue"in t?"geo(".concat((e=t.geoPointValue).latitude,",").concat(e.longitude,")"):"arrayValue"in t?function(t){var e="[",n=!0,r=!0,i=!1,o=void 0;try{for(var a,s=(t.values||[])[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;n?n=!1:e+=",",e+=zt(u)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return e+"]"}(t.arrayValue):"mapValue"in t?function(t){var e=Object.keys(t.fields||{}).sort(),n="{",r=!0,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r?r=!1:n+=",",n+="".concat(c,":").concat(zt(t.fields[c]))}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return n+"}"}(t.mapValue):N()}function Ht(t){return!!t&&"integerValue"in t}function Wt(t){return!!t&&"arrayValue"in t}function Kt(t){return!!t&&"nullValue"in t}function Gt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Qt(t){return!!t&&"mapValue"in t}function Xt(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return pt(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Xt(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Xt(t.arrayValue.values[r]);return n}return Object.assign({},t)}function Yt(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Jt=function(){"use strict";function t(n){e(a)(this,t),this.value=n}return e(u)(t,[{key:"field",value:function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Qt(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null}},{key:"set",value:function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Xt(e)}},{key:"setAll",value:function(t){var e=this,n=Z.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Xt(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(t){var e=this.field(t.popLast());Qt(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}},{key:"isEqual",value:function(t){return Ft(this.value,t.value)}},{key:"getFieldsMap",value:function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Qt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}},{key:"applyChanges",value:function(t,e,n){pt(e,(function(e,n){return t[e]=n}));var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;delete t[u]}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"clone",value:function(){return new t(Xt(this.value))}}],[{key:"empty",value:function(){return new t({mapValue:{}})}}]),t}();function $t(t){var e=[];return pt(t.fields,(function(t,n){var r=new Z([t]);if(Qt(n)){var i=$t(n.mapValue).fields,o=!0,a=!1,s=void 0;if(0===i.length)e.push(r);else try{for(var u,c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.push(r.child(l))}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}}else e.push(r)})),new kt(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Zt=function(){"use strict";function t(n,r,i,o,s,u){e(a)(this,t),this.key=n,this.documentType=r,this.version=i,this.readTime=o,this.data=s,this.documentState=u}return e(u)(t,[{key:"convertToFoundDocument",value:function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}},{key:"convertToNoDocument",value:function(t){return this.version=t,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(t){return this.version=t,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=X.min(),this}},{key:"setReadTime",value:function(t){return this.readTime=t,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}},{key:"mutableCopy",value:function(){return new t(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(e){return new t(e,0,X.min(),X.min(),Jt.empty(),0)}},{key:"newFoundDocument",value:function(e,n,r){return new t(e,1,n,X.min(),r,0)}},{key:"newNoDocument",value:function(e,n){return new t(e,2,n,X.min(),Jt.empty(),0)}},{key:"newUnknownDocument",value:function(e,n){return new t(e,3,n,X.min(),Jt.empty(),2)}}]),t}(),te=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;e(a)(this,t),this.path=n,this.collectionGroup=r,this.orderBy=i,this.filters=o,this.limit=s,this.startAt=u,this.endAt=c,this.ut=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new te(t,e,n,r,i,o,a)}function ne(t){var e=O(t);if(null===e.ut){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){var e;return(e=t).field.canonicalString()+e.op.toString()+qt(e.value)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Ot(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((function(t){return qt(t)})).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((function(t){return qt(t)})).join(",")),e.ut=n}return e.ut}function re(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ye(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Ft(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!me(t.startAt,e.startAt)&&me(t.endAt,e.endAt)}function ie(t){return tt.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var oe=function(t){"use strict";e(f)(r,(function t(){e(a)(this,t)}));var n=e(v)(r);function r(t,i,o){var s;return e(a)(this,r),(s=n.call(this)).field=t,s.op=i,s.value=o,e(h)(s)}return e(u)(r,[{key:"matches",value:function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.at(Vt(e,this.value)):null!==e&&Bt(this.value)===Bt(e)&&this.at(Vt(e,this.value))}},{key:"at",value:function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return N()}}},{key:"ht",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.ct(t,e,n):new ae(t,e,n):"array-contains"===e?new le(t,n):"in"===e?new fe(t,n):"not-in"===e?new he(t,n):"array-contains-any"===e?new de(t,n):new r(t,e,n)}},{key:"ct",value:function(t,e,n){return"in"===e?new se(t,n):new ue(t,n)}}]),r}(),ae=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o){var s;return e(a)(this,r),(s=n.call(this,t,i,o)).key=tt.fromName(o.referenceValue),e(h)(s)}return e(u)(r,[{key:"matches",value:function(t){var e=tt.comparator(t.key,this.key);return this.at(e)}}]),r}(oe),se=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this,t,"in",i)).keys=ce("in",i),e(h)(o)}return e(u)(r,[{key:"matches",value:function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))}}]),r}(oe),ue=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this,t,"not-in",i)).keys=ce("not-in",i),e(h)(o)}return e(u)(r,[{key:"matches",value:function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))}}]),r}(oe);function ce(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return tt.fromName(t.referenceValue)}))}var le=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){return e(a)(this,r),n.call(this,t,"array-contains",i)}return e(u)(r,[{key:"matches",value:function(t){var e=t.data.field(this.field);return Wt(e)&&Ut(e.arrayValue,this.value)}}]),r}(oe),fe=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){return e(a)(this,r),n.call(this,t,"in",i)}return e(u)(r,[{key:"matches",value:function(t){var e=t.data.field(this.field);return null!==e&&Ut(this.value.arrayValue,e)}}]),r}(oe),he=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){return e(a)(this,r),n.call(this,t,"not-in",i)}return e(u)(r,[{key:"matches",value:function(t){if(Ut(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Ut(this.value.arrayValue,e)}}]),r}(oe),de=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){return e(a)(this,r),n.call(this,t,"array-contains-any",i)}return e(u)(r,[{key:"matches",value:function(t){var e=this,n=t.data.field(this.field);return!(!Wt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Ut(e.value.arrayValue,t)}))}}]),r}(oe),pe=function t(n,r){"use strict";e(a)(this,t),this.position=n,this.inclusive=r},ve=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";e(a)(this,t),this.field=n,this.dir=r};function ye(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ge(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?tt.comparator(tt.fromName(a.referenceValue),n.key):Vt(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function me(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Ft(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we=function t(n){"use strict";var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;e(a)(this,t),this.path=n,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=o,this.limit=s,this.limitType=u,this.startAt=c,this.endAt=l,this.lt=null,this.ft=null,this.startAt,this.endAt};function be(t,e,n,r,i,o,a,s){return new we(t,e,n,r,i,o,a,s)}function ke(t){return new we(t)}function xe(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Ee(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function _e(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t.filters[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;if(a.ht())return a.field}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return null}function Te(t){return null!==t.collectionGroup}function Se(t){var e=O(t);if(null===e.lt){e.lt=[];var n=_e(e),r=Ee(e);if(null!==n&&null===r)n.isKeyField()||e.lt.push(new ve(n)),e.lt.push(new ve(Z.keyField(),"asc"));else{var i=!1,o=!0,a=!1,s=void 0;try{for(var u,c=e.explicitOrderBy[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;e.lt.push(l),l.field.isKeyField()&&(i=!0)}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}if(!i){var f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.lt.push(new ve(Z.keyField(),f))}}}return e.lt}function Ie(t){var e=O(t);if(!e.ft)if("F"===e.limitType)e.ft=ee(e.path,e.collectionGroup,Se(e),e.filters,e.limit,e.startAt,e.endAt);else{var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=Se(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c="desc"===u.dir?"asc":"desc";n.push(new ve(u.field,c))}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}var l=e.endAt?new pe(e.endAt.position,e.endAt.inclusive):null,f=e.startAt?new pe(e.startAt.position,e.startAt.inclusive):null;e.ft=ee(e.path,e.collectionGroup,n,e.filters,e.limit,l,f)}return e.ft}function Ce(t,e,n){return new we(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ae(t,e){return re(Ie(t),Ie(e))&&t.limitType===e.limitType}function Le(t){return"".concat(ne(Ie(t)),"|lt:").concat(t.limitType)}function Ne(t){return"Query(target=".concat((e=Ie(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: [".concat(e.filters.map((function(t){var e;return"".concat((e=t).field.canonicalString()," ").concat(e.op," ").concat(qt(e.value))})).join(", "),"]")),Ot(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: [".concat(e.orderBy.map((function(t){return"".concat((e=t).field.canonicalString()," (").concat(e.dir,")");var e})).join(", "),"]")),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((function(t){return qt(t)})).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((function(t){return qt(t)})).join(",")),"Target(".concat(n,")")),"; limitType=").concat(t.limitType,")");var e,n}function De(t,e){return e.isFoundDocument()&&(i=t,a=(o=e).key.path,null!==i.collectionGroup?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):tt.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a))&&function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=t.explicitOrderBy[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(!s.field.isKeyField()&&null===e.data.field(s.field))return!1}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}(t,e)&&function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=t.filters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){if(!o.value.matches(e))return!1}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}(t,e)&&(r=e,!((n=t).startAt&&!function(t,e,n){var r=ge(t,e,n);return t.inclusive?r<=0:r<0}(n.startAt,Se(n),r)||n.endAt&&!function(t,e,n){var r=ge(t,e,n);return t.inclusive?r>=0:r>0}(n.endAt,Se(n),r)));var n,r,i,o,a}function Oe(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Me(t){return function(e,n){var r=!1,i=!0,o=!1,a=void 0;try{for(var s,u=Se(t)[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=Re(c,e,n);if(0!==l)return l;r=r||c.field.isKeyField()}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return 0}}function Re(t,e,n){var r,i,o,a,s=t.field.isKeyField()?tt.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),a=i.data.field(r),null!==o&&null!==a?Vt(o,a):N());switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return N()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(t,e){if(t.dt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mt(e)?"-0":e}}function Be(t){return{integerValue:""+t}}function Fe(t,e){return Rt(e)?Be(e):Pe(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue=function t(){"use strict";e(a)(this,t),this._=void 0};function Ve(t,e,n){return t instanceof ze?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof He?We(t,e):t instanceof Ke?Ge(t,e):function(t,e){var n=qe(t,e),r=Xe(n)+Xe(t._t);return Ht(n)&&Ht(t._t)?Be(r):Pe(t.wt,r)}(t,e);var r,i,o}function je(t,e,n){return t instanceof He?We(t,e):t instanceof Ke?Ge(t,e):n}function qe(t,e){var n,r;return t instanceof Qe?Ht(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null}var ze=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(){return e(a)(this,r),n.apply(this,arguments)}return r}(Ue),He=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t){var i;return e(a)(this,r),(i=n.call(this)).elements=t,e(h)(i)}return r}(Ue);function We(t,e){var n=Ye(e),r=!0,i=!1,o=void 0;try{for(var a,s=function(t,e){var r=e.value;n.some((function(t){return Ft(t,r)}))||n.push(r)},u=t.elements[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s(0,a)}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return{arrayValue:{values:n}}}var Ke=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t){var i;return e(a)(this,r),(i=n.call(this)).elements=t,e(h)(i)}return r}(Ue);function Ge(t,e){var n=Ye(e),r=!0,i=!1,o=void 0;try{for(var a,s=function(t,e){var r=e.value;n=n.filter((function(t){return!Ft(t,r)}))},u=t.elements[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s(0,a)}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return{arrayValue:{values:n}}}var Qe=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this)).wt=t,o._t=i,e(h)(o)}return r}(Ue);function Xe(t){return St(t.integerValue||t.doubleValue)}function Ye(t){return Wt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je=function t(n,r){"use strict";e(a)(this,t),this.field=n,this.transform=r};var $e=function t(n,r){"use strict";e(a)(this,t),this.version=n,this.transformResults=r},Ze=function(){"use strict";function t(n,r){e(a)(this,t),this.updateTime=n,this.exists=r}return e(u)(t,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}],[{key:"none",value:function(){return new t}},{key:"exists",value:function(e){return new t(void 0,e)}},{key:"updateTime",value:function(e){return new t(e)}}]),t}();function tn(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var en=function t(){"use strict";e(a)(this,t)};function nn(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new vn(t.key,Ze.none()):new un(t.key,t.data,Ze.none());var n=t.data,r=Jt.empty(),i=new wt(Z.comparator),o=!0,a=!1,s=void 0;try{for(var u,c=e.fields[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;if(!i.has(l)){var f=n.field(l);null===f&&l.length>1&&(l=l.popLast(),f=n.field(l)),null===f?r.delete(l):r.set(l,f),i=i.add(l)}}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return new cn(t.key,r,new kt(i.toArray()),Ze.none())}function rn(t,e,n){var r,i,o,a,s;t instanceof un?(i=e,o=n,a=(r=t).value.clone(),s=fn(r.fieldTransforms,i,o.transformResults),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):t instanceof cn?function(t,e,n){if(tn(t.precondition,e)){var r=fn(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ln(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function on(t,e,n,r){return t instanceof un?function(t,e,n,r){if(!tn(t.precondition,e))return n;var i=t.value.clone(),o=hn(t.fieldTransforms,r,e);return i.setAll(o),e.convertToFoundDocument(e.version,i).setHasLocalMutations(),null}(t,e,n,r):t instanceof cn?function(t,e,n,r){if(!tn(t.precondition,e))return n;var i=hn(t.fieldTransforms,r,e),o=e.data;return o.setAll(ln(t)),o.setAll(i),e.convertToFoundDocument(e.version,o).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((function(t){return t.field})))}(t,e,n,r):(i=e,o=n,tn(t.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o);var i,o}function an(t,e){var n=null,r=!0,i=!1,o=void 0;try{for(var a,s=t.fieldTransforms[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,c=e.data.field(u.field),l=qe(u.transform,c||null);null!=l&&(null===n&&(n=Jt.empty()),n.set(u.field,l))}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n||null}function sn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&G(n,r,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&(n=t.transform,r=e.transform,n instanceof He&&r instanceof He||n instanceof Ke&&r instanceof Ke?G(n.elements,r.elements,Ft):n instanceof Qe&&r instanceof Qe?Ft(n._t,r._t):n instanceof ze&&r instanceof ze);var n,r}(t,e)}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}var un=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o){var s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return e(a)(this,r),(s=n.call(this)).key=t,s.value=i,s.precondition=o,s.fieldTransforms=u,s.type=0,e(h)(s)}return e(u)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(en),cn=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o,s){var u,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return e(a)(this,r),(u=n.call(this)).key=t,u.data=i,u.fieldMask=o,u.precondition=s,u.fieldTransforms=c,u.type=1,e(h)(u)}return e(u)(r,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),r}(en);function ln(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function fn(t,e,n){var r=new Map;D(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,je(a,s,n[i]))}return r}function hn(t,e,n){var r=new Map,i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.transform,f=n.data.field(c.field);r.set(c.field,Ve(l,f,e))}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}var dn,pn,vn=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this)).key=t,o.precondition=i,o.type=2,o.fieldTransforms=[],e(h)(o)}return e(u)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(en),yn=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this)).key=t,o.precondition=i,o.type=3,o.fieldTransforms=[],e(h)(o)}return e(u)(r,[{key:"getFieldMask",value:function(){return null}}]),r}(en),gn=function t(n){"use strict";e(a)(this,t),this.count=n};function mn(t){switch(t){default:return N();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function wn(t){if(void 0===t)return C("GRPC error has no .code"),M.UNKNOWN;switch(t){case dn.OK:return M.OK;case dn.CANCELLED:return M.CANCELLED;case dn.UNKNOWN:return M.UNKNOWN;case dn.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case dn.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case dn.INTERNAL:return M.INTERNAL;case dn.UNAVAILABLE:return M.UNAVAILABLE;case dn.UNAUTHENTICATED:return M.UNAUTHENTICATED;case dn.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case dn.NOT_FOUND:return M.NOT_FOUND;case dn.ALREADY_EXISTS:return M.ALREADY_EXISTS;case dn.PERMISSION_DENIED:return M.PERMISSION_DENIED;case dn.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case dn.ABORTED:return M.ABORTED;case dn.OUT_OF_RANGE:return M.OUT_OF_RANGE;case dn.UNIMPLEMENTED:return M.UNIMPLEMENTED;case dn.DATA_LOSS:return M.DATA_LOSS;default:return N()}}(pn=dn||(dn={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bn=function(){"use strict";function t(n,r){e(a)(this,t),this.mapKeyFn=n,this.equalsFn=r,this.inner={},this.innerSize=0}return e(u)(t,[{key:"get",value:function(t){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){var i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=e(d)(s.value,2),l=c[0],f=c[1];if(this.equalsFn(l,t))return f}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}}},{key:"has",value:function(t){return void 0!==this.get(t)}},{key:"set",value:function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0===r)return this.inner[n]=[[t,e]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e]),this.innerSize++}},{key:"delete",value:function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(t){pt(this.inner,(function(n,r){var i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=e(d)(s.value,2),l=c[0],f=c[1];t(l,f)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}))}},{key:"isEmpty",value:function(){return vt(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),t}(),kn=new yt(tt.comparator);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return kn}var En=new yt(tt.comparator);function _n(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=En,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.insert(c.key,c)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}function Tn(t){var e=En;return t.forEach((function(t,n){return e=e.insert(t,n.overlayedDocument)})),e}function Sn(){return Cn()}function In(){return Cn()}function Cn(){return new bn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)}))}var An=new yt(tt.comparator),Ln=new wt(tt.comparator);function Nn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Ln,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;r=r.add(c)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}var Dn=new wt(K);function On(){return Dn}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn=function(){"use strict";function t(n,r,i,o,s){e(a)(this,t),this.snapshotVersion=n,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=s}return e(u)(t,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(e,n){var r=new Map;return r.set(e,Rn.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(X.min(),r,On(),xn(),Nn())}}]),t}(),Rn=function(){"use strict";function t(n,r,i,o,s){e(a)(this,t),this.resumeToken=n,this.current=r,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=s}return e(u)(t,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(e,n){return new t(Et.EMPTY_BYTE_STRING,n,Nn(),Nn(),Nn())}}]),t}(),Pn=function t(n,r,i,o){"use strict";e(a)(this,t),this.gt=n,this.removedTargetIds=r,this.key=i,this.yt=o},Bn=function t(n,r){"use strict";e(a)(this,t),this.targetId=n,this.It=r},Fn=function t(n,r){"use strict";var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Et.EMPTY_BYTE_STRING,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e(a)(this,t),this.state=n,this.targetIds=r,this.resumeToken=i,this.cause=o},Un=function(){"use strict";function t(){e(a)(this,t),this.Tt=0,this.Et=qn(),this.At=Et.EMPTY_BYTE_STRING,this.Rt=!1,this.bt=!0}return e(u)(t,[{key:"current",get:function(){return this.Rt}},{key:"resumeToken",get:function(){return this.At}},{key:"Pt",get:function(){return 0!==this.Tt}},{key:"vt",get:function(){return this.bt}},{key:"Vt",value:function(t){t.approximateByteSize()>0&&(this.bt=!0,this.At=t)}},{key:"St",value:function(){var t=Nn(),e=Nn(),n=Nn();return this.Et.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:N()}})),new Rn(this.At,this.Rt,t,e,n)}},{key:"Dt",value:function(){this.bt=!1,this.Et=qn()}},{key:"Ct",value:function(t,e){this.bt=!0,this.Et=this.Et.insert(t,e)}},{key:"xt",value:function(t){this.bt=!0,this.Et=this.Et.remove(t)}},{key:"Nt",value:function(){this.Tt+=1}},{key:"kt",value:function(){this.Tt-=1}},{key:"Mt",value:function(){this.bt=!0,this.Rt=!0}}]),t}(),Vn=function(){"use strict";function t(n){e(a)(this,t),this.Ot=n,this.Ft=new Map,this.$t=xn(),this.Bt=jn(),this.Lt=new wt(K)}return e(u)(t,[{key:"Ut",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t.gt[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;t.yt&&t.yt.isFoundDocument()?this.qt(a,t.yt):this.Kt(a,t.key,t.yt)}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}var s=!0,u=!1,c=void 0;try{for(var l,f=t.removedTargetIds[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;this.Kt(h,t.key,t.yt)}}catch(t){u=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}}},{key:"Gt",value:function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.Qt(n);switch(t.state){case 0:e.jt(n)&&r.Vt(t.resumeToken);break;case 1:r.kt(),r.Pt||r.Dt(),r.Vt(t.resumeToken);break;case 2:r.kt(),r.Pt||e.removeTarget(n);break;case 3:e.jt(n)&&(r.Mt(),r.Vt(t.resumeToken));break;case 4:e.jt(n)&&(e.Wt(n),r.Vt(t.resumeToken));break;default:N()}}))}},{key:"forEachTarget",value:function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ft.forEach((function(t,r){n.jt(r)&&e(r)}))}},{key:"zt",value:function(t){var e=t.targetId,n=t.It.count,r=this.Ht(e);if(r){var i=r.target;if(ie(i))if(0===n){var o=new tt(i.path);this.Kt(e,o,Zt.newNoDocument(o,X.min()))}else D(1===n);else this.Jt(e)!==n&&(this.Wt(e),this.Lt=this.Lt.add(e))}}},{key:"Yt",value:function(t){var e=this,n=new Map;this.Ft.forEach((function(r,i){var o=e.Ht(i);if(o){if(r.current&&ie(o.target)){var a=new tt(o.target.path);null!==e.$t.get(a)||e.Xt(i,a)||e.Kt(i,a,Zt.newNoDocument(a,t))}r.vt&&(n.set(i,r.St()),r.Dt())}}));var r=Nn();this.Bt.forEach((function(t,n){var i=e,o=!0;n.forEachWhile((function(t){var e=i.Ht(t);return!e||2===e.purpose||(o=!1,!1)})),o&&(r=r.add(t))})),this.$t.forEach((function(e,n){return n.setReadTime(t)}));var i=new Mn(t,n,this.Lt,this.$t,r);return this.$t=xn(),this.Bt=jn(),this.Lt=new wt(K),i}},{key:"qt",value:function(t,e){if(this.jt(t)){var n=this.Xt(t,e.key)?2:0;this.Qt(t).Ct(e.key,n),this.$t=this.$t.insert(e.key,e),this.Bt=this.Bt.insert(e.key,this.Zt(e.key).add(t))}}},{key:"Kt",value:function(t,e,n){if(this.jt(t)){var r=this.Qt(t);this.Xt(t,e)?r.Ct(e,1):r.xt(e),this.Bt=this.Bt.insert(e,this.Zt(e).delete(t)),n&&(this.$t=this.$t.insert(e,n))}}},{key:"removeTarget",value:function(t){this.Ft.delete(t)}},{key:"Jt",value:function(t){var e=this.Qt(t).St();return this.Ot.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}},{key:"Nt",value:function(t){this.Qt(t).Nt()}},{key:"Qt",value:function(t){var e=this.Ft.get(t);return e||(e=new Un,this.Ft.set(t,e)),e}},{key:"Zt",value:function(t){var e=this.Bt.get(t);return e||(e=new wt(K),this.Bt=this.Bt.insert(t,e)),e}},{key:"jt",value:function(t){var e=null!==this.Ht(t);return e||I("WatchChangeAggregator","Detected inactive target",t),e}},{key:"Ht",value:function(t){var e=this.Ft.get(t);return e&&e.Pt?null:this.Ot.te(t)}},{key:"Wt",value:function(t){var e=this;this.Ft.set(t,new Un),this.Ot.getRemoteKeysForTarget(t).forEach((function(n){e.Kt(t,n,null)}))}},{key:"Xt",value:function(t,e){return this.Ot.getRemoteKeysForTarget(t).has(e)}}]),t}();function jn(){return new yt(tt.comparator)}function qn(){return new yt(tt.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zn={asc:"ASCENDING",desc:"DESCENDING"},Hn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wn=function t(n,r){"use strict";e(a)(this,t),this.databaseId=n,this.dt=r};function Kn(t,e){return t.dt?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function Gn(t,e){return t.dt?e.toBase64():e.toUint8Array()}function Qn(t,e){return Kn(t,e.toTimestamp())}function Xn(t){return D(!!t),X.fromTimestamp((e=Tt(t),new Q(e.seconds,e.nanos)));var e}function Yn(t,e){return(n=t,new J(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Jn(t){var e=J.fromString(t);return D(vr(e)),e}function $n(t,e){return Yn(t.databaseId,e.path)}function Zn(t,e){var n=Jn(e);if(n.get(1)!==t.databaseId.projectId)throw new R(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new R(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tt(rr(n))}function tr(t,e){return Yn(t.databaseId,e)}function er(t){var e=Jn(t);return 4===e.length?J.emptyPath():rr(e)}function nr(t){return new J(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rr(t){return D(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ir(t,e,n){return{name:$n(t,e),fields:n.value.mapValue.fields}}function or(t,e){var n,r,i;if(e instanceof un)n={update:ir(t,e.key,e.value)};else if(e instanceof vn)n={delete:$n(t,e.key)};else if(e instanceof cn)n={update:ir(t,e.key,e.data),updateMask:(r=e.fieldMask,i=[],r.fields.forEach((function(t){return i.push(t.canonicalString())})),{fieldPaths:i})};else{if(!(e instanceof yn))return N();n={verify:$n(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof ze)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof He)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ke)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qe)return{fieldPath:e.field.canonicalString(),increment:n._t};throw N()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Qn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:N()}(t,e.precondition)),n}function ar(t,e){return{documents:[tr(t,e.path)]}}function sr(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=tr(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=tr(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Gt(t.value))return{unaryFilter:{field:hr(t.field),op:"IS_NAN"}};if(Kt(t.value))return{unaryFilter:{field:hr(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Gt(t.value))return{unaryFilter:{field:hr(t.field),op:"IS_NOT_NAN"}};if(Kt(t.value))return{unaryFilter:{field:hr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hr(t.field),op:fr(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:hr((e=t).field),direction:lr(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s,u,c=(a=t,s=e.limit,a.dt||Ot(s)?s:{value:s});return null!==c&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt={before:(u=e.startAt).inclusive,values:u.position}),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),n}function ur(t){var e=er(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){D(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=cr(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new ve(dr((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=Ot(c="object"==typeof u?u.value:u)?null:c);var f=null;n.startAt&&(f=function(t){var e=!!t.before,n=t.values||[];return new pe(n,e)}(n.startAt));var h=null;return n.endAt&&(h=function(t){var e=!t.before,n=t.values||[];return new pe(n,e)}(n.endAt)),be(e,i,s,a,l,"F",f,h)}function cr(t){return t?void 0!==t.unaryFilter?[pr(t)]:void 0!==t.fieldFilter?[(e=t,oe.create(dr(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return N()}}(e.fieldFilter.op),e.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return cr(t)})).reduce((function(t,e){return t.concat(e)})):N():[];var e}function lr(t){return zn[t]}function fr(t){return Hn[t]}function hr(t){return{fieldPath:t.canonicalString()}}function dr(t){return Z.fromServerFormat(t.fieldPath)}function pr(t){switch(t.unaryFilter.op){case"IS_NAN":var e=dr(t.unaryFilter.field);return oe.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=dr(t.unaryFilter.field);return oe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=dr(t.unaryFilter.field);return oe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=dr(t.unaryFilter.field);return oe.create(i,"!=",{nullValue:"NULL_VALUE"});default:return N()}}function vr(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gr=(e(p)(yr).concat(["documentOverlays"]),["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"]),mr=gr;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e(p)(mr).concat(["indexConfiguration","indexState","indexEntries"]);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wr=function(){"use strict";function t(n,r,i,o){e(a)(this,t),this.batchId=n,this.localWriteTime=r,this.baseMutations=i,this.mutations=o}return e(u)(t,[{key:"applyToRemoteDocument",value:function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&rn(i,t,n[r])}}},{key:"applyToLocalView",value:function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,a=this.baseMutations[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.key.isEqual(t.key)&&(e=on(s,t,e,this.localWriteTime))}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}var u=!0,c=!1,l=void 0;try{for(var f,h=this.mutations[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var d=f.value;d.key.isEqual(t.key)&&(e=on(d,t,e,this.localWriteTime))}}catch(t){c=!0,l=t}finally{try{u||null==h.return||h.return()}finally{if(c)throw l}}return e}},{key:"applyToLocalDocumentSet",value:function(t,e){var n=this,r=In();return this.mutations.forEach((function(i){var o=t.get(i.key),a=o.overlayedDocument,s=n.applyToLocalView(a,o.mutatedFields),u=nn(a,s=e.has(i.key)?null:s);null!==u&&r.set(i.key,u),a.isValidDocument()||a.convertToNoDocument(X.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Nn())}},{key:"isEqual",value:function(t){return this.batchId===t.batchId&&G(this.mutations,t.mutations,(function(t,e){return sn(t,e)}))&&G(this.baseMutations,t.baseMutations,(function(t,e){return sn(t,e)}))}}]),t}(),br=function(){"use strict";function t(n,r,i,o){e(a)(this,t),this.batch=n,this.commitVersion=r,this.mutationResults=i,this.docVersions=o}return e(u)(t,null,[{key:"from",value:function(e,n,r){D(e.mutations.length===r.length);for(var i=An,o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)}}]),t}(),kr=function(){"use strict";function t(n,r){e(a)(this,t),this.largestBatchId=n,this.mutation=r}return e(u)(t,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(t){return null!==t&&this.mutation===t.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),t}(),xr=function(){"use strict";function t(n,r,i,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X.min(),u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:X.min(),c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Et.EMPTY_BYTE_STRING;e(a)(this,t),this.target=n,this.targetId=r,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=c}return e(u)(t,[{key:"withSequenceNumber",value:function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}},{key:"withLastLimboFreeSnapshotVersion",value:function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}]),t}(),Er=function t(n){"use strict";e(a)(this,t),this.ne=n};function _r(t){var e=ur({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ce(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tr=function(){"use strict";function t(){e(a)(this,t)}return e(u)(t,[{key:"re",value:function(t,e){this.oe(t,e),e.ue()}},{key:"oe",value:function(t,e){if("nullValue"in t)this.ce(e,5);else if("booleanValue"in t)this.ce(e,10),e.ae(t.booleanValue?1:0);else if("integerValue"in t)this.ce(e,15),e.ae(St(t.integerValue));else if("doubleValue"in t){var n=St(t.doubleValue);isNaN(n)?this.ce(e,13):(this.ce(e,15),Mt(n)?e.ae(0):e.ae(n))}else if("timestampValue"in t){var r=t.timestampValue;this.ce(e,20),"string"==typeof r?e.he(r):(e.he("".concat(r.seconds||"")),e.ae(r.nanos||0))}else if("stringValue"in t)this.le(t.stringValue,e),this.fe(e);else if("bytesValue"in t)this.ce(e,30),e.de(It(t.bytesValue)),this.fe(e);else if("referenceValue"in t)this._e(t.referenceValue,e);else if("geoPointValue"in t){var i=t.geoPointValue;this.ce(e,45),e.ae(i.latitude||0),e.ae(i.longitude||0)}else"mapValue"in t?Yt(t)?this.ce(e,Number.MAX_SAFE_INTEGER):(this.we(t.mapValue,e),this.fe(e)):"arrayValue"in t?(this.me(t.arrayValue,e),this.fe(e)):N()}},{key:"le",value:function(t,e){this.ce(e,25),this.ge(t,e)}},{key:"ge",value:function(t,e){e.he(t)}},{key:"we",value:function(t,e){var n=t.fields||{};this.ce(e,55);var r=!0,i=!1,o=void 0;try{for(var a,s=Object.keys(n)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this.le(u,e),this.oe(n[u],e)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"me",value:function(t,e){var n=t.values||[];this.ce(e,50);var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;this.oe(u,e)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"_e",value:function(t,e){var n=this;this.ce(e,37),tt.fromName(t).path.forEach((function(t){n.ce(e,60),n.ge(t,e)}))}},{key:"ce",value:function(t,e){t.ae(e)}},{key:"fe",value:function(t){t.ae(2)}}]),t}();Tr.ye=new Tr;
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Sr=function(){"use strict";function t(){e(a)(this,t),this.ze=new Ir}return e(u)(t,[{key:"addToCollectionParentIndex",value:function(t,e){return this.ze.add(e),lt.resolve()}},{key:"getCollectionParents",value:function(t,e){return lt.resolve(this.ze.getEntries(e))}},{key:"addFieldIndex",value:function(t,e){return lt.resolve()}},{key:"deleteFieldIndex",value:function(t,e){return lt.resolve()}},{key:"getDocumentsMatchingTarget",value:function(t,e){return lt.resolve(null)}},{key:"getIndexType",value:function(t,e){return lt.resolve(0)}},{key:"getFieldIndexes",value:function(t,e){return lt.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(t){return lt.resolve(null)}},{key:"getMinOffset",value:function(t,e){return lt.resolve(it.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(t,e){return lt.resolve(it.min())}},{key:"updateCollectionGroup",value:function(t,e,n){return lt.resolve()}},{key:"updateIndexEntries",value:function(t,e){return lt.resolve()}}]),t}(),Ir=function(){"use strict";function t(){e(a)(this,t),this.index={}}return e(u)(t,[{key:"add",value:function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new wt(J.comparator),i=!r.has(n);return this.index[e]=r.add(n),i}},{key:"has",value:function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}},{key:"getEntries",value:function(t){return(this.index[t]||new wt(J.comparator)).toArray()}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Uint8Array(0);
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Cr=function(){"use strict";function t(n,r,i){e(a)(this,t),this.cacheSizeCollectionThreshold=n,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}return e(u)(t,null,[{key:"withCacheSize",value:function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cr.DEFAULT_COLLECTION_PERCENTILE=10,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cr.DEFAULT=new Cr(41943040,Cr.DEFAULT_COLLECTION_PERCENTILE,Cr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cr.DISABLED=new Cr(-1,0,0);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ar=function(){"use strict";function t(n){e(a)(this,t),this.En=n}return e(u)(t,[{key:"next",value:function(){return this.En+=2,this.En}}],[{key:"An",value:function(){return new t(0)}},{key:"Rn",value:function(){return new t(-1)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Lr=function(){"use strict";function t(){e(a)(this,t),this.changes=new bn((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return e(u)(t,[{key:"addEntry",value:function(t){this.assertNotApplied(),this.changes.set(t.key,t)}},{key:"removeEntry",value:function(t,e){this.assertNotApplied(),this.changes.set(t,Zt.newInvalidDocument(t).setReadTime(e))}},{key:"getEntry",value:function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?lt.resolve(n):this.getFromCache(t,e)}},{key:"getEntries",value:function(t,e){return this.getAllFromCache(t,e)}},{key:"apply",value:function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}},{key:"assertNotApplied",value:function(){}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nr=function t(n,r){"use strict";e(a)(this,t),this.overlayedDocument=n,this.mutatedFields=r},Dr=function(){"use strict";function t(n,r,i,o){e(a)(this,t),this.remoteDocumentCache=n,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=o}return e(u)(t,[{key:"getDocument",value:function(t,e){var n=this,r=null;return this.documentOverlayCache.getOverlay(t,e).next((function(i){return r=i,n.getBaseDocument(t,e,r)})).next((function(t){return null!==r&&on(r.mutation,t,kt.empty(),Q.now()),t}))}},{key:"getDocuments",value:function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e,Nn()).next((function(){return e}))}))}},{key:"getLocalViewOfDocuments",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Nn(),r=this,i=Sn();return this.populateOverlays(t,i,e).next((function(){return r.computeViews(t,e,i,n).next((function(t){var e=_n();return t.forEach((function(t,n){e=e.insert(t,n.overlayedDocument)})),e}))}))}},{key:"getOverlayedDocuments",value:function(t,e){var n=this,r=Sn();return this.populateOverlays(t,r,e).next((function(){return n.computeViews(t,e,r,Nn())}))}},{key:"populateOverlays",value:function(t,e,n){var r=[];return n.forEach((function(t){e.has(t)||r.push(t)})),this.documentOverlayCache.getOverlays(t,r).next((function(t){t.forEach((function(t,n){e.set(t,n)}))}))}},{key:"computeViews",value:function(t,e,n,r){var i=xn(),o=Cn(),a=Cn();return e.forEach((function(t,e){var a=n.get(e.key);r.has(e.key)&&(void 0===a||a.mutation instanceof cn)?i=i.insert(e.key,e):void 0!==a&&(o.set(e.key,a.mutation.getFieldMask()),on(a.mutation,e,a.mutation.getFieldMask(),Q.now()))})),this.recalculateAndSaveOverlays(t,i).next((function(t){return t.forEach((function(t,e){return o.set(t,e)})),e.forEach((function(t,e){var n;return a.set(t,new Nr(e,null!==(n=o.get(t))&&void 0!==n?n:null))})),a}))}},{key:"recalculateAndSaveOverlays",value:function(t,e){var n=this,r=Cn(),i=new yt((function(t,e){return t-e})),o=Nn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){var n=!0,o=!1,a=void 0;try{for(var s,u=function(t,n){var o=n.value;o.keys().forEach((function(t){var n=e.get(t);if(null!==n){var a=r.get(t)||kt.empty();a=o.applyToLocalView(n,a),r.set(t,a);var s=(i.get(o.batchId)||Nn()).add(t);i=i.insert(o.batchId,s)}}))},c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)u(0,s)}catch(t){o=!0,a=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}})).next((function(){for(var a=[],s=i.getReverseIterator();s.hasNext();){var u=s.getNext(),c=u.key,l=u.value,f=In();l.forEach((function(t){if(!o.has(t)){var n=nn(e.get(t),r.get(t));null!==n&&f.set(t,n),o=o.add(t)}})),a.push(n.documentOverlayCache.saveOverlays(t,c,f))}return lt.waitFor(a)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.recalculateAndSaveOverlays(t,e)}))}},{key:"getDocumentsMatchingQuery",value:function(t,e,n){return r=e,tt.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(t,e.path):Te(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n);var r}},{key:"getNextDocuments",value:function(t,e,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next((function(o){var a=i,s=r-o.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-o.size):lt.resolve(Sn()),u=-1,c=o;return s.next((function(e){return lt.forEach(e,(function(e,n){return u<n.largestBatchId&&(u=n.largestBatchId),o.get(e)?lt.resolve():a.getBaseDocument(t,e,n).next((function(t){c=c.insert(e,t)}))})).next((function(){return a.populateOverlays(t,e,o)})).next((function(){return a.computeViews(t,c,e,Nn())})).next((function(t){return{batchId:u,changes:Tn(t)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(t,e){return this.getDocument(t,new tt(e)).next((function(t){var e=_n();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(t,e,n){var r=this,i=e.collectionGroup,o=_n();return this.indexManager.getCollectionParents(t,i).next((function(a){return lt.forEach(a,(function(a){var s,u,c=(s=e,u=a.child(i),new we(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.getDocumentsMatchingCollectionQuery(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(t,e,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(t,e.path,n).next((function(o){return r=o,i.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId)})).next((function(t){t.forEach((function(t,e){var n=e.getKey();null===r.get(n)&&(r=r.insert(n,Zt.newInvalidDocument(n)))}));var n=_n();return r.forEach((function(r,i){var o=t.get(r);void 0!==o&&on(o.mutation,i,kt.empty(),Q.now()),De(e,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(t,e,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(t,e):lt.resolve(Zt.newInvalidDocument(e))}}]),t}(),Or=function(){"use strict";function t(n){e(a)(this,t),this.wt=n,this.Jn=new Map,this.Yn=new Map}return e(u)(t,[{key:"getBundleMetadata",value:function(t,e){return lt.resolve(this.Jn.get(e))}},{key:"saveBundleMetadata",value:function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:Xn(n.createTime)}),lt.resolve()}},{key:"getNamedQuery",value:function(t,e){return lt.resolve(this.Yn.get(e))}},{key:"saveNamedQuery",value:function(t,e){return this.Yn.set(e.name,{name:(n=e).name,query:_r(n.bundledQuery),readTime:Xn(n.readTime)}),lt.resolve();var n}}]),t}(),Mr=function(){"use strict";function t(){e(a)(this,t),this.overlays=new yt(tt.comparator),this.Xn=new Map}return e(u)(t,[{key:"getOverlay",value:function(t,e){return lt.resolve(this.overlays.get(e))}},{key:"getOverlays",value:function(t,e){var n=this,r=Sn();return lt.forEach(e,(function(e){return n.getOverlay(t,e).next((function(t){null!==t&&r.set(e,t)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(t,e,n){var r=this;return n.forEach((function(n,i){r.ie(t,e,i)})),lt.resolve()}},{key:"removeOverlaysForBatchId",value:function(t,e,n){var r=this,i=this.Xn.get(n);return void 0!==i&&(i.forEach((function(t){return r.overlays=r.overlays.remove(t)})),this.Xn.delete(n)),lt.resolve()}},{key:"getOverlaysForCollection",value:function(t,e,n){for(var r=Sn(),i=e.length+1,o=new tt(e.child("")),a=this.overlays.getIteratorFrom(o);a.hasNext();){var s=a.getNext().value,u=s.getKey();if(!e.isPrefixOf(u.path))break;u.path.length===i&&s.largestBatchId>n&&r.set(s.getKey(),s)}return lt.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(t,e,n,r){for(var i=new yt((function(t,e){return t-e})),o=this.overlays.getIterator();o.hasNext();){var a=o.getNext().value;if(a.getKey().getCollectionGroup()===e&&a.largestBatchId>n){var s=i.get(a.largestBatchId);null===s&&(s=Sn(),i=i.insert(a.largestBatchId,s)),s.set(a.getKey(),a)}}for(var u=Sn(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(t,e){return u.set(t,e)})),!(u.size()>=r)););return lt.resolve(u)}},{key:"ie",value:function(t,e,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Xn.get(r.largestBatchId).delete(n.key);this.Xn.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new kr(e,n));var o=this.Xn.get(e);void 0===o&&(o=Nn(),this.Xn.set(e,o)),this.Xn.set(e,o.add(n.key))}}]),t}(),Rr=function(){"use strict";function t(){e(a)(this,t),this.Zn=new wt(Pr.ts),this.es=new wt(Pr.ns)}return e(u)(t,[{key:"isEmpty",value:function(){return this.Zn.isEmpty()}},{key:"addReference",value:function(t,e){var n=new Pr(t,e);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}},{key:"ss",value:function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))}},{key:"removeReference",value:function(t,e){this.rs(new Pr(t,e))}},{key:"os",value:function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))}},{key:"us",value:function(t){var e=this,n=new tt(new J([])),r=new Pr(n,t),i=new Pr(n,t+1),o=[];return this.es.forEachInRange([r,i],(function(t){e.rs(t),o.push(t.key)})),o}},{key:"cs",value:function(){var t=this;this.Zn.forEach((function(e){return t.rs(e)}))}},{key:"rs",value:function(t){this.Zn=this.Zn.delete(t),this.es=this.es.delete(t)}},{key:"hs",value:function(t){var e=new tt(new J([])),n=new Pr(e,t),r=new Pr(e,t+1),i=Nn();return this.es.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i}},{key:"containsKey",value:function(t){var e=new Pr(t,0),n=this.Zn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}]),t}(),Pr=function(){"use strict";function t(n,r){e(a)(this,t),this.key=n,this.ls=r}return e(u)(t,null,[{key:"ts",value:function(t,e){return tt.comparator(t.key,e.key)||K(t.ls,e.ls)}},{key:"ns",value:function(t,e){return K(t.ls,e.ls)||tt.comparator(t.key,e.key)}}]),t}(),Br=function(){"use strict";function t(n,r){e(a)(this,t),this.indexManager=n,this.referenceDelegate=r,this.mutationQueue=[],this.fs=1,this.ds=new wt(Pr.ts)}return e(u)(t,[{key:"checkEmpty",value:function(t){return lt.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(t,e,n,r){var i=this.fs;this.fs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var o=new wr(i,e,n,r);this.mutationQueue.push(o);var a=!0,s=!1,u=void 0;try{for(var c,l=r[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value;this.ds=this.ds.add(new Pr(f.key,i)),this.indexManager.addToCollectionParentIndex(t,f.key.path.popLast())}}catch(t){s=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return lt.resolve(o)}},{key:"lookupMutationBatch",value:function(t,e){return lt.resolve(this._s(e))}},{key:"getNextMutationBatchAfterBatchId",value:function(t,e){var n=e+1,r=this.ws(n),i=r<0?0:r;return lt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return lt.resolve(0===this.mutationQueue.length?-1:this.fs-1)}},{key:"getAllMutationBatches",value:function(t){return lt.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(t,e){var n=this,r=new Pr(e,0),i=new Pr(e,Number.POSITIVE_INFINITY),o=[];return this.ds.forEachInRange([r,i],(function(t){var e=n._s(t.ls);o.push(e)})),lt.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(t,e){var n=this,r=new wt(K);return e.forEach((function(t){var e=new Pr(t,0),i=new Pr(t,Number.POSITIVE_INFINITY);n.ds.forEachInRange([e,i],(function(t){r=r.add(t.ls)}))})),lt.resolve(this.gs(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(t,e){var n=e.path,r=n.length+1,i=n;tt.isDocumentKey(i)||(i=i.child(""));var o=new Pr(new tt(i),0),a=new wt(K);return this.ds.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ls)),!0)}),o),lt.resolve(this.gs(a))}},{key:"gs",value:function(t){var e=this,n=[];return t.forEach((function(t){var r=e._s(t);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(t,e){var n=this;D(0===this.ys(e.batchId,"removed")),this.mutationQueue.shift();var r=this.ds;return lt.forEach(e.mutations,(function(i){var o=new Pr(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.ds=r}))}},{key:"In",value:function(t){}},{key:"containsKey",value:function(t,e){var n=new Pr(e,0),r=this.ds.firstAfterOrEqual(n);return lt.resolve(e.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(t){return this.mutationQueue.length,lt.resolve()}},{key:"ys",value:function(t,e){return this.ws(t)}},{key:"ws",value:function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}},{key:"_s",value:function(t){var e=this.ws(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}]),t}(),Fr=function(){"use strict";function t(n){e(a)(this,t),this.ps=n,this.docs=new yt(tt.comparator),this.size=0}return e(u)(t,[{key:"setIndexManager",value:function(t){this.indexManager=t}},{key:"addEntry",value:function(t,e){var n=e.key,r=this.docs.get(n),i=r?r.size:0,o=this.ps(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}},{key:"removeEntry",value:function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}},{key:"getEntry",value:function(t,e){var n=this.docs.get(e);return lt.resolve(n?n.document.mutableCopy():Zt.newInvalidDocument(e))}},{key:"getEntries",value:function(t,e){var n=this,r=xn();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.mutableCopy():Zt.newInvalidDocument(t))})),lt.resolve(r)}},{key:"getAllFromCollection",value:function(t,e,n){for(var r=xn(),i=new tt(e.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value.document;if(!e.isPrefixOf(s.path))break;s.path.length>e.length+1||ot(rt(u),n)<=0||(r=r.insert(u.key,u.mutableCopy()))}return lt.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(t,e,n,r){N()}},{key:"Is",value:function(t,e){return lt.forEach(this.docs,(function(t){return e(t)}))}},{key:"newChangeBuffer",value:function(t){return new Ur(this)}},{key:"getSize",value:function(t){return lt.resolve(this.size)}}]),t}(),Ur=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t){var i;return e(a)(this,r),(i=n.call(this)).zn=t,e(h)(i)}return e(u)(r,[{key:"applyChanges",value:function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(e.zn.addEntry(t,i)):e.zn.removeEntry(r)})),lt.waitFor(n)}},{key:"getFromCache",value:function(t,e){return this.zn.getEntry(t,e)}},{key:"getAllFromCache",value:function(t,e){return this.zn.getEntries(t,e)}}]),r}(Lr),Vr=function(){"use strict";function t(n){e(a)(this,t),this.persistence=n,this.Ts=new bn((function(t){return ne(t)}),re),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Es=0,this.As=new Rr,this.targetCount=0,this.Rs=Ar.An()}return e(u)(t,[{key:"forEachTarget",value:function(t,e){return this.Ts.forEach((function(t,n){return e(n)})),lt.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(t){return lt.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(t){return lt.resolve(this.Es)}},{key:"allocateTargetId",value:function(t){return this.highestTargetId=this.Rs.next(),lt.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Es&&(this.Es=e),lt.resolve()}},{key:"vn",value:function(t){this.Ts.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Rs=new Ar(e),this.highestTargetId=e),t.sequenceNumber>this.Es&&(this.Es=t.sequenceNumber)}},{key:"addTargetData",value:function(t,e){return this.vn(e),this.targetCount+=1,lt.resolve()}},{key:"updateTargetData",value:function(t,e){return this.vn(e),lt.resolve()}},{key:"removeTargetData",value:function(t,e){return this.Ts.delete(e.target),this.As.us(e.targetId),this.targetCount-=1,lt.resolve()}},{key:"removeTargets",value:function(t,e,n){var r=this,i=0,o=[];return this.Ts.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.Ts.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),lt.waitFor(o).next((function(){return i}))}},{key:"getTargetCount",value:function(t){return lt.resolve(this.targetCount)}},{key:"getTargetData",value:function(t,e){var n=this.Ts.get(e)||null;return lt.resolve(n)}},{key:"addMatchingKeys",value:function(t,e,n){return this.As.ss(e,n),lt.resolve()}},{key:"removeMatchingKeys",value:function(t,e,n){this.As.os(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),lt.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(t,e){return this.As.us(e),lt.resolve()}},{key:"getMatchingKeysForTargetId",value:function(t,e){var n=this.As.hs(e);return lt.resolve(n)}},{key:"containsKey",value:function(t,e){return lt.resolve(this.As.containsKey(e))}}]),t}(),jr=function(){"use strict";function t(n,r){var i=this;e(a)(this,t),this.bs={},this.overlays={},this.Ps=new ht(0),this.vs=!1,this.vs=!0,this.referenceDelegate=n(this),this.Vs=new Vr(this),this.indexManager=new Sr,this.remoteDocumentCache=new Fr((function(t){return i.referenceDelegate.Ss(t)})),this.wt=new Er(r),this.Ds=new Or(this.wt)}return e(u)(t,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.vs=!1,Promise.resolve()}},{key:"started",get:function(){return this.vs}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(t){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(t){var e=this.overlays[t.toKey()];return e||(e=new Mr,this.overlays[t.toKey()]=e),e}},{key:"getMutationQueue",value:function(t,e){var n=this.bs[t.toKey()];return n||(n=new Br(e,this.referenceDelegate),this.bs[t.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Vs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ds}},{key:"runTransaction",value:function(t,e,n){var r=this;I("MemoryPersistence","Starting transaction:",t);var i=new qr(this.Ps.next());return this.referenceDelegate.Cs(),n(i).next((function(t){return r.referenceDelegate.xs(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))}},{key:"Ns",value:function(t,e){return lt.or(Object.values(this.bs).map((function(n){return function(){return n.containsKey(t,e)}})))}}]),t}(),qr=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t){var i;return e(a)(this,r),(i=n.call(this)).currentSequenceNumber=t,e(h)(i)}return r}(st),zr=function(){"use strict";function t(n){e(a)(this,t),this.persistence=n,this.ks=new Rr,this.Ms=null}return e(u)(t,[{key:"Fs",get:function(){if(this.Ms)return this.Ms;throw N()}},{key:"addReference",value:function(t,e,n){return this.ks.addReference(n,e),this.Fs.delete(n.toString()),lt.resolve()}},{key:"removeReference",value:function(t,e,n){return this.ks.removeReference(n,e),this.Fs.add(n.toString()),lt.resolve()}},{key:"markPotentiallyOrphaned",value:function(t,e){return this.Fs.add(e.toString()),lt.resolve()}},{key:"removeTarget",value:function(t,e){var n=this;this.ks.us(e.targetId).forEach((function(t){return n.Fs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){var e=n;t.forEach((function(t){return e.Fs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))}},{key:"Cs",value:function(){this.Ms=new Set}},{key:"xs",value:function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return lt.forEach(this.Fs,(function(r){var i=tt.fromPath(r);return e.$s(t,i).next((function(t){t||n.removeEntry(i,X.min())}))})).next((function(){return e.Ms=null,n.apply(t)}))}},{key:"updateLimboDocument",value:function(t,e){var n=this;return this.$s(t,e).next((function(t){t?n.Fs.delete(e.toString()):n.Fs.add(e.toString())}))}},{key:"Ss",value:function(t){return 0}},{key:"$s",value:function(t,e){var n=this;return lt.or([function(){return lt.resolve(n.ks.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Ns(t,e)}])}}],[{key:"Os",value:function(e){return new t(e)}}]),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Hr=function(){"use strict";function t(n,r,i,o){e(a)(this,t),this.targetId=n,this.fromCache=r,this.Pi=i,this.vi=o}return e(u)(t,null,[{key:"Vi",value:function(e,n){var r=Nn(),i=Nn(),o=!0,a=!1,s=void 0;try{for(var u,c=n.docChanges[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:i=i.add(l.doc.key)}}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}return new t(e,n.fromCache,r,i)}}]),t}(),Wr=function(){"use strict";function t(){e(a)(this,t),this.Si=!1}return e(u)(t,[{key:"initialize",value:function(t,e){this.Di=t,this.indexManager=e,this.Si=!0}},{key:"getDocumentsMatchingQuery",value:function(t,e,n,r){var i=this;return this.Ci(t,e).next((function(o){return o||i.xi(t,e,r,n)})).next((function(n){return n||i.Ni(t,e)}))}},{key:"Ci",value:function(t,n){var r=this;if(xe(n))return lt.resolve(null);var i=Ie(n);return this.indexManager.getIndexType(t,i).next((function(o){return 0===o?null:(null!==n.limit&&1===o&&(n=Ce(n,null,"F"),i=Ie(n)),r.indexManager.getDocumentsMatchingTarget(t,i).next((function(o){var a=r,s=Nn.apply(void 0,e(p)(o));return r.Di.getDocuments(t,s).next((function(e){return a.indexManager.getMinOffset(t,i).next((function(r){var i=a.ki(n,e);return a.Mi(n,i,s,r.readTime)?a.Ci(t,Ce(n,null,"F")):a.Oi(t,i,n,r)}))}))})))}))}},{key:"xi",value:function(t,e,n,r){var i=this;return xe(e)||r.isEqual(X.min())?this.Ni(t,e):this.Di.getDocuments(t,n).next((function(o){var a=i.ki(e,o);return i.Mi(e,a,n,r)?i.Ni(t,e):(S()<=w.LogLevel.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ne(e)),i.Oi(t,a,e,nt(r,-1)))}))}},{key:"ki",value:function(t,e){var n=new wt(Me(t));return e.forEach((function(e,r){De(t,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(t,e,n,r){if(null===t.limit)return!1;if(n.size!==e.size)return!0;var i="F"===t.limitType?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Ni",value:function(t,e){return S()<=w.LogLevel.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",Ne(e)),this.Di.getDocumentsMatchingQuery(t,e,it.min())}},{key:"Oi",value:function(t,e,n,r){return this.Di.getDocumentsMatchingQuery(t,n,r).next((function(t){return e.forEach((function(e){t=t.insert(e.key,e)})),t}))}}]),t}(),Kr=function(){"use strict";function t(n,r,i,o){e(a)(this,t),this.persistence=n,this.Fi=r,this.wt=o,this.$i=new yt(K),this.Bi=new bn((function(t){return ne(t)}),re),this.Li=new Map,this.Ui=n.getRemoteDocumentCache(),this.Vs=n.getTargetCache(),this.Ds=n.getBundleCache(),this.qi(i)}return e(u)(t,[{key:"qi",value:function(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Dr(this.Ui,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ui.setIndexManager(this.indexManager),this.Fi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.$i)}))}}]),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e,n,r){return new Kr(t,e,n,r)}function Qr(t,e){return Xr.apply(this,arguments)}function Xr(){return(Xr=e(i)(e(y).mark((function t(n,r){var i;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=O(n),t.next=3,i.persistence.runTransaction("Handle user change","readonly",(function(t){var e;return i.mutationQueue.getAllMutationBatches(t).next((function(n){return e=n,i.qi(r),i.mutationQueue.getAllMutationBatches(t)})).next((function(n){var r=[],o=[],a=Nn(),s=!0,u=!1,c=void 0;try{for(var l,f=e[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value;r.push(h.batchId);var d=!0,p=!1,v=void 0;try{for(var y,g=h.mutations[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var m=y.value;a=a.add(m.key)}}catch(t){p=!0,v=t}finally{try{d||null==g.return||g.return()}finally{if(p)throw v}}}}catch(t){u=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}var w=!0,b=!1,k=void 0;try{for(var x,E=n[Symbol.iterator]();!(w=(x=E.next()).done);w=!0){var _=x.value;o.push(_.batchId);var T=!0,S=!1,I=void 0;try{for(var C,A=_.mutations[Symbol.iterator]();!(T=(C=A.next()).done);T=!0){var L=C.value;a=a.add(L.key)}}catch(t){S=!0,I=t}finally{try{T||null==A.return||A.return()}finally{if(S)throw I}}}}catch(t){b=!0,k=t}finally{try{w||null==E.return||E.return()}finally{if(b)throw k}}return i.localDocuments.getDocuments(t,a).next((function(t){return{Ki:t,removedBatchIds:r,addedBatchIds:o}}))}))}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Yr(t,e){var n=O(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,a,s,u,c,l=e.batch.keys(),f=n.Ui.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,a=f,s=o.batch,u=s.keys(),c=lt.resolve(),u.forEach((function(t){c=c.next((function(){return a.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);D(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,o),e.isValidDocument()&&(e.setReadTime(o.commitVersion),a.addEntry(e)))}))})),c.next((function(){return r.mutationQueue.removeMutationBatch(i,s)}))).next((function(){return f.apply(t)})).next((function(){return n.mutationQueue.performConsistencyCheck(t)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(t,l,e.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){for(var e=Nn(),n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e))})).next((function(){return n.localDocuments.getDocuments(t,l)}))}))}function Jr(t){var e=O(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Vs.getLastRemoteSnapshotVersion(t)}))}function $r(t,e){var n=O(t),r=e.snapshotVersion,i=n.$i;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ui.newChangeBuffer({trackRemovals:!0});i=n.$i;var a=[];e.targetChanges.forEach((function(o,s){var u=i.get(s);if(u){a.push(n.Vs.removeMatchingKeys(t,o.removedDocuments,s).next((function(){return n.Vs.addMatchingKeys(t,o.addedDocuments,s)})));var c,l,f,h=u.withSequenceNumber(t.currentSequenceNumber);e.targetMismatches.has(s)?h=h.withResumeToken(Et.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):o.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(o.resumeToken,r)),i=i.insert(s,h),l=h,f=o,(0===(c=u).resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-c.snapshotVersion.toMicroseconds()>=3e8||f.addedDocuments.size+f.modifiedDocuments.size+f.removedDocuments.size>0)&&a.push(n.Vs.updateTargetData(t,h))}}));var s=xn(),u=Nn();if(e.documentUpdates.forEach((function(r){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Zr(t,o,e.documentUpdates).next((function(t){s=t.Gi,u=t.Qi}))),!r.isEqual(X.min())){var c=n.Vs.getLastRemoteSnapshotVersion(t).next((function(e){return n.Vs.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(c)}return lt.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(t,s,u)})).next((function(){return s}))})).then((function(t){return n.$i=i,t}))}function Zr(t,e,n){var r=Nn(),i=Nn();return n.forEach((function(t){return r=r.add(t)})),e.getEntries(t,r).next((function(t){var r=xn();return n.forEach((function(n,o){var a=t.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(X.min())?(e.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(o),r=r.insert(n,o)):I("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{Gi:r,Qi:i}}))}function ti(t,e){var n=O(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)}))}function ei(t,e){var n=O(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Vs.getTargetData(t,e).next((function(i){return i?(r=i,lt.resolve(r)):n.Vs.allocateTargetId(t).next((function(i){return r=new xr(e,i,0,t.currentSequenceNumber),n.Vs.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.$i.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.$i=n.$i.insert(t.targetId,t),n.Bi.set(e,t.targetId)),t}))}function ni(t,e,n){return ri.apply(this,arguments)}function ri(){return(ri=e(i)(e(y).mark((function t(n,r,i){var o,a,s;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=O(n),a=o.$i.get(r),s=i?"readwrite":"readwrite-primary",t.prev=1,t.t0=i,t.t0){t.next=6;break}return t.next=6,o.persistence.runTransaction("Release target",s,(function(t){return o.persistence.referenceDelegate.removeTarget(t,a)}));case 6:t.next=13;break;case 8:if(t.prev=8,t.t1=t.catch(1),ft(t.t1)){t.next=12;break}throw t.t1;case 12:I("LocalStore","Failed to update sequence numbers for target ".concat(r,": ").concat(t.t1));case 13:o.$i=o.$i.remove(r),o.Bi.delete(a.target);case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function ii(t,e,n){var r=O(t),i=X.min(),o=Nn();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(a=r,s=t,u=Ie(e),c=O(a),l=c.Bi.get(u),void 0!==l?lt.resolve(c.$i.get(l)):c.Vs.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Vs.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Fi.getDocumentsMatchingQuery(t,e,n?i:X.min(),n?o:Nn())})).next((function(t){return oi(r,Oe(e),t),{documents:t,ji:o}}));var a,s,u,c,l}))}function oi(t,e,n){var r=X.min();n.forEach((function(t,e){e.readTime.compareTo(r)>0&&(r=e.readTime)})),t.Li.set(e,r)}var ai=function(){"use strict";function t(){e(a)(this,t),this.activeTargetIds=On()}return e(u)(t,[{key:"Xi",value:function(t){this.activeTargetIds=this.activeTargetIds.add(t)}},{key:"Zi",value:function(t){this.activeTargetIds=this.activeTargetIds.delete(t)}},{key:"Yi",value:function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}]),t}(),si=function(){"use strict";function t(){e(a)(this,t),this.Fr=new ai,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e(u)(t,[{key:"addPendingMutation",value:function(t){}},{key:"updateMutationState",value:function(t,e,n){}},{key:"addLocalQueryTarget",value:function(t){return this.Fr.Xi(t),this.$r[t]||"not-current"}},{key:"updateQueryState",value:function(t,e,n){this.$r[t]=e}},{key:"removeLocalQueryTarget",value:function(t){this.Fr.Zi(t)}},{key:"isLocalQueryTarget",value:function(t){return this.Fr.activeTargetIds.has(t)}},{key:"clearQueryState",value:function(t){delete this.$r[t]}},{key:"getAllActiveQueryTargets",value:function(){return this.Fr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(t){return this.Fr.activeTargetIds.has(t)}},{key:"start",value:function(){return this.Fr=new ai,Promise.resolve()}},{key:"handleUserChange",value:function(t,e,n){}},{key:"setOnlineState",value:function(t){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(t){}},{key:"notifyBundleLoaded",value:function(t){}}]),t}(),ui=function(){"use strict";function t(){e(a)(this,t)}return e(u)(t,[{key:"Br",value:function(t){}},{key:"shutdown",value:function(){}}]),t}(),ci=function(){"use strict";function t(){var n=this;e(a)(this,t),this.Lr=function(){return n.Ur()},this.qr=function(){return n.Kr()},this.Gr=[],this.Qr()}return e(u)(t,[{key:"Br",value:function(t){this.Gr.push(t)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}},{key:"Qr",value:function(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}},{key:"Ur",value:function(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var t=!0,e=!1,n=void 0;try{for(var r,i=this.Gr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){(0,r.value)(0)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}},{key:"Kr",value:function(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var t=!0,e=!1,n=void 0;try{for(var r,i=this.Gr[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){(0,r.value)(1)}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}}}],[{key:"V",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),t}(),li={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fi=function(){"use strict";function t(n){e(a)(this,t),this.jr=n.jr,this.Wr=n.Wr}return e(u)(t,[{key:"zr",value:function(t){this.Hr=t}},{key:"Jr",value:function(t){this.Yr=t}},{key:"onMessage",value:function(t){this.Xr=t}},{key:"close",value:function(){this.Wr()}},{key:"send",value:function(t){this.jr(t)}},{key:"Zr",value:function(){this.Hr()}},{key:"eo",value:function(t){this.Yr(t)}},{key:"no",value:function(t){this.Xr(t)}}]),t}(),hi=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t){var i;return e(a)(this,r),(i=n.call(this,t)).forceLongPolling=t.forceLongPolling,i.autoDetectLongPolling=t.autoDetectLongPolling,i.useFetchStreams=t.useFetchStreams,e(h)(i)}return e(u)(r,[{key:"co",value:function(t,e,n,r){return new Promise((function(i,o){var a=new(0,k.XhrIo);a.listenOnce(k.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case k.ErrorCode.NO_ERROR:var e=a.getResponseJson();I("Connection","XHR received:",JSON.stringify(e)),i(e);break;case k.ErrorCode.TIMEOUT:I("Connection",'RPC "'+t+'" timed out'),o(new R(M.DEADLINE_EXCEEDED,"Request time out"));break;case k.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(I("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(M).indexOf(c)>=0?c:M.UNKNOWN);o(new R(s,r.message))}else o(new R(M.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new R(M.UNAVAILABLE,"Connection failed."));break;default:N()}}finally{I("Connection",'RPC "'+t+'" completed.')}var u,c}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))}},{key:"ho",value:function(t,e,n){var r=[this.so,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=(0,k.createWebChannelTransport)(),o=(0,k.getStatEventTarget)(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new(0,k.FetchXmlHttpFactory)({})),this.uo(a.initMessageHeaders,e,n),(0,b.isMobileCordova)()||(0,b.isReactNative)()||(0,b.isElectron)()||(0,b.isIE)()||(0,b.isUWP)()||(0,b.isBrowserExtension)()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");I("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,f=new fi({jr:function(t){l?I("Connection","Not sending because WebChannel is closed:",t):(c||(I("Connection","Opening WebChannel transport."),u.open(),c=!0),I("Connection","WebChannel sending:",t),u.send(t))},Wr:function(){return u.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(u,k.WebChannel.EventType.OPEN,(function(){l||I("Connection","WebChannel transport opened.")})),h(u,k.WebChannel.EventType.CLOSE,(function(){l||(l=!0,I("Connection","WebChannel transport closed"),f.eo())})),h(u,k.WebChannel.EventType.ERROR,(function(t){l||(l=!0,A("Connection","WebChannel transport errored:",t),f.eo(new R(M.UNAVAILABLE,"The operation could not be completed")))})),h(u,k.WebChannel.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];D(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){I("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=dn[t];if(void 0!==e)return wn(e)}(o),s=i.message;void 0===a&&(a=M.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,f.eo(new R(a,s)),u.close()}else I("Connection","WebChannel received:",n),f.no(n)}})),h(o,k.Event.STAT_EVENT,(function(t){t.stat===k.Stat.PROXY?I("Connection","Detected buffering proxy"):t.stat===k.Stat.NOPROXY&&I("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Zr()}),0),f}}]),r}(function(){"use strict";function t(n){e(a)(this,t),this.databaseInfo=n,this.databaseId=n.databaseId;var r=n.ssl?"https":"http";this.so=r+"://"+n.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e(u)(t,[{key:"ro",value:function(t,e,n,r,i){var o=this.oo(t,e);I("RestConnection","Sending: ",o,n);var a={};return this.uo(a,r,i),this.co(t,o,a,n).then((function(t){return I("RestConnection","Received: ",t),t}),(function(e){throw A("RestConnection","".concat(t," failed with error: "),e,"url: ",o,"request:",n),e}))}},{key:"ao",value:function(t,e,n,r,i,o){return this.ro(t,e,n,r,i)}},{key:"uo",value:function(t,e,n){t["X-Goog-Api-Client"]="gl-js/ fire/"+_,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((function(e,n){return t[n]=e})),n&&n.headers.forEach((function(e,n){return t[n]=e}))}},{key:"oo",value:function(t,e){var n=li[t];return"".concat(this.so,"/v1/").concat(e,":").concat(n)}}]),t}());function di(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){return new Wn(t,!0)}var vi=function(){"use strict";function t(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;e(a)(this,t),this.js=n,this.timerId=r,this.lo=i,this.fo=o,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}return e(u)(t,[{key:"reset",value:function(){this.wo=0}},{key:"po",value:function(){this.wo=this._o}},{key:"Io",value:function(t){var e=this;this.cancel();var n=Math.floor(this.wo+this.To()),r=Math.max(0,Date.now()-this.yo),i=Math.max(0,n-r);i>0&&I("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.wo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.mo=this.js.enqueueAfterDelay(this.timerId,i,(function(){return e.yo=Date.now(),t()})),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}},{key:"Eo",value:function(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}},{key:"cancel",value:function(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}},{key:"To",value:function(){return(Math.random()-.5)*this.wo}}]),t}(),yi=function(){"use strict";function t(n,r,i,o,s,u,c,l){e(a)(this,t),this.js=n,this.Ao=i,this.Ro=o,this.bo=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Po=0,this.vo=null,this.Vo=null,this.stream=null,this.So=new vi(n,r)}return e(u)(t,[{key:"Do",value:function(){return 1===this.state||5===this.state||this.Co()}},{key:"Co",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.xo()}},{key:"stop",value:function(){var t=this;return e(i)(e(y).mark((function n(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.Do(),!e.t0){e.next=4;break}return e.next=4,t.close(0);case 4:case"end":return e.stop()}}),n)})))()}},{key:"No",value:function(){this.state=0,this.So.reset()}},{key:"ko",value:function(){var t=this;this.Co()&&null===this.vo&&(this.vo=this.js.enqueueAfterDelay(this.Ao,6e4,(function(){return t.Mo()})))}},{key:"Oo",value:function(t){this.Fo(),this.stream.send(t)}},{key:"Mo",value:function(){var t=this;return e(i)(e(y).mark((function n(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.Co()){e.next=2;break}return e.abrupt("return",t.close(0));case 2:case"end":return e.stop()}}),n)})))()}},{key:"Fo",value:function(){this.vo&&(this.vo.cancel(),this.vo=null)}},{key:"$o",value:function(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}},{key:"close",value:function(t,n){var r=this;return e(i)(e(y).mark((function i(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.Fo(),r.$o(),r.So.cancel(),r.Po++,4!==t?r.So.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(C(n.toString()),C("Using maximum backoff delay to prevent overloading the backend."),r.So.po()):n&&n.code===M.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Bo(),r.stream.close(),r.stream=null),r.state=t,e.next=9,r.listener.Jr(n);case 9:case"end":return e.stop()}}),i)})))()}},{key:"Bo",value:function(){}},{key:"auth",value:function(){var t=this;this.state=1;var n=this.Lo(this.Po),r=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(n){var i=e(d)(n,2),o=i[0],a=i[1];t.Po===r&&t.Uo(o,a)}),(function(e){var r=t;n((function(){var t=new R(M.UNKNOWN,"Fetching auth token failed: "+e.message);return r.qo(t)}))}))}},{key:"Uo",value:function(t,e){var n=this,r=this.Lo(this.Po);this.stream=this.Ko(t,e),this.stream.zr((function(){var t=n;r((function(){return t.state=2,t.Vo=t.js.enqueueAfterDelay(t.Ro,1e4,(function(){return t.Co()&&(t.state=3),Promise.resolve()})),t.listener.zr()}))})),this.stream.Jr((function(t){var e=n;r((function(){return e.qo(t)}))})),this.stream.onMessage((function(t){var e=n;r((function(){return e.onMessage(t)}))}))}},{key:"xo",value:function(){var t=this;this.state=5,this.So.Io(e(i)(e(y).mark((function n(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.state=0,t.start();case 1:case"end":return e.stop()}}),n)}))))}},{key:"qo",value:function(t){return I("PersistentStream","close with error: ".concat(t)),this.stream=null,this.close(4,t)}},{key:"Lo",value:function(t){var e=this;return function(n){var r=e;e.js.enqueueAndForget((function(){return r.Po===t?n():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),t}(),gi=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o,s,u,c){var l;return e(a)(this,r),(l=n.call(this,t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,o,s,c)).wt=u,e(h)(l)}return e(u)(r,[{key:"Ko",value:function(t,e){return this.bo.ho("Listen",t,e)}},{key:"onMessage",value:function(t){this.So.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:N(),o=e.targetChange.targetIds||[],a=function(t,e){return t.dt?(D(void 0===e||"string"==typeof e),Et.fromBase64String(e||"")):(D(void 0===e||e instanceof Uint8Array),Et.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,u=s&&function(t){var e=void 0===t.code?M.UNKNOWN:wn(t.code);return new R(e,t.message||"")}(s);n=new Fn(i,o,a,u||null)}else if("documentChange"in e){e.documentChange;var c=e.documentChange;c.document,c.document.name,c.document.updateTime;var l=Zn(t,c.document.name),f=Xn(c.document.updateTime),h=new Jt({mapValue:{fields:c.document.fields}}),d=Zt.newFoundDocument(l,f,h),p=c.targetIds||[],v=c.removedTargetIds||[];n=new Pn(p,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;var y=e.documentDelete;y.document;var g=Zn(t,y.document),m=y.readTime?Xn(y.readTime):X.min(),w=Zt.newNoDocument(g,m),b=y.removedTargetIds||[];n=new Pn([],b,w.key,w)}else if("documentRemove"in e){e.documentRemove;var k=e.documentRemove;k.document;var x=Zn(t,k.document),E=k.removedTargetIds||[];n=new Pn([],E,x,null)}else{if(!("filter"in e))return N();e.filter;var _=e.filter;_.targetId;var T=_.count||0,S=new gn(T),I=_.targetId;n=new Bn(I,S)}return n}(this.wt,t),n=function(t){if(!("targetChange"in t))return X.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?X.min():e.readTime?Xn(e.readTime):X.min()}(t);return this.listener.Go(e,n)}},{key:"Qo",value:function(t){var e,n,r,i,o={};o.database=nr(this.wt),o.addTarget=(e=this.wt,i=(n=t).target,(r=ie(i)?{documents:ar(e,i)}:{query:sr(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Gn(e,n.resumeToken):n.snapshotVersion.compareTo(X.min())>0&&(r.readTime=Kn(e,n.snapshotVersion.toTimestamp())),r);var a=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return N()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.wt,t);a&&(o.labels=a),this.Oo(o)}},{key:"jo",value:function(t){var e={};e.database=nr(this.wt),e.removeTarget=t,this.Oo(e)}}]),r}(yi),mi=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o,s,u,c){var l;return e(a)(this,r),(l=n.call(this,t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,o,s,c)).wt=u,l.Wo=!1,e(h)(l)}return e(u)(r,[{key:"zo",get:function(){return this.Wo}},{key:"start",value:function(){this.Wo=!1,this.lastStreamToken=void 0,e(c)(e(l)(r.prototype),"start",this).call(this)}},{key:"Bo",value:function(){this.Wo&&this.Ho([])}},{key:"Ko",value:function(t,e){return this.bo.ho("Write",t,e)}},{key:"onMessage",value:function(t){if(D(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Wo){this.So.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(D(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?Xn(e.updateTime):Xn(n)).isEqual(X.min())&&(r=Xn(n)),new $e(r,e.transformResults||[]);var e,n,r}))):[]),n=Xn(t.commitTime);return this.listener.Jo(n,e)}var r,i;return D(!t.writeResults||0===t.writeResults.length),this.Wo=!0,this.listener.Yo()}},{key:"Xo",value:function(){var t={};t.database=nr(this.wt),this.Oo(t)}},{key:"Ho",value:function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return or(e.wt,t)}))};this.Oo(n)}}]),r}(yi),wi=function(t){"use strict";e(f)(r,(function t(){e(a)(this,t)}));var n=e(v)(r);function r(t,i,o,s){var u;return e(a)(this,r),(u=n.call(this)).authCredentials=t,u.appCheckCredentials=i,u.bo=o,u.wt=s,u.Zo=!1,e(h)(u)}return e(u)(r,[{key:"tu",value:function(){if(this.Zo)throw new R(M.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ro",value:function(t,n,r){var i=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(o){var a=e(d)(o,2),s=a[0],u=a[1];return i.bo.ro(t,n,r,s,u)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===M.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),t):new R(M.UNKNOWN,t.toString())}))}},{key:"ao",value:function(t,n,r,i){var o=this;return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var s=e(d)(a,2),u=s[0],c=s[1];return o.bo.ao(t,n,r,u,c,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===M.UNAUTHENTICATED&&(o.authCredentials.invalidateToken(),o.appCheckCredentials.invalidateToken()),t):new R(M.UNKNOWN,t.toString())}))}},{key:"terminate",value:function(){this.Zo=!0}}]),r}(),bi=function(){"use strict";function t(n,r){e(a)(this,t),this.asyncQueue=n,this.onlineStateHandler=r,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}return e(u)(t,[{key:"iu",value:function(){var t=this;0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.nu=null,t.ou("Backend didn't respond within 10 seconds."),t.ru("Offline"),Promise.resolve()})))}},{key:"uu",value:function(t){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.cu(),this.ou("Connection failed 1 times. Most recent error: ".concat(t.toString())),this.ru("Offline")))}},{key:"set",value:function(t){this.cu(),this.eu=0,"Online"===t&&(this.su=!1),this.ru(t)}},{key:"ru",value:function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}},{key:"ou",value:function(t){var e="Could not reach Cloud Firestore backend. ".concat(t,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.su?(C(e),this.su=!1):I("OnlineStateTracker",e)}},{key:"cu",value:function(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}]),t}(),ki=function t(n,r,o,s,u){"use strict";var c=this;e(a)(this,t),this.localStore=n,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.au=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=u,this.du.Br((function(t){var n=c;o.enqueueAndForget(e(i)(e(y).mark((function t(){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=Di(n),!t.t0){t.next=5;break}return I("RemoteStore","Restarting streams for network reachability change."),t.next=5,function(){var t=e(i)(e(y).mark((function t(n){var r;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=O(n)).lu.add(4),t.next=4,_i(r);case 4:return r._u.set("Unknown"),r.lu.delete(4),t.next=8,xi(r);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()(n);case 5:case"end":return t.stop()}}),t)}))))})),this._u=new bi(o,s)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(t){return Ei.apply(this,arguments)}function Ei(){return(Ei=e(i)(e(y).mark((function t(n){var r,i,o,a,s,u;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!0,i=!1,o=void 0,!Di(n)){t.next=25;break}t.prev=2,a=n.fu[Symbol.iterator]();case 4:if(r=(s=a.next()).done){t.next=11;break}return u=s.value,t.next=8,u(!0);case 8:r=!0,t.next=4;break;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(2),i=!0,o=t.t0;case 17:t.prev=17,t.prev=18,r||null==a.return||a.return();case 20:if(t.prev=20,!i){t.next=23;break}throw o;case 23:return t.finish(20);case 24:return t.finish(17);case 25:case"end":return t.stop()}}),t,null,[[2,13,17,25],[18,,20,24]])})))).apply(this,arguments)}function _i(t){return Ti.apply(this,arguments)}function Ti(){return(Ti=e(i)(e(y).mark((function t(n){var r,i,o,a,s,u;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=!0,i=!1,o=void 0,t.prev=1,a=n.fu[Symbol.iterator]();case 3:if(r=(s=a.next()).done){t.next=10;break}return u=s.value,t.next=7,u(!1);case 7:r=!0,t.next=3;break;case 10:t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),i=!0,o=t.t0;case 16:t.prev=16,t.prev=17,r||null==a.return||a.return();case 19:if(t.prev=19,!i){t.next=22;break}throw o;case 22:return t.finish(19);case 23:return t.finish(16);case 24:case"end":return t.stop()}}),t,null,[[1,12,16,24],[17,,19,23]])})))).apply(this,arguments)}function Si(t,e){var n=O(t);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),Ni(n)?Li(n):so(n).Co()&&Ci(n,e))}function Ii(t,e){var n=O(t),r=so(n);n.hu.delete(e),r.Co()&&Ai(n,e),0===n.hu.size&&(r.Co()?r.ko():Di(n)&&n._u.set("Unknown"))}function Ci(t,e){t.wu.Nt(e.targetId),so(t).Qo(e)}function Ai(t,e){t.wu.Nt(e),so(t).jo(e)}function Li(t){t.wu=new Vn({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},te:function(e){return t.hu.get(e)||null}}),so(t).start(),t._u.iu()}function Ni(t){return Di(t)&&!so(t).Do()&&t.hu.size>0}function Di(t){return 0===O(t).lu.size}function Oi(t){t.wu=void 0}function Mi(t){return Ri.apply(this,arguments)}function Ri(){return(Ri=e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.hu.forEach((function(t,e){Ci(n,t)}));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Pi(t,e){return Bi.apply(this,arguments)}function Bi(){return(Bi=e(i)(e(y).mark((function t(n,r){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Oi(n),Ni(n)?(n._u.uu(r),Li(n)):n._u.set("Unknown");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Fi(t,e,n){return Ui.apply(this,arguments)}function Ui(){return Ui=e(i)(e(y).mark((function t(n,r,o){var a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n._u.set("Online"),!(r instanceof Fn&&2===r.state&&r.cause)){t.next=13;break}return t.prev=1,t.next=4,function(){var t=e(i)(e(y).mark((function t(n,r){var i,o,a,s,u,c,l;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=r.cause,o=!0,a=!1,s=void 0,t.prev=2,u=r.targetIds[Symbol.iterator]();case 4:if(o=(c=u.next()).done){t.next=15;break}if(l=c.value,t.t0=n.hu.has(l),!t.t0){t.next=12;break}return t.next=10,n.remoteSyncer.rejectListen(l,i);case 10:n.hu.delete(l),n.wu.removeTarget(l);case 12:o=!0,t.next=4;break;case 15:t.next=21;break;case 17:t.prev=17,t.t1=t.catch(2),a=!0,s=t.t1;case 21:t.prev=21,t.prev=22,o||null==u.return||u.return();case 24:if(t.prev=24,!a){t.next=27;break}throw s;case 27:return t.finish(24);case 28:return t.finish(21);case 29:case"end":return t.stop()}}),t,null,[[2,17,21,29],[22,,24,28]])})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:t.next=11;break;case 6:return t.prev=6,t.t0=t.catch(1),I("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),t.t0),t.next=11,Vi(n,t.t0);case 11:case 22:t.next=29;break;case 13:if(r instanceof Pn?n.wu.Ut(r):r instanceof Bn?n.wu.zt(r):n.wu.Gt(r),o.isEqual(X.min())){t.next=29;break}return t.prev=14,t.next=17,Jr(n.localStore);case 17:if(a=t.sent,t.t1=o.compareTo(a)>=0,!t.t1){t.next=22;break}return t.next=22,function(t,e){var n=t.wu.Yt(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.hu.get(r);i&&t.hu.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.hu.get(e);if(n){t.hu.set(e,n.withResumeToken(Et.EMPTY_BYTE_STRING,n.snapshotVersion)),Ai(t,e);var r=new xr(n.target,e,1,n.sequenceNumber);Ci(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(n,o);case 24:return t.prev=24,t.t2=t.catch(14),I("RemoteStore","Failed to raise snapshot:",t.t2),t.next=29,Vi(n,t.t2);case 29:case"end":return t.stop()}}),t,null,[[1,6],[14,24]])}))),Ui.apply(this,arguments)}function Vi(t,e,n){return ji.apply(this,arguments)}function ji(){return(ji=e(i)(e(y).mark((function t(n,r,o){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(ft(r)){t.next=2;break}throw r;case 2:return n.lu.add(1),t.next=5,_i(n);case 5:n._u.set("Offline"),o||(o=function(){return Jr(n.localStore)}),n.asyncQueue.enqueueRetryable(e(i)(e(y).mark((function t(){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I("RemoteStore","Retrying IndexedDB access"),t.next=3,o();case 3:return n.lu.delete(1),t.next=6,xi(n);case 6:case"end":return t.stop()}}),t)}))));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function qi(t,e){return e().catch((function(n){return Vi(t,n,e)}))}function zi(t){return Hi.apply(this,arguments)}function Hi(){return(Hi=e(i)(e(y).mark((function t(n){var r,i,o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=O(n),i=uo(r),o=r.au.length>0?r.au[r.au.length-1].batchId:-1;case 2:if(!Wi(r)){t.next=19;break}return t.prev=3,t.next=6,ti(r.localStore,o);case 6:if(null!==(a=t.sent)){t.next=10;break}return 0===r.au.length&&i.ko(),t.abrupt("break",19);case 10:o=a.batchId,Ki(r,a),t.next=17;break;case 13:return t.prev=13,t.t0=t.catch(3),t.next=17,Vi(r,t.t0);case 17:t.next=2;break;case 19:Gi(r)&&Qi(r);case 20:case"end":return t.stop()}}),t,null,[[3,13]])})))).apply(this,arguments)}function Wi(t){return Di(t)&&t.au.length<10}function Ki(t,e){t.au.push(e);var n=uo(t);n.Co()&&n.zo&&n.Ho(e.mutations)}function Gi(t){return Di(t)&&!uo(t).Do()&&t.au.length>0}function Qi(t){uo(t).start()}function Xi(t){return Yi.apply(this,arguments)}function Yi(){return(Yi=e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:uo(n).Xo();case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ji(t){return $i.apply(this,arguments)}function $i(){return($i=e(i)(e(y).mark((function t(n){var r,i,o,a,s,u,c;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=uo(n),i=!0,o=!1,a=void 0,t.prev=2,s=n.au[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)c=u.value,r.Ho(c.mutations);t.next=10;break;case 6:t.prev=6,t.t0=t.catch(2),o=!0,a=t.t0;case 10:t.prev=10,t.prev=11,i||null==s.return||s.return();case 13:if(t.prev=13,!o){t.next=16;break}throw a;case 16:return t.finish(13);case 17:return t.finish(10);case 18:case"end":return t.stop()}}),t,null,[[2,6,10,18],[11,,13,17]])})))).apply(this,arguments)}function Zi(t,e,n){return to.apply(this,arguments)}function to(){return(to=e(i)(e(y).mark((function t(n,r,i){var o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.au.shift(),a=br.from(o,r,i),t.next=3,qi(n,(function(){return n.remoteSyncer.applySuccessfulWrite(a)}));case 3:return t.next=5,zi(n);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function eo(t,e){return no.apply(this,arguments)}function no(){return no=e(i)(e(y).mark((function t(n,r){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r&&uo(n).zo,!t.t0){t.next=4;break}return t.next=4,function(){var t=e(i)(e(y).mark((function t(n,r){var i,o;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!mn(o=r.code)||o===M.ABORTED){t.next=7;break}return i=n.au.shift(),uo(n).No(),t.next=5,qi(n,(function(){return n.remoteSyncer.rejectFailedWrite(i.batchId,r)}));case 5:return t.next=7,zi(n);case 7:case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()(n,r);case 4:Gi(n)&&Qi(n);case 5:case"end":return t.stop()}}),t)}))),no.apply(this,arguments)}function ro(t,e){return io.apply(this,arguments)}function io(){return(io=e(i)(e(y).mark((function t(n,r){var i,o;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(i=O(n)).asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials"),o=Di(i),i.lu.add(3),t.next=6,_i(i);case 6:return o&&i._u.set("Unknown"),t.next=9,i.remoteSyncer.handleCredentialChange(r);case 9:return i.lu.delete(3),t.next=12,xi(i);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function oo(t,e){return ao.apply(this,arguments)}function ao(){return(ao=e(i)(e(y).mark((function t(n,r){var i;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=O(n),!r){t.next=7;break}return i.lu.delete(2),t.next=5,xi(i);case 5:t.next=13;break;case 7:if(t.t0=r,t.t0){t.next=13;break}return i.lu.add(2),t.next=12,_i(i);case 12:i._u.set("Unknown");case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function so(t){return t.mu||(t.mu=(r=t.datastore,o=t.asyncQueue,a={zr:Mi.bind(null,t),Jr:Pi.bind(null,t),Go:Fi.bind(null,t)},(s=O(r)).tu(),new gi(o,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,a)),t.fu.push((n=e(i)(e(y).mark((function n(r){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=4;break}t.mu.No(),Ni(t)?Li(t):t._u.set("Unknown"),e.next=7;break;case 4:return e.next=6,t.mu.stop();case 6:Oi(t);case 7:case"end":return e.stop()}}),n)}))),function(t){return n.apply(this,arguments)}))),t.mu;var n,r,o,a,s}function uo(t){return t.gu||(t.gu=(r=t.datastore,o=t.asyncQueue,a={zr:Xi.bind(null,t),Jr:eo.bind(null,t),Yo:Ji.bind(null,t),Jo:Zi.bind(null,t)},(s=O(r)).tu(),new mi(o,s.bo,s.authCredentials,s.appCheckCredentials,s.wt,a)),t.fu.push((n=e(i)(e(y).mark((function n(r){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return t.gu.No(),e.next=4,zi(t);case 4:e.next=9;break;case 6:return e.next=8,t.gu.stop();case 8:t.au.length>0&&(I("RemoteStore","Stopping write stream with ".concat(t.au.length," pending writes")),t.au=[]);case 9:case"end":return e.stop()}}),n)}))),function(t){return n.apply(this,arguments)}))),t.gu
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */;var n,r,o,a,s}var co=function(){"use strict";function t(n,r,i,o,s){e(a)(this,t),this.asyncQueue=n,this.timerId=r,this.targetTimeMs=i,this.op=o,this.removalCallback=s,this.deferred=new P,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return e(u)(t,[{key:"start",value:function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new R(M.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}},{key:"handleDelayElapsed",value:function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}],[{key:"createAndSchedule",value:function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a}}]),t}();function lo(t,e){if(C("AsyncQueue","".concat(e,": ").concat(t)),ft(t))return new R(M.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fo=function(){"use strict";function t(n){e(a)(this,t),this.comparator=n?function(t,e){return n(t,e)||tt.comparator(t.key,e.key)}:function(t,e){return tt.comparator(t.key,e.key)},this.keyedMap=_n(),this.sortedSet=new yt(this.comparator)}return e(u)(t,[{key:"has",value:function(t){return null!=this.keyedMap.get(t)}},{key:"get",value:function(t){return this.keyedMap.get(t)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))}},{key:"add",value:function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}},{key:"delete",value:function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}},{key:"isEqual",value:function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}},{key:"copy",value:function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}],[{key:"emptySet",value:function(e){return new t(e.comparator)}}]),t}(),ho=function(){"use strict";function t(){e(a)(this,t),this.yu=new yt(tt.comparator)}return e(u)(t,[{key:"track",value:function(t){var e=t.doc.key,n=this.yu.get(e);n?0!==t.type&&3===n.type?this.yu=this.yu.insert(e,t):3===t.type&&1!==n.type?this.yu=this.yu.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.yu=this.yu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.yu=this.yu.remove(e):1===t.type&&2===n.type?this.yu=this.yu.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.yu=this.yu.insert(e,{type:2,doc:t.doc}):N():this.yu=this.yu.insert(e,t)}},{key:"pu",value:function(){var t=[];return this.yu.inorderTraversal((function(e,n){t.push(n)})),t}}]),t}(),po=function(){"use strict";function t(n,r,i,o,s,u,c,l){e(a)(this,t),this.query=n,this.docs=r,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=c,this.excludesMetadataChanges=l}return e(u)(t,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ae(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,fo.emptySet(n),o,r,i,!0,!1)}}]),t}(),vo=function t(){"use strict";e(a)(this,t),this.Iu=void 0,this.listeners=[]},yo=function t(){"use strict";e(a)(this,t),this.queries=new bn((function(t){return Le(t)}),Ae),this.onlineState="Unknown",this.Tu=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t,e){return mo.apply(this,arguments)}function mo(){return(mo=e(i)(e(y).mark((function t(n,r){var i,o,a,s,u;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=O(n),o=r.query,a=!1,(s=i.queries.get(o))||(a=!0,s=new vo),!a){t.next=13;break}return t.prev=3,t.next=6,i.onListen(o);case 6:s.Iu=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),u=lo(t.t0,"Initialization of query '".concat(Ne(r.query),"' failed")),t.abrupt("return",void r.onError(u));case 13:i.queries.set(o,s),s.listeners.push(r),r.Eu(i.onlineState),s.Iu&&r.Au(s.Iu)&&Eo(i);case 14:case"end":return t.stop()}}),t,null,[[3,9]])})))).apply(this,arguments)}function wo(t,e){return bo.apply(this,arguments)}function bo(){return(bo=e(i)(e(y).mark((function t(n,r){var i,o,a,s,u;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=O(n),o=r.query,a=!1,(s=i.queries.get(o))&&(u=s.listeners.indexOf(r))>=0&&(s.listeners.splice(u,1),a=0===s.listeners.length),!a){t.next=6;break}return t.abrupt("return",(i.queries.delete(o),i.onUnlisten(o)));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ko(t,e){var n=O(t),r=!1,i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value,l=c.query,f=n.queries.get(l);if(f){var h=!0,d=!1,p=void 0;try{for(var v,y=f.listeners[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){v.value.Au(c)&&(r=!0)}}catch(t){d=!0,p=t}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}f.Iu=c}}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}r&&Eo(n)}function xo(t,e,n){var r=O(t),i=r.queries.get(e),o=!0,a=!1,s=void 0;if(i)try{for(var u,c=i.listeners[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){u.value.onError(n)}}catch(t){a=!0,s=t}finally{try{o||null==c.return||c.return()}finally{if(a)throw s}}r.queries.delete(e)}function Eo(t){t.Tu.forEach((function(t){t.next()}))}var _o=function(){"use strict";function t(n,r,i){e(a)(this,t),this.query=n,this.Ru=r,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=i||{}}return e(u)(t,[{key:"Au",value:function(t){if(!this.options.includeMetadataChanges){var e=[],n=!0,r=!1,i=void 0;try{for(var o,a=t.docChanges[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;3!==s.type&&e.push(s)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t=new po(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var u=!1;return this.bu?this.vu(t)&&(this.Ru.next(t),u=!0):this.Vu(t,this.onlineState)&&(this.Su(t),u=!0),this.Pu=t,u}},{key:"onError",value:function(t){this.Ru.error(t)}},{key:"Eu",value:function(t){this.onlineState=t;var e=!1;return this.Pu&&!this.bu&&this.Vu(this.Pu,t)&&(this.Su(this.Pu),e=!0),e}},{key:"Vu",value:function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Du&&n||t.docs.isEmpty()&&"Offline"!==e)}},{key:"vu",value:function(t){if(t.docChanges.length>0)return!0;var e=this.Pu&&this.Pu.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}},{key:"Su",value:function(t){t=po.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.bu=!0,this.Ru.next(t)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var To=function t(n){"use strict";e(a)(this,t),this.key=n},So=function t(n){"use strict";e(a)(this,t),this.key=n},Io=function(){"use strict";function t(n,r){e(a)(this,t),this.query=n,this.Fu=r,this.$u=null,this.current=!1,this.Bu=Nn(),this.mutatedKeys=Nn(),this.Lu=Me(n),this.Uu=new fo(this.Lu)}return e(u)(t,[{key:"qu",get:function(){return this.Fu}},{key:"Ku",value:function(t,e){var n=this,r=e?e.Gu:new ho,i=e?e.Uu:this.Uu,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),f=De(n.query,e)?e:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Qu(l,f)||(r.track({type:2,doc:f}),p=!0,(u&&n.Lu(f,u)>0||c&&n.Lu(f,c)<0)&&(s=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(f?(a=a.add(f),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),null!==this.query.limit)for(;a.size>this.query.limit;){var l="F"===this.query.limitType?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Uu:a,Gu:r,Mi:s,mutatedKeys:o}}},{key:"Qu",value:function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}},{key:"applyChanges",value:function(t,e,n){var r=this,i=this.Uu;this.Uu=t.Uu,this.mutatedKeys=t.mutatedKeys;var o=t.Gu.pu();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return N()}})(n)-o(i)||r.Lu(t.doc,e.doc);var n,i,o})),this.ju(n);var a=e?this.Wu():[],s=0===this.Bu.size&&this.current?1:0,u=s!==this.$u;return this.$u=s,0!==o.length||u?{snapshot:new po(this.query,t.Uu,i,o,t.mutatedKeys,0===s,u,!1),zu:a}:{zu:a}}},{key:"Eu",value:function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Uu:this.Uu,Gu:new ho,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{zu:[]}}},{key:"Hu",value:function(t){return!this.Fu.has(t)&&!!this.Uu.has(t)&&!this.Uu.get(t).hasLocalMutations}},{key:"ju",value:function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.Fu=e.Fu.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.Fu=e.Fu.delete(t)})),this.current=t.current)}},{key:"Wu",value:function(){var t=this;if(!this.current)return[];var e=this.Bu;this.Bu=Nn(),this.Uu.forEach((function(e){t.Hu(e.key)&&(t.Bu=t.Bu.add(e.key))}));var n=[];return e.forEach((function(e){t.Bu.has(e)||n.push(new So(e))})),this.Bu.forEach((function(t){e.has(t)||n.push(new To(t))})),n}},{key:"Ju",value:function(t){this.Fu=t.ji,this.Bu=Nn();var e=this.Ku(t.documents);return this.applyChanges(e,!0)}},{key:"Yu",value:function(){return po.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}]),t}(),Co=function t(n,r,i){"use strict";e(a)(this,t),this.query=n,this.targetId=r,this.view=i},Ao=function t(n){"use strict";e(a)(this,t),this.key=n,this.Xu=!1},Lo=function(){"use strict";function t(n,r,i,o,s,u){e(a)(this,t),this.localStore=n,this.remoteStore=r,this.eventManager=i,this.sharedClientState=o,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.Zu={},this.tc=new bn((function(t){return Le(t)}),Ae),this.ec=new Map,this.nc=new Set,this.sc=new yt(tt.comparator),this.ic=new Map,this.rc=new Rr,this.oc={},this.uc=new Map,this.cc=Ar.Rn(),this.onlineState="Unknown",this.ac=void 0}return e(u)(t,[{key:"isPrimaryClient",get:function(){return!0===this.ac}}]),t}();function No(t,e){return Do.apply(this,arguments)}function Do(){return(Do=e(i)(e(y).mark((function t(n,r){var i,o,a,s,u,c;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=aa(n),!(s=i.tc.get(r))){t.next=7;break}o=s.targetId,i.sharedClientState.addLocalQueryTarget(o),a=s.view.Yu(),t.next=16;break;case 7:return t.next=9,ei(i.localStore,Ie(r));case 9:return u=t.sent,i.isPrimaryClient&&Si(i.remoteStore,u),c=i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.targetId,t.next=15,Oo(i,r,o,"current"===c);case 15:a=t.sent;case 16:return t.abrupt("return",a);case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Oo(t,e,n,r){return Mo.apply(this,arguments)}function Mo(){return Mo=e(i)(e(y).mark((function t(n,r,o,a){var s,u,c,l,f,h;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.hc=function(t,r,o){return(a=e(i)(e(y).mark((function t(n,r,i,o){var a,s,u;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.view.Ku(i),t.t0=a.Mi,!t.t0){t.next=6;break}return t.next=5,ii(n.localStore,r.query,!1).then((function(t){var e=t.documents;return r.view.Ku(e,a)}));case 5:a=t.sent;case 6:return s=o&&o.targetChanges.get(r.targetId),u=r.view.applyChanges(a,n.isPrimaryClient,s),t.abrupt("return",($o(n,r.targetId,u.zu),u.snapshot));case 8:case"end":return t.stop()}}),t)}))),function(t,e,n,r){return a.apply(this,arguments)})(n,t,r,o);var a},t.next=3,ii(n.localStore,r,!0);case 3:return s=t.sent,u=new Io(r,s.ji),c=u.Ku(s.documents),l=Rn.createSynthesizedTargetChangeForCurrentChange(o,a&&"Offline"!==n.onlineState),f=u.applyChanges(c,n.isPrimaryClient,l),$o(n,o,f.zu),h=new Co(r,o,u),t.abrupt("return",(n.tc.set(r,h),n.ec.has(o)?n.ec.get(o).push(r):n.ec.set(o,[r]),f.snapshot));case 11:case"end":return t.stop()}}),t)}))),Mo.apply(this,arguments)}function Ro(t,e){return Po.apply(this,arguments)}function Po(){return(Po=e(i)(e(y).mark((function t(n,r){var i,o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=O(n),o=i.tc.get(r),!((a=i.ec.get(o.targetId)).length>1)){t.next=3;break}return t.abrupt("return",(i.ec.set(o.targetId,a.filter((function(t){return!Ae(t,r)}))),void i.tc.delete(r)));case 3:if(!i.isPrimaryClient){t.next=11;break}if(i.sharedClientState.removeLocalQueryTarget(o.targetId),t.t0=i.sharedClientState.isActiveQueryTarget(o.targetId),t.t0){t.next=9;break}return t.next=9,ni(i.localStore,o.targetId,!1).then((function(){i.sharedClientState.clearQueryState(o.targetId),Ii(i.remoteStore,o.targetId),Yo(i,o.targetId)})).catch(ut);case 9:t.next=14;break;case 11:return Yo(i,o.targetId),t.next=14,ni(i.localStore,o.targetId,!0);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Bo(t,e,n){return Fo.apply(this,arguments)}function Fo(){return(Fo=e(i)(e(y).mark((function t(n,r,i){var o,a,s;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=sa(n),t.prev=1,t.next=4,function(t,e){var n,r,i=O(t),o=Q.now(),a=e.reduce((function(t,e){return t.add(e.key)}),Nn());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(t){var s=xn(),u=Nn();return i.Ui.getEntries(t,a).next((function(t){(s=t).forEach((function(t,e){e.isValidDocument()||(u=u.add(t))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(t,s)})).next((function(r){n=r;var a=[],s=!0,u=!1,c=void 0;try{for(var l,f=e[Symbol.iterator]();!(s=(l=f.next()).done);s=!0){var h=l.value,d=an(h,n.get(h.key).overlayedDocument);null!=d&&a.push(new cn(h.key,d,$t(d.value.mapValue),Ze.exists(!0)))}}catch(t){u=!0,c=t}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}return i.mutationQueue.addMutationBatch(t,o,a,e)})).next((function(e){r=e;var o=e.applyToLocalDocumentSet(n,u);return i.documentOverlayCache.saveOverlays(t,e.batchId,o)}))})).then((function(){return{batchId:r.batchId,changes:Tn(n)}}))}(o.localStore,r);case 4:return a=t.sent,o.sharedClientState.addPendingMutation(a.batchId),e=o,u=a.batchId,c=i,l=void 0,(l=e.oc[e.currentUser.toKey()])||(l=new yt(K)),l=l.insert(u,c),e.oc[e.currentUser.toKey()]=l,t.next=9,ea(o,a.changes);case 9:return t.next=11,zi(o.remoteStore);case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),s=lo(t.t0,"Failed to persist write"),i.reject(s);case 17:case"end":return t.stop()}var e,u,c,l}),t,null,[[1,13]])})))).apply(this,arguments)}function Uo(t,e){return Vo.apply(this,arguments)}function Vo(){return(Vo=e(i)(e(y).mark((function t(n,r){var i,o;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=O(n),t.prev=1,t.next=4,$r(i.localStore,r);case 4:return o=t.sent,r.targetChanges.forEach((function(t,e){var n=i.ic.get(e);n&&(D(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?n.Xu=!0:t.modifiedDocuments.size>0?D(n.Xu):t.removedDocuments.size>0&&(D(n.Xu),n.Xu=!1))})),t.next=8,ea(i,o,r);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,ut(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))).apply(this,arguments)}function jo(t,e,n){var r=O(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.tc.forEach((function(t,n){var r=n.view.Eu(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=O(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){var i=!0,o=!1,a=void 0;try{for(var s,u=n.listeners[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){s.value.Eu(e)&&(r=!0)}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}})),r&&Eo(n)}(r.eventManager,e),i.length&&r.Zu.Go(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qo(t,e,n){return zo.apply(this,arguments)}function zo(){return(zo=e(i)(e(y).mark((function t(n,r,i){var o,a,s,u,c,l;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((o=O(n)).sharedClientState.updateQueryState(r,"rejected",i),a=o.ic.get(r),!(s=a&&a.key)){t.next=14;break}return u=(u=new yt(tt.comparator)).insert(s,Zt.newNoDocument(s,X.min())),c=Nn().add(s),l=new Mn(X.min(),new Map,new wt(K),u,c),t.next=9,Uo(o,l);case 9:o.sc=o.sc.remove(s),o.ic.delete(r),ta(o),t.next=16;break;case 14:return t.next=16,ni(o.localStore,r,!1).then((function(){return Yo(o,r,i)})).catch(ut);case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ho(t,e){return Wo.apply(this,arguments)}function Wo(){return(Wo=e(i)(e(y).mark((function t(n,r){var i,o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=O(n),o=r.batch.batchId,t.prev=1,t.next=4,Yr(i.localStore,r);case 4:return a=t.sent,Xo(i,o,null),Qo(i,o),i.sharedClientState.updateMutationState(o,"acknowledged"),t.next=10,ea(i,a);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,ut(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function Ko(t,e,n){return Go.apply(this,arguments)}function Go(){return(Go=e(i)(e(y).mark((function t(n,r,i){var o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=O(n),t.prev=1,t.next=4,function(t,e){var n=O(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.mutationQueue.lookupMutationBatch(t,e).next((function(e){return D(null!==e),r=e.keys(),n.mutationQueue.removeMutationBatch(t,e)})).next((function(){return n.mutationQueue.performConsistencyCheck(t)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(t,r,e)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,r)})).next((function(){return n.localDocuments.getDocuments(t,r)}))}))}(o.localStore,r);case 4:return a=t.sent,Xo(o,r,i),Qo(o,r),o.sharedClientState.updateMutationState(r,"rejected",i),t.next=10,ea(o,a);case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,ut(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function Qo(t,e){(t.uc.get(e)||[]).forEach((function(t){t.resolve()})),t.uc.delete(e)}function Xo(t,e,n){var r=O(t),i=r.oc[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.oc[r.currentUser.toKey()]=i}}function Yo(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.sharedClientState.removeLocalQueryTarget(e);var r=!0,i=!1,o=void 0;try{for(var a,s=t.ec.get(e)[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;t.tc.delete(u),n&&t.Zu.lc(u,n)}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}t.ec.delete(e),t.isPrimaryClient&&t.rc.us(e).forEach((function(e){t.rc.containsKey(e)||Jo(t,e)}))}function Jo(t,e){t.nc.delete(e.path.canonicalString());var n=t.sc.get(e);null!==n&&(Ii(t.remoteStore,n),t.sc=t.sc.remove(e),t.ic.delete(n),ta(t))}function $o(t,e,n){var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u instanceof To?(t.rc.addReference(u.key,e),Zo(t,u)):u instanceof So?(I("SyncEngine","Document no longer in limbo: "+u.key),t.rc.removeReference(u.key,e),t.rc.containsKey(u.key)||Jo(t,u.key)):N()}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}function Zo(t,e){var n=e.key,r=n.path.canonicalString();t.sc.get(n)||t.nc.has(r)||(I("SyncEngine","New document in limbo: "+n),t.nc.add(r),ta(t))}function ta(t){for(;t.nc.size>0&&t.sc.size<t.maxConcurrentLimboResolutions;){var e=t.nc.values().next().value;t.nc.delete(e);var n=new tt(J.fromString(e)),r=t.cc.next();t.ic.set(r,new Ao(n)),t.sc=t.sc.insert(n,r),Si(t.remoteStore,new xr(Ie(ke(n.path)),r,2,ht.ot))}}function ea(t,e,n){return na.apply(this,arguments)}function na(){return na=e(i)(e(y).mark((function t(n,r,o){var a,s,u,c;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=O(n),s=[],u=[],c=[],t.t0=a.tc.isEmpty(),t.t0){t.next=9;break}return a.tc.forEach((function(t,e){c.push(a.hc(e,r,o).then((function(t){if(t){a.isPrimaryClient&&a.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),s.push(t);var n=Hr.Vi(e.targetId,t);u.push(n)}})))})),t.next=6,Promise.all(c);case 6:return a.Zu.Go(s),t.next=9,function(){var t=e(i)(e(y).mark((function t(n,r){var i,o,a,s,u,c,l,f,h,d,p;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=O(n),t.prev=1,t.next=4,i.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return lt.forEach(r,(function(e){return lt.forEach(e.Pi,(function(n){return i.persistence.referenceDelegate.addReference(t,e.targetId,n)})).next((function(){return lt.forEach(e.vi,(function(n){return i.persistence.referenceDelegate.removeReference(t,e.targetId,n)}))}))}))}));case 4:t.next=11;break;case 6:if(t.prev=6,t.t0=t.catch(1),ft(t.t0)){t.next=10;break}throw t.t0;case 10:I("LocalStore","Failed to update sequence numbers: "+t.t0);case 11:for(o=!0,a=!1,s=void 0,t.prev=12,u=r[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)l=c.value,f=l.targetId,l.fromCache||(h=i.$i.get(f),d=h.snapshotVersion,p=h.withLastLimboFreeSnapshotVersion(d),i.$i=i.$i.insert(f,p));t.next=20;break;case 16:t.prev=16,t.t1=t.catch(12),a=!0,s=t.t1;case 20:t.prev=20,t.prev=21,o||null==u.return||u.return();case 23:if(t.prev=23,!a){t.next=26;break}throw s;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}}),t,null,[[1,6],[12,16,20,28],[21,,23,27]])})));return function(e,n){return t.apply(this,arguments)}}()(a.localStore,u);case 9:case"end":return t.stop()}}),t)}))),na.apply(this,arguments)}function ra(t,e){return ia.apply(this,arguments)}function ia(){return(ia=e(i)(e(y).mark((function t(n,r){var i,o;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=O(n)).currentUser.isEqual(r)){t.next=11;break}return I("SyncEngine","User change. New user:",r.toKey()),t.next=5,Qr(i.localStore,r);case 5:return o=t.sent,i.currentUser=r,(e=i).uc.forEach((function(t){t.forEach((function(t){t.reject(new R(M.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.uc.clear(),i.sharedClientState.handleUserChange(r,o.removedBatchIds,o.addedBatchIds),t.next=11,ea(i,o.Ki);case 11:case"end":return t.stop()}var e}),t)})))).apply(this,arguments)}function oa(t,e){var n=O(t),r=n.ic.get(e);if(r&&r.Xu)return Nn().add(r.key);var i=Nn(),o=n.ec.get(e);if(!o)return i;var a=!0,s=!1,u=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,h=n.tc.get(f);i=i.unionWith(h.view.qu)}}catch(t){s=!0,u=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw u}}return i}function aa(t){var e=O(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Uo.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oa.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qo.bind(null,e),e.Zu.Go=ko.bind(null,e.eventManager),e.Zu.lc=xo.bind(null,e.eventManager),e}function sa(t){var e=O(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ho.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ko.bind(null,e),e}var ua=function(){"use strict";function t(){e(a)(this,t),this.synchronizeTabs=!1}return e(u)(t,[{key:"initialize",value:function(t){var n=this;return e(i)(e(y).mark((function r(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.wt=pi(t.databaseInfo.databaseId),n.sharedClientState=n.dc(t),n.persistence=n._c(t),e.next=5,n.persistence.start();case 5:n.localStore=n.wc(t),n.gcScheduler=n.mc(t,n.localStore),n.indexBackfillerScheduler=n.gc(t,n.localStore);case 8:case"end":return e.stop()}}),r)})))()}},{key:"mc",value:function(t,e){return null}},{key:"gc",value:function(t,e){return null}},{key:"wc",value:function(t){return Gr(this.persistence,new Wr,t.initialUser,this.wt)}},{key:"_c",value:function(t){return new jr(zr.Os,this.wt)}},{key:"dc",value:function(t){return new si}},{key:"terminate",value:function(){var t=this;return e(i)(e(y).mark((function n(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.gcScheduler&&t.gcScheduler.stop(),e.next=3,t.sharedClientState.shutdown();case 3:return e.next=5,t.persistence.shutdown();case 5:case"end":return e.stop()}}),n)})))()}}]),t}(),ca=function(){"use strict";function t(){e(a)(this,t)}return e(u)(t,[{key:"initialize",value:function(t,n){var r=this;return e(i)(e(y).mark((function i(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=r.localStore,e.t0){e.next=12;break}return r.localStore=t.localStore,r.sharedClientState=t.sharedClientState,r.datastore=r.createDatastore(n),r.remoteStore=r.createRemoteStore(n),r.eventManager=r.createEventManager(n),r.syncEngine=r.createSyncEngine(n,!t.synchronizeTabs),r.sharedClientState.onlineStateHandler=function(t){return jo(r.syncEngine,t,1)},r.remoteStore.remoteSyncer.handleCredentialChange=ra.bind(null,r.syncEngine),e.next=12,oo(r.remoteStore,r.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),i)})))()}},{key:"createEventManager",value:function(t){return new yo}},{key:"createDatastore",value:function(t){var e,n,r,i=pi(t.databaseInfo.databaseId),o=(e=t.databaseInfo,new hi(e));return n=t.authCredentials,r=t.appCheckCredentials,new wi(n,r,o,i)}},{key:"createRemoteStore",value:function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return jo(a.syncEngine,t,0)},o=ci.V()?new ci:new ui,new ki(e,n,r,i,o)}},{key:"createSyncEngine",value:function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=t.initialUser,s=t.maxConcurrentLimboResolutions,u=e,c=new Lo(n,r,i,o,a,s),u&&(c.ac=!0),c;var n,r,i,o,a,s,u,c}},{key:"terminate",value:function(){return(t=e(i)(e(y).mark((function t(n){var r;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=O(n),I("RemoteStore","RemoteStore shutting down."),r.lu.add(5),t.next=5,_i(r);case 5:r.du.shutdown(),r._u.set("Unknown");case 7:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var la=function(){"use strict";function t(n){e(a)(this,t),this.observer=n,this.muted=!1}return e(u)(t,[{key:"next",value:function(t){this.observer.next&&this.Ic(this.observer.next,t)}},{key:"error",value:function(t){this.observer.error?this.Ic(this.observer.error,t):C("Uncaught Error in snapshot listener:",t)}},{key:"Tc",value:function(){this.muted=!0}},{key:"Ic",value:function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)}}]),t}(),fa=function(){"use strict";function t(n,r,o,s){var u=this;e(a)(this,t);var c,l=this;this.authCredentials=n,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=s,this.user=E.UNAUTHENTICATED,this.clientId=W.I(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(o,(c=e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return I("FirestoreClient","Received user=",n.uid),t.next=3,l.authCredentialListener(n);case 3:l.user=n;case 4:case"end":return t.stop()}}),t)}))),function(t){return c.apply(this,arguments)})),this.appCheckCredentials.start(o,(function(t){return I("FirestoreClient","Received new app check token=",t),u.appCheckCredentialListener(t,u.user)}))}return e(u)(t,[{key:"getConfiguration",value:function(){var t=this;return e(i)(e(y).mark((function n(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),n)})))()}},{key:"setCredentialChangeListener",value:function(t){this.authCredentialListener=t}},{key:"setAppCheckTokenChangeListener",value:function(t){this.appCheckCredentialListener=t}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new R(M.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){this.asyncQueue.enterRestrictedMode();var t=new P,n=this;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(e(i)(e(y).mark((function r(){var i;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,e.t0=n.onlineComponents,!e.t0){e.next=5;break}return e.next=5,n.onlineComponents.terminate();case 5:if(e.t1=n.offlineComponents,!e.t1){e.next=9;break}return e.next=9,n.offlineComponents.terminate();case 9:n.authCredentials.shutdown(),n.appCheckCredentials.shutdown(),t.resolve(),e.next=18;break;case 14:e.prev=14,e.t2=e.catch(0),i=lo(e.t2,"Failed to shutdown persistence"),t.reject(i);case 18:case"end":return e.stop()}}),r,null,[[0,14]])})))),t.promise}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(t,e){return da.apply(this,arguments)}function da(){return da=e(i)(e(y).mark((function t(n,r){var o,a;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider"),t.next=3,n.getConfiguration();case 3:return o=t.sent,t.next=6,r.initialize(o);case 6:a=o.initialUser,n.setCredentialChangeListener(function(){var t=e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=a.isEqual(n),t.t0){t.next=5;break}return t.next=4,Qr(r.localStore,n);case 4:a=n;case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),r.persistence.setDatabaseDeletedListener((function(){return n.terminate()})),n.offlineComponents=r;case 8:case"end":return t.stop()}}),t)}))),da.apply(this,arguments)}function pa(t,e){return va.apply(this,arguments)}function va(){return(va=e(i)(e(y).mark((function t(n,r){var i,o;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.asyncQueue.verifyOperationInProgress(),t.next=3,ya(n);case 3:return i=t.sent,I("FirestoreClient","Initializing OnlineComponentProvider"),t.next=7,n.getConfiguration();case 7:return o=t.sent,t.next=10,r.initialize(i,o);case 10:n.setCredentialChangeListener((function(t){return ro(r.remoteStore,t)})),n.setAppCheckTokenChangeListener((function(t,e){return ro(r.remoteStore,e)})),n.onlineComponents=r;case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ya(t){return ga.apply(this,arguments)}function ga(){return(ga=e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.offlineComponents,t.t0){t.next=5;break}return I("FirestoreClient","Using default OfflineComponentProvider"),t.next=5,ha(n,new ua);case 5:return t.abrupt("return",(t.t0||t.sent,n.offlineComponents));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ma(t){return wa.apply(this,arguments)}function wa(){return(wa=e(i)(e(y).mark((function t(n){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.onlineComponents,t.t0){t.next=5;break}return I("FirestoreClient","Using default OnlineComponentProvider"),t.next=5,pa(n,new ca);case 5:return t.abrupt("return",(t.t0||t.sent,n.onlineComponents));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function ba(t){return ma(t).then((function(t){return t.syncEngine}))}function ka(t){return xa.apply(this,arguments)}function xa(){return(xa=e(i)(e(y).mark((function t(n){var r,i;return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ma(n);case 2:return r=t.sent,i=r.eventManager,t.abrupt("return",(i.onListen=No.bind(null,r.syncEngine),i.onUnlisten=Ro.bind(null,r.syncEngine),i));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Ea(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new P;return t.asyncQueue.enqueueAndForget(e(i)(e(y).mark((function i(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(t,e,n,r,i){var o=new la({next:function(o){e.enqueueAndForget((function(){return wo(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new R(M.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new R(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new _o(ke(n.path),o,{includeMetadataChanges:!0,Du:!0});return go(t,a)},e.next=3,ka(t);case 3:return e.t1=e.sent,e.t2=t.asyncQueue,e.t3=n,e.t4=r,e.t5=o,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4,e.t5));case 9:case"end":return e.stop()}}),i)})))),o.promise}var _a=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(t,e,n){if(!n)throw new R(M.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function Sa(t){if(!tt.isDocumentKey(t))throw new R(M.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function Ia(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=(n=t).constructor?n.constructor.name:null;return e?"a custom ".concat(e," object"):"an object"}var n;return"function"==typeof t?"a function":N()}function Ca(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ia(t);throw new R(M.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Aa=function(){"use strict";function t(n){var r;if(e(a)(this,t),void 0===n.host){if(void 0!==n.ssl)throw new R(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=n.host,this.ssl=null===(r=n.ssl)||void 0===r||r;if(this.credentials=n.credentials,this.ignoreUndefinedProperties=!!n.ignoreUndefinedProperties,void 0===n.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==n.cacheSizeBytes&&n.cacheSizeBytes<1048576)throw new R(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=n.cacheSizeBytes}this.experimentalForceLongPolling=!!n.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!n.experimentalAutoDetectLongPolling,this.useFetchStreams=!!n.useFetchStreams,function(t,e,n,r){if(!0===e&&!0===r)throw new R(M.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}("experimentalForceLongPolling",n.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",n.experimentalAutoDetectLongPolling)}return e(u)(t,[{key:"isEqual",value:function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}]),t}(),La=function(){"use strict";function t(n,r,i){e(a)(this,t),this._authCredentials=r,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Aa({}),this._settingsFrozen=!1,n instanceof Dt?this._databaseId=n:(this._app=n,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new R(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dt(t.options.projectId)}(n))}return e(u)(t,[{key:"app",get:function(){if(!this._app)throw new R(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(t){if(this._settingsFrozen)throw new R(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Aa(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new F;switch(t.type){case"gapi":var e=t.client;return D(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new j(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new R(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return t=this,(e=_a.get(t))&&(I("ComponentProvider","Removing Datastore"),_a.delete(t),e.terminate()),Promise.resolve();var t,e}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Na=function(){"use strict";function t(n,r,i){e(a)(this,t),this.converter=r,this._key=i,this.type="document",this.firestore=n}return e(u)(t,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Oa(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(e){return new t(this.firestore,e,this._key)}}]),t}(),Da=function(){"use strict";function t(n,r,i){e(a)(this,t),this.converter=r,this._query=i,this.type="query",this.firestore=n}return e(u)(t,[{key:"withConverter",value:function(e){return new t(this.firestore,e,this._query)}}]),t}(),Oa=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o){var s;return e(a)(this,r),(s=n.call(this,t,i,ke(o)))._path=o,s.type="collection",e(h)(s)}return e(u)(r,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Na(this.firestore,null,new tt(t))}},{key:"withConverter",value:function(t){return new r(this.firestore,t,this._path)}}]),r}(Da);function Ma(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if(t=(0,b.getModularInstance)(t),1===arguments.length&&(n=W.I()),Ta("doc","path",n),t instanceof La){var a,s=(a=J).fromString.apply(a,[n].concat(e(p)(i)));return Sa(s),new Na(t,null,new tt(s))}var u;if(!(t instanceof Na||t instanceof Oa))throw new R(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var c=t._path.child((u=J).fromString.apply(u,[n].concat(e(p)(i))));return Sa(c),new Na(t.firestore,t instanceof Oa?t.converter:null,new tt(c))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ra=function(){"use strict";function t(){var n=this;e(a)(this,t),this.Mc=Promise.resolve(),this.Oc=[],this.Fc=!1,this.$c=[],this.Bc=null,this.Lc=!1,this.Uc=!1,this.qc=[],this.So=new vi(this,"async_queue_retry"),this.Kc=function(){var t=di();t&&I("AsyncQueue","Visibility state changed to "+t.visibilityState),n.So.Eo()};var r=di();r&&"function"==typeof r.addEventListener&&r.addEventListener("visibilitychange",this.Kc)}return e(u)(t,[{key:"isShuttingDown",get:function(){return this.Fc}},{key:"enqueueAndForget",value:function(t){this.enqueue(t)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(t){this.Gc(),this.Qc(t)}},{key:"enterRestrictedMode",value:function(t){if(!this.Fc){this.Fc=!0,this.Uc=t||!1;var e=di();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Kc)}}},{key:"enqueue",value:function(t){var e=this;if(this.Gc(),this.Fc)return new Promise((function(){}));var n=new P;return this.Qc((function(){return e.Fc&&e.Uc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(t){var e=this;this.enqueueAndForget((function(){return e.Oc.push(t),e.jc()}))}},{key:"jc",value:function(){var t=this;return e(i)(e(y).mark((function n(){return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.Oc.length){e.next=14;break}return e.prev=1,e.next=4,t.Oc[0]();case 4:t.Oc.shift(),t.So.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ft(e.t0)){e.next=12;break}throw e.t0;case 12:I("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:t.Oc.length>0&&t.So.Io((function(){return t.jc()}));case 14:case"end":return e.stop()}}),n,null,[[1,8]])})))()}},{key:"Qc",value:function(t){var e=this,n=this.Mc.then((function(){return e.Lc=!0,t().catch((function(t){var n,r;throw e.Bc=t,e.Lc=!1,C("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t})).then((function(t){return e.Lc=!1,t}))}));return this.Mc=n,n}},{key:"enqueueAfterDelay",value:function(t,e,n){var r=this;this.Gc(),this.qc.indexOf(t)>-1&&(e=0);var i=co.createAndSchedule(this,t,e,n,(function(t){return r.Wc(t)}));return this.$c.push(i),i}},{key:"Gc",value:function(){this.Bc&&N()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var t=this;return e(i)(e(y).mark((function n(){var r;return e(y).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:return r=t.Mc,e.next=4,r;case 4:if(r!==t.Mc){e.next=1;break}case 5:case"end":return e.stop()}}),n)})))()}},{key:"Hc",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.$c[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){if(i.value.timerId===t)return!0}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return!1}},{key:"Jc",value:function(t){var e=this;return this.zc().then((function(){e.$c.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));var n=!0,r=!1,i=void 0;try{for(var o,a=e.$c[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.skipDelay(),"all"!==t&&s.timerId===t)break}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e.zc()}))}},{key:"Yc",value:function(t){this.qc.push(t)}},{key:"Wc",value:function(t){var e=this.$c.indexOf(t);this.$c.splice(e,1)}}]),t}();var Pa=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o){var s;return e(a)(this,r),(s=n.call(this,t,i,o)).type="firestore",s._queue=new Ra,s._persistenceKey="name"in t?t.name:"[DEFAULT]",e(h)(s)}return e(u)(r,[{key:"_terminate",value:function(){return this._firestoreClient||Ua(this),this._firestoreClient.terminate()}}]),r}(La);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ba(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,g.getApp)();return(0,g._getProvider)(t,"firestore").getImmediate()}function Fa(t){return t._firestoreClient||Ua(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ua(t){var e,n,r,i,o,a=t._freezeSettings(),s=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new Nt(n,r,i,(o=a).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new fa(t._authCredentials,t._appCheckCredentials,t._queue,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Va=function(){"use strict";function t(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];e(a)(this,t);for(var o=0;o<r.length;++o)if(0===r[o].length)throw new R(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Z(r)}return e(u)(t,[{key:"isEqual",value:function(t){return this._internalPath.isEqual(t._internalPath)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ja=function(){"use strict";function t(n){e(a)(this,t),this._byteString=n}return e(u)(t,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(t){return this._byteString.isEqual(t._byteString)}}],[{key:"fromBase64String",value:function(e){try{return new t(Et.fromBase64String(e))}catch(t){throw new R(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(e){return new t(Et.fromUint8Array(e))}}]),t}(),qa=function t(n){"use strict";e(a)(this,t),this._methodName=n},za=function(){"use strict";function t(n,r){if(e(a)(this,t),!isFinite(n)||n<-90||n>90)throw new R(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+n);if(!isFinite(r)||r<-180||r>180)throw new R(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=n,this._long=r}return e(u)(t,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(t){return this._lat===t._lat&&this._long===t._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(t){return K(this._lat,t._lat)||K(this._long,t._long)}}]),t}(),Ha=/^__.*__$/,Wa=function(){"use strict";function t(n,r,i){e(a)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(u)(t,[{key:"toMutation",value:function(t,e){return null!==this.fieldMask?new cn(t,this.data,this.fieldMask,e,this.fieldTransforms):new un(t,this.data,e,this.fieldTransforms)}}]),t}(),Ka=function(){"use strict";function t(n,r,i){e(a)(this,t),this.data=n,this.fieldMask=r,this.fieldTransforms=i}return e(u)(t,[{key:"toMutation",value:function(t,e){return new cn(t,this.data,this.fieldMask,e,this.fieldTransforms)}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw N()}}var Qa=function(){"use strict";function t(n,r,i,o,s,u){e(a)(this,t),this.settings=n,this.databaseId=r,this.wt=i,this.ignoreUndefinedProperties=o,void 0===s&&this.Xc(),this.fieldTransforms=s||[],this.fieldMask=u||[]}return e(u)(t,[{key:"path",get:function(){return this.settings.path}},{key:"Zc",get:function(){return this.settings.Zc}},{key:"ta",value:function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.wt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ea",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:n,na:!1});return r.sa(t),r}},{key:"ia",value:function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.ta({path:n,na:!1});return r.Xc(),r}},{key:"ra",value:function(t){return this.ta({path:void 0,na:!0})}},{key:"oa",value:function(t){return fs(t,this.settings.methodName,this.settings.ua||!1,this.path,this.settings.ca)}},{key:"contains",value:function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))}},{key:"Xc",value:function(){if(this.path)for(var t=0;t<this.path.length;t++)this.sa(this.path.get(t))}},{key:"sa",value:function(t){if(0===t.length)throw this.oa("Document fields must not be empty");if(Ga(this.Zc)&&Ha.test(t))throw this.oa('Document fields cannot begin and end with "__"')}}]),t}(),Xa=function(){"use strict";function t(n,r,i){e(a)(this,t),this.databaseId=n,this.ignoreUndefinedProperties=r,this.wt=i||pi(n)}return e(u)(t,[{key:"aa",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Qa({Zc:t,methodName:e,ca:n,path:Z.emptyPath(),na:!1,ua:r},this.databaseId,this.wt,this.ignoreUndefinedProperties)}}]),t}();function Ya(t){var e=t._freezeSettings(),n=pi(t._databaseId);return new Xa(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ja(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=t.aa(o.merge||o.mergeFields?2:0,e,n,i);ss("Data must be an object, but it was:",a,r);var s,u,c=os(r,a);if(o.merge)s=new kt(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){var l=[],f=!0,h=!1,d=void 0;try{for(var p,v=o.mergeFields[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value,g=us(e,y,n);if(!a.contains(g))throw new R(M.INVALID_ARGUMENT,"Field '".concat(g,"' is specified in your field mask but missing from your input data."));hs(l,g)||l.push(g)}}catch(t){h=!0,d=t}finally{try{f||null==v.return||v.return()}finally{if(h)throw d}}s=new kt(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Wa(new Jt(c),s,u)}var $a=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(){return e(a)(this,r),n.apply(this,arguments)}return e(u)(r,[{key:"_toFieldTransform",value:function(t){if(2!==t.Zc)throw 1===t.Zc?t.oa("".concat(this._methodName,"() can only appear at the top level of your update data")):t.oa("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return t.fieldMask.push(t.path),null}},{key:"isEqual",value:function(t){return t instanceof r}}]),r}(qa);function Za(t,e,n){return new Qa({Zc:3,ca:e.settings.ca,methodName:t._methodName,na:n},e.databaseId,e.wt,e.ignoreUndefinedProperties)}var ts=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this,t)).ha=i,e(h)(o)}return e(u)(r,[{key:"_toFieldTransform",value:function(t){var e=Za(this,t,!0),n=this.ha.map((function(t){return is(t,e)})),r=new He(n);return new Je(t.path,r)}},{key:"isEqual",value:function(t){return this===t}}]),r}(qa),es=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i){var o;return e(a)(this,r),(o=n.call(this,t)).ha=i,e(h)(o)}return e(u)(r,[{key:"_toFieldTransform",value:function(t){var e=Za(this,t,!0),n=this.ha.map((function(t){return is(t,e)})),r=new Ke(n);return new Je(t.path,r)}},{key:"isEqual",value:function(t){return this===t}}]),r}(qa);function ns(t,e,n,r){var i=t.aa(1,e,n);ss("Data must be an object, but it was:",i,r);var o=[],a=Jt.empty();pt(r,(function(t,r){var s=ls(e,t,n);r=(0,b.getModularInstance)(r);var u=i.ia(s);if(r instanceof $a)o.push(s);else{var c=is(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new kt(o);return new Ka(a,s,i.fieldTransforms)}function rs(t,e,n,r,i,o){var a=t.aa(1,e,n),s=[us(e,r,n)],u=[i];if(o.length%2!=0)throw new R(M.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<o.length;c+=2)s.push(us(e,o[c])),u.push(o[c+1]);for(var l=[],f=Jt.empty(),h=s.length-1;h>=0;--h)if(!hs(l,s[h])){var d=s[h],p=u[h];p=(0,b.getModularInstance)(p);var v=a.ia(d);if(p instanceof $a)l.push(d);else{var y=is(p,v);null!=y&&(l.push(d),f.set(d,y))}}var g=new kt(l);return new Ka(f,g,a.fieldTransforms)}function is(t,e){if(as(t=(0,b.getModularInstance)(t)))return ss("Unsupported field value:",e,t),os(t,e);if(t instanceof qa)return function(t,e){if(!Ga(e.Zc))throw e.oa("".concat(t._methodName,"() can only be used with update() and set()"));if(!e.path)throw e.oa("".concat(t._methodName,"() is not currently supported inside arrays"));var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.na&&4!==e.Zc)throw e.oa("Nested arrays are not supported");return function(t,e){var n=[],r=0,i=!0,o=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=is(s.value,e.ra(r));null==c&&(c={nullValue:"NULL_VALUE"}),n.push(c),r++}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,b.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Fe(e.wt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Q.fromDate(t);return{timestampValue:Kn(e.wt,n)}}if(t instanceof Q){var r=new Q(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Kn(e.wt,r)}}if(t instanceof za)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ja)return{bytesValue:Gn(e.wt,t._byteString)};if(t instanceof Na){var i=e.databaseId,o=t.firestore._databaseId;if(!o.isEqual(i))throw e.oa("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Yn(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.oa("Unsupported field value: ".concat(Ia(t)))}(t,e)}function os(t,e){var n={};return vt(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pt(t,(function(t,r){var i=is(r,e.ea(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function as(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Q||t instanceof za||t instanceof ja||t instanceof Na||t instanceof qa)}function ss(t,e,n){if(!as(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=Ia(n);throw"an object"===r?e.oa(t+" a custom object"):e.oa(t+" "+r)}var i}function us(t,e,n){if((e=(0,b.getModularInstance)(e))instanceof Va)return e._internalPath;if("string"==typeof e)return ls(t,e);throw fs("Field path arguments must be of type string or ",t,!1,void 0,n)}var cs=new RegExp("[~\\*/\\[\\]]");function ls(t,n,r){if(n.search(cs)>=0)throw fs("Invalid field path (".concat(n,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,r);try{return e(s)(Va,e(p)(n.split(".")))._internalPath}catch(e){throw fs("Invalid field path (".concat(n,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,r)}}function fs(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function ".concat(e,"() called with invalid data");n&&(s+=" (via `toFirestore()`)"),s+=". ";var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field ".concat(r)),a&&(u+=" in document ".concat(i)),u+=")"),new R(M.INVALID_ARGUMENT,s+t+u)}function hs(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ds=function(){"use strict";function t(n,r,i,o,s){e(a)(this,t),this._firestore=n,this._userDataWriter=r,this._key=i,this._document=o,this._converter=s}return e(u)(t,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Na(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var t=new ps(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(t){if(this._document){var e=this._document.data.field(vs("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}]),t}(),ps=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(){return e(a)(this,r),n.apply(this,arguments)}return e(u)(r,[{key:"data",value:function(){return e(c)(e(l)(r.prototype),"data",this).call(this)}}]),r}(ds);function vs(t,e){return"string"==typeof e?ls(t,e):e instanceof Va?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys=function(){"use strict";function t(n,r){e(a)(this,t),this.hasPendingWrites=n,this.fromCache=r}return e(u)(t,[{key:"isEqual",value:function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}]),t}(),gs=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t,i,o,s,u,c){var l;return e(a)(this,r),(l=n.call(this,t,i,o,s,c))._firestore=t,l._firestoreImpl=t,l.metadata=u,e(h)(l)}return e(u)(r,[{key:"exists",value:function(){return e(c)(e(l)(r.prototype),"exists",this).call(this)}},{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var e=new ms(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}},{key:"get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(vs("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}]),r}(ds),ms=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(){return e(a)(this,r),n.apply(this,arguments)}return e(u)(r,[{key:"data",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(c)(e(l)(r.prototype),"data",this).call(this,t)}}]),r}(gs);
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ws=function(){"use strict";function t(){e(a)(this,t)}return e(u)(t,[{key:"convertValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Bt(t)){case 0:return null;case 1:return t.booleanValue;case 2:return St(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(It(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw N()}}},{key:"convertObject",value:function(t,e){var n=this,r={};return pt(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r}},{key:"convertGeoPoint",value:function(t){return new za(St(t.latitude),St(t.longitude))}},{key:"convertArray",value:function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))}},{key:"convertServerTimestamp",value:function(t,e){switch(e){case"previous":var n=At(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Lt(t));default:return null}}},{key:"convertTimestamp",value:function(t){var e=Tt(t);return new Q(e.seconds,e.nanos)}},{key:"convertDocumentKey",value:function(t,e){var n=J.fromString(t);D(vr(n));var r=new Dt(n.get(1),n.get(3)),i=new tt(n.popFirst(5));return r.isEqual(e)||C("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(e.projectId,"/").concat(e.database,") instead.")),i}}]),t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function bs(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ks(t){t=Ca(t,Na);var e=Ca(t.firestore,Pa);return Ea(Fa(e),t._key).then((function(n){return Ss(e,t,n)}))}var xs=function(t){"use strict";e(f)(r,t);var n=e(v)(r);function r(t){var i;return e(a)(this,r),(i=n.call(this)).firestore=t,e(h)(i)}return e(u)(r,[{key:"convertBytes",value:function(t){return new ja(t)}},{key:"convertReference",value:function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Na(this.firestore,null,e)}}]),r}(ws);function Es(t,e,n){t=Ca(t,Na);var r=Ca(t.firestore,Pa),i=bs(t.converter,e,n);return Ts(r,[Ja(Ya(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Ze.none())])}function _s(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];t=Ca(t,Na);var a=Ca(t.firestore,Pa),s=Ya(a);return Ts(a,[("string"==typeof(e=(0,b.getModularInstance)(e))||e instanceof Va?rs(s,"updateDoc",t._key,e,n,i):ns(s,"updateDoc",t._key,e)).toMutation(t._key,Ze.exists(!0))])}function Ts(t,n){return r=Fa(t),o=n,a=new P,r.asyncQueue.enqueueAndForget(e(i)(e(y).mark((function t(){return e(y).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Bo,t.next=3,ba(r);case 3:return t.t1=t.sent,t.t2=o,t.t3=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t3));case 7:case"end":return t.stop()}}),t)})))),a.promise;var r,o,a}function Ss(t,e,n){var r=n.docs.get(e._key),i=new xs(t);return new gs(t,i,e._key,r,new ys(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new ts("arrayUnion",e)}function Cs(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new es("arrayRemove",e)}!function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=g.SDK_VERSION,_=e,(0,g._registerComponent)(new(0,m.Component)("firestore",(function(t,e){var r=e.options,i=t.getProvider("app").getImmediate(),o=new Pa(i,new U(t.getProvider("auth-internal")),new z(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:n},r),o._setSettings(r),o}),"PUBLIC")),(0,g.registerVersion)(x,"3.4.14",t),(0,g.registerVersion)(x,"3.4.14","esm2017")}()})),o.register("ge8co",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,n){return a.apply(null,arguments)};var n,r=(n=o("gD1JV"))&&n.__esModule?n:{default:n};function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function a(t,e,n){return(a=i()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r.default(o,n.prototype),o}).apply(null,arguments)}})),o.register("jh8P3",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,n){return i(t,e,n)};var n,r=(n=o("2mz0K"))&&n.__esModule?n:{default:n};function i(t,e,n){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=r.default(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n||t):o.value}})(t,e,n)}})),o.register("2mz0K",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r.default(t)););return t};var n,r=(n=o("fVNic"))&&n.__esModule?n:{default:n}})),o.register("1t1Wn",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return n.default(t)||r.default(t,e)||a.default(t,e)||i.default()};var n=s(o("8slrw")),r=s(o("7AJDX")),i=s(o("ifqQW")),a=s(o("auk6i"));function s(t){return t&&t.__esModule?t:{default:t}}})),o.register("8slrw",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){if(Array.isArray(t))return t}})),o.register("7AJDX",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}})),o.register("ifqQW",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),o.register("auk6i",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){if(!t)return;if("string"==typeof t)return r.default(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r.default(t,e)};var n,r=(n=o("8NIkP"))&&n.__esModule?n:{default:n}})),o.register("8NIkP",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}})),o.register("8nrFW",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return n.default(t)||r.default(t)||a.default(t)||i.default()};var n=s(o("kMC0W")),r=s(o("7AJDX")),i=s(o("8CtQK")),a=s(o("auk6i"));function s(t){return t&&t.__esModule?t:{default:t}}})),o.register("kMC0W",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){if(Array.isArray(t))return r.default(t)};var n,r=(n=o("8NIkP"))&&n.__esModule?n:{default:n}})),o.register("8CtQK",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}})),o.register("MjY8E",(function(n,r){t(n.exports,"_registerComponent",(function(){return S})),t(n.exports,"_getProvider",(function(){return I})),t(n.exports,"_removeServiceInstance",(function(){return C})),t(n.exports,"SDK_VERSION",(function(){return D})),t(n.exports,"initializeApp",(function(){return O})),t(n.exports,"getApp",(function(){return M})),t(n.exports,"registerVersion",(function(){return R}));var i=o("bpxeT"),a=o("8MBJY"),s=o("a2hTj"),u=o("hKHmD"),c=o("8nrFW"),l=o("2TvXO"),f=o("6ExWU"),h=o("kZfxc"),d=o("2xDiJ"),p=o("ajgRO"),v=(d=o("2xDiJ"),function(){"use strict";function t(n){e(a)(this,t),this.container=n}return e(s)(t,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return"".concat(e.library,"/").concat(e.version)}return null})).filter((function(t){return t})).join(" ")}}]),t}());var y,g,m="@firebase/app",w="0.7.31",b=new(0,h.Logger)("@firebase/app"),k="[DEFAULT]",x=(y={},e(u)(y,m,"fire-core"),e(u)(y,"@firebase/app-compat","fire-core-compat"),e(u)(y,"@firebase/analytics","fire-analytics"),e(u)(y,"@firebase/analytics-compat","fire-analytics-compat"),e(u)(y,"@firebase/app-check","fire-app-check"),e(u)(y,"@firebase/app-check-compat","fire-app-check-compat"),e(u)(y,"@firebase/auth","fire-auth"),e(u)(y,"@firebase/auth-compat","fire-auth-compat"),e(u)(y,"@firebase/database","fire-rtdb"),e(u)(y,"@firebase/database-compat","fire-rtdb-compat"),e(u)(y,"@firebase/functions","fire-fn"),e(u)(y,"@firebase/functions-compat","fire-fn-compat"),e(u)(y,"@firebase/installations","fire-iid"),e(u)(y,"@firebase/installations-compat","fire-iid-compat"),e(u)(y,"@firebase/messaging","fire-fcm"),e(u)(y,"@firebase/messaging-compat","fire-fcm-compat"),e(u)(y,"@firebase/performance","fire-perf"),e(u)(y,"@firebase/performance-compat","fire-perf-compat"),e(u)(y,"@firebase/remote-config","fire-rc"),e(u)(y,"@firebase/remote-config-compat","fire-rc-compat"),e(u)(y,"@firebase/storage","fire-gcs"),e(u)(y,"@firebase/storage-compat","fire-gcs-compat"),e(u)(y,"@firebase/firestore","fire-fst"),e(u)(y,"@firebase/firestore-compat","fire-fst-compat"),e(u)(y,"fire-js","fire-js"),e(u)(y,"firebase","fire-js-all"),y),E=new Map,_=new Map;function T(t,e){try{t.container.addComponent(e)}catch(n){b.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function S(t){var e=t.name;if(_.has(e))return b.debug("There were multiple attempts to register component ".concat(e,".")),!1;_.set(e,t);var n=!0,r=!1,i=void 0;try{for(var o,a=E.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){T(o.value,t)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0}function I(t,e){var n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function C(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k;I(t,e).clearInstance(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var A=(g={},e(u)(g,"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),e(u)(g,"bad-app-name","Illegal App name: '{$appName}"),e(u)(g,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),e(u)(g,"app-deleted","Firebase App named '{$appName}' already deleted"),e(u)(g,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),e(u)(g,"invalid-log-argument","First argument to `onLog` must be null or a function."),e(u)(g,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),e(u)(g,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),e(u)(g,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),e(u)(g,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),g),L=new(0,d.ErrorFactory)("app","Firebase",A),N=function(){"use strict";function t(n,r,i){var o=this;e(a)(this,t),this._isDeleted=!1,this._options=Object.assign({},n),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new(0,f.Component)("app",(function(){return o}),"PUBLIC"))}return e(s)(t,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(t){this._isDeleted=t}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw L.create("app-deleted",{appName:this._name})}}]),t}(),D="9.9.3";function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!=typeof e){var n=e;e={name:n}}var r=Object.assign({name:k,automaticDataCollectionEnabled:!1},e),i=r.name;if("string"!=typeof i||!i)throw L.create("bad-app-name",{appName:String(i)});var o=E.get(i);if(o){if((0,d.deepEqual)(t,o.options)&&(0,d.deepEqual)(r,o.config))return o;throw L.create("duplicate-app",{appName:i})}var a=new(0,f.ComponentContainer)(i),s=!0,u=!1,c=void 0;try{for(var l,h=_.values()[Symbol.iterator]();!(s=(l=h.next()).done);s=!0){var p=l.value;a.addComponent(p)}}catch(t){u=!0,c=t}finally{try{s||null==h.return||h.return()}finally{if(u)throw c}}var v=new N(t,r,a);return E.set(i,v),v}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=E.get(t);if(!e)throw L.create("no-app",{appName:t});return e}function R(t,e,n){var r,i=null!==(r=x[t])&&void 0!==r?r:t;n&&(i+="-".concat(n));var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var s=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&s.push("and"),a&&s.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),void b.warn(s.join(" "))}S(new(0,f.Component)("".concat(i,"-version"),(function(){return{library:i,version:e}}),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var P="firebase-heartbeat-store",B=null;function F(){return B||(B=(0,p.openDB)("firebase-heartbeat-database",1,{upgrade:function(t,e){if(0===e)t.createObjectStore(P)}}).catch((function(t){throw L.create("idb-open",{originalErrorMessage:t.message})}))),B}function U(t){return V.apply(this,arguments)}function V(){return(V=e(i)(e(l).mark((function t(n){var r,i,o;return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,F();case 4:return i=t.sent,t.abrupt("return",i.transaction(P).objectStore(P).get(z(n)));case 8:t.prev=8,t.t0=t.catch(1),t.t0 instanceof d.FirebaseError?b.warn(t.t0.message):(o=L.create("idb-get",{originalErrorMessage:null===(r=t.t0)||void 0===r?void 0:r.message}),b.warn(o.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}function j(t,e){return q.apply(this,arguments)}function q(){return(q=e(i)(e(l).mark((function t(n,r){var i,o,a,s,u;return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,F();case 4:return o=t.sent,a=o.transaction(P,"readwrite"),s=a.objectStore(P),t.next=9,s.put(r,z(n));case 9:return t.abrupt("return",a.done);case 12:t.prev=12,t.t0=t.catch(1),t.t0 instanceof d.FirebaseError?b.warn(t.t0.message):(u=L.create("idb-set",{originalErrorMessage:null===(i=t.t0)||void 0===i?void 0:i.message}),b.warn(u.message));case 15:case"end":return t.stop()}}),t,null,[[1,12]])})))).apply(this,arguments)}function z(t){return"".concat(t.name,"!").concat(t.options.appId)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var H=function(){"use strict";function t(n){var r=this;e(a)(this,t),this.container=n,this._heartbeatsCache=null;var i=this.container.getProvider("app").getImmediate();this._storage=new Q(i),this._heartbeatsCachePromise=this._storage.read().then((function(t){return r._heartbeatsCache=t,t}))}return e(s)(t,[{key:"triggerHeartbeat",value:function(){var t=this;return e(i)(e(l).mark((function n(){var r,i,o;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.container.getProvider("platform-logger").getImmediate(),i=r.getPlatformInfoString(),o=W(),null!==t._heartbeatsCache){e.next=7;break}return e.next=6,t._heartbeatsCachePromise;case 6:t._heartbeatsCache=e.sent;case 7:if(t._heartbeatsCache.lastSentHeartbeatDate!==o&&!t._heartbeatsCache.heartbeats.some((function(t){return t.date===o}))){e.next=11;break}return e.abrupt("return");case 11:t._heartbeatsCache.heartbeats.push({date:o,agent:i});case 12:return t._heartbeatsCache.heartbeats=t._heartbeatsCache.heartbeats.filter((function(t){var e=new Date(t.date).valueOf();return Date.now()-e<=2592e6})),e.abrupt("return",t._storage.overwrite(t._heartbeatsCache));case 14:case"end":return e.stop()}}),n)})))()}},{key:"getHeartbeatsHeader",value:function(){var t=this;return e(i)(e(l).mark((function n(){var r,i,o,a,s;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==t._heartbeatsCache){e.next=3;break}return e.next=3,t._heartbeatsCachePromise;case 3:if(null!==t._heartbeatsCache&&0!==t._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(r=W(),i=K(t._heartbeatsCache.heartbeats),o=i.heartbeatsToSend,a=i.unsentEntries,s=(0,d.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:o})),t._heartbeatsCache.lastSentHeartbeatDate=r,!(a.length>0)){e.next=15;break}return t._heartbeatsCache.heartbeats=a,e.next=13,t._storage.overwrite(t._heartbeatsCache);case 13:e.next=16;break;case 15:t._heartbeatsCache.heartbeats=[],t._storage.overwrite(t._heartbeatsCache);case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),n)})))()}}]),t}();function W(){return(new Date).toISOString().substring(0,10)}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=[],r=t.slice(),i=!0,o=!1,a=void 0;try{for(var s,u=function(t,i){var o=i.value,a=n.find((function(t){return t.agent===o.agent}));if(a){if(a.dates.push(o.date),X(n)>e)return a.dates.pop(),"break"}else if(n.push({agent:o.agent,dates:[o.date]}),X(n)>e)return n.pop(),"break";r=r.slice(1)},c=t[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var l=u(c,s);if("break"===l)break}}catch(t){o=!0,a=t}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{heartbeatsToSend:n,unsentEntries:r}}var G,Q=function(){"use strict";function t(n){e(a)(this,t),this.app=n,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return e(s)(t,[{key:"runIndexedDBEnvironmentCheck",value:function(){return e(i)(e(l).mark((function t(){return e(l).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((0,d.isIndexedDBAvailable)()){t.next=4;break}return t.abrupt("return",!1);case 4:return t.abrupt("return",(0,d.validateIndexedDBOpenable)().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return t.stop()}}),t)})))()}},{key:"read",value:function(){var t=this;return e(i)(e(l).mark((function n(){var r;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,U(t.app);case 9:return r=e.sent,e.abrupt("return",r||{heartbeats:[]});case 11:case"end":return e.stop()}}),n)})))()}},{key:"overwrite",value:function(t){var n=this;return e(i)(e(l).mark((function r(){var i,o;return e(l).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,n._canUseIndexedDBPromise;case 3:if(e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,n.read();case 10:return o=e.sent,e.abrupt("return",j(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 12:case"end":return e.stop()}}),r)})))()}},{key:"add",value:function(t){var n=this;return e(i)(e(l).mark((function r(){var i,o;return e(l).wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=3,n._canUseIndexedDBPromise;case 3:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,n.read();case 10:return o=r.sent,r.abrupt("return",j(n.app,{lastSentHeartbeatDate:null!==(i=t.lastSentHeartbeatDate)&&void 0!==i?i:o.lastSentHeartbeatDate,heartbeats:e(c)(o.heartbeats).concat(e(c)(t.heartbeats))}));case 12:case"end":return r.stop()}}),r)})))()}}]),t}();function X(t){return(0,d.base64urlEncodeWithoutPadding)(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */G="",S(new(0,f.Component)("platform-logger",(function(t){return new v(t)}),"PRIVATE")),S(new(0,f.Component)("heartbeat",(function(t){return new H(t)}),"PRIVATE")),R(m,w,G),R(m,w,"esm2017"),R("fire-js","")})),o.register("6ExWU",(function(n,r){t(n.exports,"Component",(function(){return h})),t(n.exports,"ComponentContainer",(function(){return v}));var i=o("bpxeT"),a=o("8MBJY"),s=o("a2hTj"),u=o("1t1Wn"),c=o("8nrFW"),l=o("2TvXO"),f=o("2xDiJ"),h=function(){"use strict";function t(n,r,i){e(a)(this,t),this.name=n,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e(s)(t,[{key:"setInstantiationMode",value:function(t){return this.instantiationMode=t,this}},{key:"setMultipleInstances",value:function(t){return this.multipleInstances=t,this}},{key:"setServiceProps",value:function(t){return this.serviceProps=t,this}},{key:"setInstanceCreatedCallback",value:function(t){return this.onInstanceCreated=t,this}}]),t}(),d="[DEFAULT]",p=function(){"use strict";function t(n,r){e(a)(this,t),this.name=n,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return e(s)(t,[{key:"get",value:function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new(0,f.Deferred);if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise}},{key:"getImmediate",value:function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(t){if(t.name!==this.name)throw Error("Mismatching Component ".concat(t.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:d})}catch(t){}var n=!0,r=!1,i=void 0;try{for(var o,a=this.instancesDeferred.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=e(u)(o.value,2),c=s[0],l=s[1],f=this.normalizeInstanceIdentifier(c);try{var h=this.getOrInitializeService({instanceIdentifier:f});l.resolve(h)}catch(t){}}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}}},{key:"clearInstance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}},{key:"delete",value:function(){var t=this;return e(i)(e(l).mark((function n(){var r;return e(l).wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=Array.from(t.instances.values()),n.next=3,Promise.all(e(c)(r.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()}))).concat(e(c)(r.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))));case 3:case"end":return n.stop()}}),n)})))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instances.has(t)}},{key:"getOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.instancesOptions.get(t)||{}}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var o=this.getOrInitializeService({instanceIdentifier:i,options:r}),a=!0,s=!1,c=void 0;try{for(var l,f=this.instancesDeferred.entries()[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var h=e(u)(l.value,2),d=h[0],p=h[1],v=this.normalizeInstanceIdentifier(d);i===v&&p.resolve(o)}}catch(t){s=!0,c=t}finally{try{a||null==f.return||f.return()}finally{if(s)throw c}}return o}},{key:"onInit",value:function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}}},{key:"invokeOnInitCallbacks",value:function(t,e){var n=this.onInitCallbacks.get(e);if(n){var r=!0,i=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;try{u(t,e)}catch(t){}}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}}},{key:"getOrInitializeService",value:function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===d?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;return this.component?this.component.multipleInstances?t:d:t}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),t}();var v=function(){"use strict";function t(n){e(a)(this,t),this.name=n,this.providers=new Map}return e(s)(t,[{key:"addComponent",value:function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component ".concat(t.name," has already been registered with ").concat(this.name));e.setComponent(t)}},{key:"addOrOverwriteComponent",value:function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}},{key:"getProvider",value:function(t){if(this.providers.has(t))return this.providers.get(t);var e=new p(t,this);return this.providers.set(t,e),e}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),t}()})),o.register("2xDiJ",(function(r,i){t(r.exports,"base64urlEncodeWithoutPadding",(function(){return v})),t(r.exports,"base64Decode",(function(){return y})),t(r.exports,"Deferred",(function(){return g})),t(r.exports,"createMockUserToken",(function(){return m})),t(r.exports,"getUA",(function(){return w})),t(r.exports,"isMobileCordova",(function(){return b})),t(r.exports,"isBrowserExtension",(function(){return k})),t(r.exports,"isReactNative",(function(){return x})),t(r.exports,"isElectron",(function(){return E})),t(r.exports,"isIE",(function(){return _})),t(r.exports,"isUWP",(function(){return T})),t(r.exports,"isSafari",(function(){return S})),t(r.exports,"isIndexedDBAvailable",(function(){return I})),t(r.exports,"validateIndexedDBOpenable",(function(){return C})),t(r.exports,"FirebaseError",(function(){return A})),t(r.exports,"ErrorFactory",(function(){return L})),t(r.exports,"isEmpty",(function(){return O})),t(r.exports,"deepEqual",(function(){return M})),t(r.exports,"querystring",(function(){return P})),t(r.exports,"querystringDecode",(function(){return B})),t(r.exports,"extractQuerystring",(function(){return F})),t(r.exports,"createSubscribe",(function(){return U})),t(r.exports,"getModularInstance",(function(){return q}));var a=o("ds8z5"),s=o("8MBJY"),u=o("a2hTj"),c=o("eYQtU"),l=o("1t1Wn"),f=(o("8nrFW"),o("4c7YB")),h=o("2MbLg"),d=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},p={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,f=(3&o)<<4|s>>4,h=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(d(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{var s=t[n++],u=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&u)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var f=s<<6&192|u;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},v=function(t){return function(t){var e=d(t);return p.encodeByteArray(e,!0)}(t).replace(/\./g,"")},y=function(t){try{return p.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var g=function(){"use strict";function t(){var n=this;e(s)(this,t),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,e){n.resolve=t,n.reject=e}))}return e(u)(t,[{key:"wrapCallback",value:function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}}}]),t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[v(JSON.stringify({alg:"none",type:"JWT"})),v(JSON.stringify(o)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function b(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(w())}function k(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function x(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function E(){return w().indexOf("Electron/")>=0}function _(){var t=w();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T(){return w().indexOf("MSAppHost/")>=0}function S(){return!function(){try{return"[object process]"===Object.prototype.toString.call(n.process)}catch(t){return!1}}()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return"object"==typeof indexedDB}function C(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var A=function(t){"use strict";e(c)(r,t);var n=e(h)(r);function r(t,i,o){var u;return e(s)(this,r),(u=n.call(this,i)).code=t,u.customData=o,u.name="FirebaseError",Object.setPrototypeOf(e(a)(u),r.prototype),Error.captureStackTrace&&Error.captureStackTrace(e(a)(u),L.prototype.create),u}return r}(e(f)(Error)),L=function(){"use strict";function t(n,r,i){e(s)(this,t),this.service=n,this.serviceName=r,this.errors=i}return e(u)(t,[{key:"create",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=n[0]||{},o="".concat(this.service,"/").concat(t),a=this.errors[t],s=a?N(a,i):"Error",u="".concat(this.serviceName,": ").concat(s," (").concat(o,")."),c=new A(o,u,i);return c}}]),t}();function N(t,e){return t.replace(D,(function(t,n){var r=e[n];return null!=r?String(r):"<".concat(n,"?>")}))}var D=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function M(t,e){if(t===e)return!0;var n=Object.keys(t),r=Object.keys(e),i=!0,o=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var c=s.value;if(!r.includes(c))return!1;var l=t[c],f=e[c];if(R(l)&&R(f)){if(!M(l,f))return!1}else if(l!==f)return!1}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}var h=!0,d=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var g=v.value;if(!n.includes(g))return!1}}catch(t){d=!0,p=t}finally{try{h||null==y.return||y.return()}finally{if(d)throw p}}return!0}function R(t){return null!==t&&"object"==typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function P(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=function(t,r){var i=e(l)(r.value,2),o=i[0],a=i[1];Array.isArray(a)?a.forEach((function(t){n.push(encodeURIComponent(o)+"="+encodeURIComponent(t))})):n.push(encodeURIComponent(o)+"="+encodeURIComponent(a))},u=Object.entries(t)[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)s(0,a)}catch(t){i=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n.length?"&"+n.join("&"):""}function B(t){var n={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var r=e(l)(t.split("="),2),i=r[0],o=r[1];n[decodeURIComponent(i)]=decodeURIComponent(o)}})),n}function F(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(t,e){var n=new V(t,e);return n.subscribe.bind(n)}var V=function(){"use strict";function t(n,r){var i=this;e(s)(this,t),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then((function(){n(i)})).catch((function(t){i.error(t)}))}return e(u)(t,[{key:"next",value:function(t){this.forEachObserver((function(e){e.next(t)}))}},{key:"error",value:function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)}},{key:"complete",value:function(){this.forEachObserver((function(t){t.complete()})),this.close()}},{key:"subscribe",value:function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s in t&&"function"==typeof t[s])return!0}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=j),void 0===r.error&&(r.error=j),void 0===r.complete&&(r.complete=j);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)}},{key:"sendOne",value:function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))}},{key:"close",value:function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))}}]),t}();function j(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(t){return t&&t._delegate?t._delegate:t}})),o.register("4c7YB",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return u(t)};var n=s(o("ge8co")),r=s(o("cZGw3")),i=s(o("fVNic")),a=s(o("gD1JV"));function s(t){return t&&t.__esModule?t:{default:t}}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||!r.default(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return n.default(t,arguments,i.default(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),a.default(o,t)},u(t)}})),o.register("cZGw3",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}})),o.register("kZfxc",(function(n,r){t(n.exports,"LogLevel",(function(){return i})),t(n.exports,"Logger",(function(){return g})),t(n.exports,"setLogLevel",(function(){return m})),t(n.exports,"setUserLogHandler",(function(){return w}));var i,a,s=o("8MBJY"),u=o("a2hTj"),c=o("hKHmD"),l=o("8nrFW"),f=[];(a=i||(i={}))[a.DEBUG=0]="DEBUG",a[a.VERBOSE=1]="VERBOSE",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.SILENT=5]="SILENT";var h,d={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},p=i.INFO,v=(h={},e(c)(h,i.DEBUG,"log"),e(c)(h,i.VERBOSE,"log"),e(c)(h,i.INFO,"info"),e(c)(h,i.WARN,"warn"),e(c)(h,i.ERROR,"error"),h),y=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];var a;if(!(n<t.logLevel)){var s=(new Date).toISOString(),u=v[n];if(!u)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(n,")"));(a=console)[u].apply(a,["[".concat(s,"]  ").concat(t.name,":")].concat(e(l)(i)))}},g=function(){"use strict";function t(n){e(s)(this,t),this.name=n,this._logLevel=p,this._logHandler=y,this._userLogHandler=null,f.push(this)}return e(u)(t,[{key:"logLevel",get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError('Invalid value "'.concat(t,'" assigned to `logLevel`'));this._logLevel=t}},{key:"setLogLevel",value:function(t){this._logLevel="string"==typeof t?d[t]:t}},{key:"logHandler",get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t}},{key:"debug",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.DEBUG].concat(e(l)(n))),this._logHandler.apply(this,[this,i.DEBUG].concat(e(l)(n)))}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.VERBOSE].concat(e(l)(n))),this._logHandler.apply(this,[this,i.VERBOSE].concat(e(l)(n)))}},{key:"info",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.INFO].concat(e(l)(n))),this._logHandler.apply(this,[this,i.INFO].concat(e(l)(n)))}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.WARN].concat(e(l)(n))),this._logHandler.apply(this,[this,i.WARN].concat(e(l)(n)))}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler.apply(this,[this,i.ERROR].concat(e(l)(n))),this._logHandler.apply(this,[this,i.ERROR].concat(e(l)(n)))}}]),t}();function m(t){f.forEach((function(e){e.setLogLevel(t)}))}function w(t,e){var n=!0,r=!1,o=void 0;try{for(var a,s=f[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var u=a.value,c=null;e&&e.level&&(c=d[e.level]),u.userLogHandler=null===t?null:function(e,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=c?c:e.logLevel)&&t({level:i[n].toLowerCase(),message:s,args:o,type:e.name})}}}catch(t){r=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}}})),o.register("ajgRO",(function(n,r){t(n.exports,"openDB",(function(){return l}));var i=o("bpxeT"),a=o("dDDEV"),s=o("8nrFW"),u=o("2TvXO"),c=o("kKOTz");c=o("kKOTz");function l(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,o=n.blocking,a=n.terminated,s=indexedDB.open(t,e),u=(0,c.w)(s);return i&&s.addEventListener("upgradeneeded",(function(t){i((0,c.w)(s.result),t.oldVersion,t.newVersion,(0,c.w)(s.transaction))})),r&&s.addEventListener("blocked",(function(){return r()})),u.then((function(t){a&&t.addEventListener("close",(function(){return a()})),o&&t.addEventListener("versionchange",(function(){return o()}))})).catch((function(){})),u}var f=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],d=new Map;function p(t,n){if(t instanceof IDBDatabase&&!(n in t)&&"string"==typeof n){if(d.get(n))return d.get(n);var r=n.replace(/FromIndex$/,""),o=n!==r,a=h.includes(r);if(r in(o?IDBIndex:IDBObjectStore).prototype&&(a||f.includes(r))){var c,l=(c=e(i)(e(u).mark((function t(n){var i,c,l,f,h,d,p=arguments;return e(u).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=p.length,c=new Array(i>1?i-1:0),l=1;l<i;l++)c[l-1]=p[l];return h=this.transaction(n,a?"readwrite":"readonly"),d=h.store,o&&(d=d.index(c.shift())),t.next=7,Promise.all([(f=d)[r].apply(f,e(s)(c)),a&&h.done]);case 7:return t.abrupt("return",t.sent[0]);case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)});return d.set(n,l),l}}}(0,c.r)((function(t){return e(a)({},t,{get:function(e,n,r){return p(e,n)||t.get(e,n,r)},has:function(e,n){return!!p(e,n)||t.has(e,n)}})}))})),o.register("kKOTz",(function(n,r){t(n.exports,"w",(function(){return g})),t(n.exports,"r",(function(){return p}));var i,a,s=o("8nrFW");var u=new WeakMap,c=new WeakMap,l=new WeakMap,f=new WeakMap,h=new WeakMap;var d={get:function(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return c.get(t);if("objectStoreNames"===e)return t.objectStoreNames||l.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(t[e])},set:function(t,e,n){return t[e]=n,!0},has:function(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function p(t){d=t(d)}function v(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.apply(m(this),n),g(u.get(this))}:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return g(t.apply(m(this),n))}:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a,u=(a=t).call.apply(a,[m(this),n].concat(e(s)(i)));return l.set(u,n.sort?n.sort():[n]),g(u)}}function y(t){return"function"==typeof t?v(t):(t instanceof IDBTransaction&&function(t){if(!c.has(t)){var e=new Promise((function(e,n){var r=function(){t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=function(){e(),r()},o=function(){n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)}));c.set(t,e)}}(t),e=t,(i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(t){return e instanceof t}))?new Proxy(t,d):t);var e}function g(t){if(t instanceof IDBRequest)return e=t,(n=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",o)},i=function(){t(g(e.result)),r()},o=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}))).then((function(t){t instanceof IDBCursor&&u.set(t,e)})).catch((function(){})),h.set(n,e),n;var e,n;if(f.has(t))return f.get(t);var r=y(t);return r!==t&&(f.set(t,r),h.set(r,t)),r}var m=function(t){return h.get(t)}})),o.register("6RwJk",(function(r,i){t(r.exports,"createWebChannelTransport",(function(){return mr})),t(r.exports,"getStatEventTarget",(function(){return wr})),t(r.exports,"ErrorCode",(function(){return br})),t(r.exports,"EventType",(function(){return kr})),t(r.exports,"Event",(function(){return xr})),t(r.exports,"Stat",(function(){return Er})),t(r.exports,"FetchXmlHttpFactory",(function(){return _r})),t(r.exports,"WebChannel",(function(){return Tr})),t(r.exports,"XhrIo",(function(){return Sr}));var a,s=o("8MBJY"),u=o("a2hTj"),c=o("jh8P3"),l=o("fVNic"),f=o("eYQtU"),h=o("l5bVx"),d=o("2MbLg"),p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},v={},y=y||{},g=p||self;function m(){}function w(t){var n=void 0===t?"undefined":e(h)(t);return"array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length}function b(t){var n=void 0===t?"undefined":e(h)(t);return"object"==n&&null!=t||"function"==n}var k="closure_uid_"+(1e9*Math.random()>>>0),x=0;function E(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function T(t,e,n){return(T=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?E:_).apply(null,arguments)}function S(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(){this.s=this.s,this.o=this.o}var A={};C.prototype.s=!1,C.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,k)&&t[k]||(t[k]=++x)}(this);delete A[t]}},C.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var L=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},N=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function D(t){return Array.prototype.concat.apply([],arguments)}function O(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function M(t){return/^[\s\xa0]*$/.test(t)}var R,P=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function B(t,e){return-1!=t.indexOf(e)}function F(t,e){return t<e?-1:t>e?1:0}t:{var U=g.navigator;if(U){var V=U.userAgent;if(V){R=V;break t}}R=""}function j(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function q(t){var e={};for(var n in t)e[n]=t[n];return e}var z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<z.length;o++)n=z[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function W(t){return W[" "](t),t}W[" "]=m;var K,G,Q=B(R,"Opera"),X=B(R,"Trident")||B(R,"MSIE"),Y=B(R,"Edge"),J=Y||X,$=B(R,"Gecko")&&!(B(R.toLowerCase(),"webkit")&&!B(R,"Edge"))&&!(B(R,"Trident")||B(R,"MSIE"))&&!B(R,"Edge"),Z=B(R.toLowerCase(),"webkit")&&!B(R,"Edge");function tt(){var t=g.document;return t?t.documentMode:void 0}t:{var et="",nt=(G=R,$?/rv:([^\);]+)(\)|;)/.exec(G):Y?/Edge\/([\d\.]+)/.exec(G):X?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(G):Z?/WebKit\/(\S+)/.exec(G):Q?/(?:Version)[ \/]?(\S+)/.exec(G):void 0);if(nt&&(et=nt?nt[1]:""),X){var rt=tt();if(null!=rt&&rt>parseFloat(et)){K=String(rt);break t}}K=et}var it,ot={};function at(){return function(t){var e=ot;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=P(String(K)).split("."),n=P("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=F(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||F(0==o[2].length,0==a[2].length)||F(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(g.document&&X){var st=tt();it=st||(parseInt(K,10)||void 0)}else it=void 0;var ut=it,ct=function(){if(!g.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{g.addEventListener("test",m,e),g.removeEventListener("test",m,e)}catch(t){}return t}();function lt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ft(t,e){if(lt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if($){t:{try{W(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ht[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ft.Z.h.call(this)}}lt.prototype.h=function(){this.defaultPrevented=!0},I(ft,lt);var ht={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var dt="closure_listenable_"+(1e6*Math.random()|0),pt=0;function vt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++pt,this.ca=this.fa=!1}function yt(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function gt(t){this.src=t,this.g={},this.h=0}function mt(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=L(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(yt(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function wt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}gt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=wt(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new vt(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var bt="closure_lm_"+(1e6*Math.random()|0),kt={};function xt(t,e,n,r,i){if(r&&r.once)return _t(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xt(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[dt]?t.N(e,n,b(r)?!!r.capture:!!r,i):Et(t,e,n,!1,r,i)}function Et(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=b(i)?!!i.capture:!!i,s=At(t);if(s||(t[bt]=s=new gt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Ct;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ct||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(It(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function _t(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)_t(t,e[o],n,r,i);return null}return n=Nt(n),t&&t[dt]?t.O(e,n,b(r)?!!r.capture:!!r,i):Et(t,e,n,!0,r,i)}function Tt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Tt(t,e[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=Nt(n),t&&t[dt]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=wt(o=t.g[e],n,r,i))&&(yt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=At(t))&&(e=t.g[e.toString()],t=-1,e&&(t=wt(e,n,r,i)),(n=-1<t?e[t]:null)&&St(n))}function St(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[dt])mt(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(It(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=At(e))?(mt(n,t),0==n.h&&(n.src=null,e[bt]=null)):yt(t)}}}function It(t){return t in kt?kt[t]:kt[t]="on"+t}function Ct(t,e){if(t.ca)t=!0;else{e=new ft(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&St(t),t=n.call(r,e)}return t}function At(t){return(t=t[bt])instanceof gt?t:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nt(t){return"function"==typeof t?t:(t[Lt]||(t[Lt]=function(e){return t.handleEvent(e)}),t[Lt])}function Dt(){C.call(this),this.i=new gt(this),this.P=this,this.I=null}function Ot(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new lt(e,t);else if(e instanceof lt)e.target=e.target||t;else{var i=e;H(e=new lt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Mt(a,r,!0,e)&&i}if(i=Mt(a=e.g=t,r,!0,e)&&i,i=Mt(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Mt(a=e.g=n[o],r,!1,e)&&i}function Mt(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&mt(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}I(Dt,C),Dt.prototype[dt]=!0,Dt.prototype.removeEventListener=function(t,e,n,r){Tt(this,t,e,n,r)},Dt.prototype.M=function(){if(Dt.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)yt(n[r]);delete e.g[t],e.h--}}this.I=null},Dt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Dt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Rt=g.JSON.stringify;function Pt(){var t=Ht,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Bt,Ft=function(){"use strict";function t(){e(s)(this,t),this.h=this.g=null}return e(u)(t,[{key:"add",value:function(t,e){var n=Ut.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}]),t}(),Ut=new(function(){"use strict";function t(n,r){e(s)(this,t),this.i=n,this.j=r,this.h=0,this.g=null}return e(u)(t,[{key:"get",value:function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}]),t}())((function(){return new Vt}),(function(t){return t.reset()})),Vt=function(){"use strict";function t(){e(s)(this,t),this.next=this.g=this.h=null}return e(u)(t,[{key:"set",value:function(t,e){this.h=t,this.g=e,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),t}();function jt(t){g.setTimeout((function(){throw t}),0)}function qt(t,e){Bt||function(){var t=g.Promise.resolve(void 0);Bt=function(){t.then(Wt)}}(),zt||(Bt(),zt=!0),Ht.add(t,e)}var zt=!1,Ht=new Ft;function Wt(){for(var t;t=Pt();){try{t.h.call(t.g)}catch(t){jt(t)}var e=Ut;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}zt=!1}function Kt(t,e){Dt.call(this),this.h=t||1,this.g=e||g,this.j=T(this.kb,this),this.l=Date.now()}function Gt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Qt(t,e,n){if("function"==typeof t)n&&(t=T(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=T(t.handleEvent,t)}return 2147483647<Number(e)?-1:g.setTimeout(t,e||0)}function Xt(t){t.g=Qt((function(){t.g=null,t.i&&(t.i=!1,Xt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}I(Kt,Dt),(a=Kt.prototype).da=!1,a.S=null,a.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Ot(this,"tick"),this.da&&(Gt(this),this.start()))}},a.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},a.M=function(){Kt.Z.M.call(this),Gt(this),delete this.g};var Yt=function(t){"use strict";e(f)(r,t);var n=e(d)(r);function r(t,i){var o;return e(s)(this,r),(o=n.call(this)).m=t,o.j=i,o.h=null,o.i=!1,o.g=null,o}return e(u)(r,[{key:"l",value:function(t){this.h=arguments,this.g?this.i=!0:Xt(this)}},{key:"M",value:function(){e(c)(e(l)(r.prototype),"M",this).call(this),this.g&&(g.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),r}(C);function Jt(t){C.call(this),this.h=t,this.g={}}I(Jt,C);var $t=[];function Zt(t,e,n,r){Array.isArray(n)||(n&&($t[0]=n.toString()),n=$t);for(var i=0;i<n.length;i++){var o=xt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function te(t){j(t.g,(function(t,e){this.g.hasOwnProperty(e)&&St(t)}),t),t.g={}}function ee(){this.g=!0}function ne(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Rt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Jt.prototype.M=function(){Jt.Z.M.call(this),te(this)},Jt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ee.prototype.Aa=function(){this.g=!1},ee.prototype.info=function(){};var re={},ie=null;function oe(){return ie=ie||new Dt}function ae(t){lt.call(this,re.Ma,t)}function se(t){var e=oe();Ot(e,new ae(e,t))}function ue(t,e){lt.call(this,re.STAT_EVENT,t),this.stat=e}function ce(t){var e=oe();Ot(e,new ue(e,t))}function le(t,e){lt.call(this,re.Na,t),this.size=e}function fe(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return g.setTimeout((function(){t()}),e)}re.Ma="serverreachability",I(ae,lt),re.STAT_EVENT="statevent",I(ue,lt),re.Na="timingevent",I(le,lt);var he={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},de={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function pe(){}function ve(t){return t.h||(t.h=t.i())}function ye(){}pe.prototype.h=null;var ge,me={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function we(){lt.call(this,"d")}function be(){lt.call(this,"c")}function ke(){}function xe(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Jt(this),this.P=_e,t=J?125:void 0,this.W=new Kt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ee}function Ee(){this.i=null,this.g="",this.h=!1}I(we,lt),I(be,lt),I(ke,pe),ke.prototype.g=function(){return new XMLHttpRequest},ke.prototype.i=function(){return{}},ge=new ke;var _e=45e3,Te={},Se={};function Ie(t,e,n){t.K=1,t.v=Ye(He(e)),t.s=n,t.U=!0,Ce(t,null)}function Ce(t,e){t.F=Date.now(),De(t),t.A=He(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),ln(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ee,t.g=fr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Yt(T(t.Ia,t,t.g),t.O)),Zt(t.V,t.g,"readystatechange",t.gb),e=t.H?q(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),se(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");a=2<=f.length&&"type"==f[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Ae(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Le(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Ne(t,n))==Se){4==e&&(t.o=4,ce(14),i=!1),ne(t.j,t.m,null,"[Incomplete Response]");break}if(r==Te){t.o=4,ce(15),ne(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ne(t.j,t.m,r,null),Be(t,r)}Ae(t)&&r!=Se&&r!=Te&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,ce(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),rr(e),e.L=!0,ce(11))):(ne(t.j,t.m,n,"[Invalid Chunked Response]"),Pe(t),Re(t))}function Ne(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Se:(n=Number(e.substring(n,r)),isNaN(n)?Te:(r+=1)+n>e.length?Se:(e=e.substr(r,n),t.C=r+n,e))}function De(t){t.Y=Date.now()+t.P,Oe(t,t.P)}function Oe(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=fe(T(t.eb,t),e)}function Me(t){t.B&&(g.clearTimeout(t.B),t.B=null)}function Re(t){0==t.l.G||t.I||ar(t.l,t)}function Pe(t){Me(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Gt(t.W),te(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Be(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||gn(n.i,t)))if(n.I=t.N,!t.J&&gn(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;or(n),Qn(n)}nr(n),ce(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=fe(T(n.ab,n),6e3));if(1>=yn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else ur(n,11)}else if((t.J||n.g==t)&&or(n),!M(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(B(l,"spdy")||B(l,"quic")||B(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(mn(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.sa=h,Xe(r.F,r.D,h))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=lr(r,r.H?r.la:null,r.W),d.J){wn(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Me(p),De(p)),r.g=d}else er(r);0<n.l.length&&Jn(n)}else"stop"!=o[0]&&"close"!=o[0]||ur(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?ur(n,7):Gn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}se(4)}catch(o){}}function Fe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(w(t)||"string"==typeof t)N(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(w(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(w(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ue(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ue)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ve(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];je(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)je(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function je(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(a=xe.prototype).setTimeout=function(t){this.P=t},a.gb=function(t){t=t.target;var e=this.L;e&&3==qn(t)?e.l():this.Ia(t)},a.Ia=function(t){try{if(t==this.g)t:{var e=qn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||J||this.g&&(this.h.h||this.g.ga()||zn(this.g)))){this.I||4!=e||7==n||se(8==n||0>=r?3:2),Me(this);var i=this.g.ba();this.N=i;e:if(Ae(this)){var o=zn(this.g);t="";var a=o.length,s=4==qn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Pe(this),Re(this);var u="";break e}this.h.i=new g.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!M(c)){var f=c;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,ce(12),Pe(this),Re(this);break t}ne(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Be(this,i)}this.U?(Le(this,e,u),J&&this.i&&3==e&&(Zt(this.V,this.W,"tick",this.fb),this.W.start())):(ne(this.j,this.m,u,null),Be(this,u)),4==e&&Pe(this),this.i&&!this.I&&(4==e?ar(this.l,this):(this.i=!1,De(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,ce(12)):(this.o=0,ce(13)),Pe(this),Re(this)}}}catch(e){}},a.fb=function(){if(this.g){var t=qn(this.g),e=this.g.ga();this.C<e.length&&(Me(this),Le(this,t,e),this.i&&4!=t&&De(this))}},a.cancel=function(){this.I=!0,Pe(this)},a.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(se(3),ce(17)),Pe(this),this.o=2,Re(this)):Oe(this,this.Y-t)},(a=Ue.prototype).R=function(){Ve(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},a.T=function(){return Ve(this),this.g.concat()},a.get=function(t,e){return je(this.h,t)?this.h[t]:e},a.set=function(t,e){je(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},a.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var qe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ze(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof ze){this.g=void 0!==e?e:t.g,We(this,t.j),this.s=t.s,Ke(this,t.i),Ge(this,t.m),this.l=t.l,e=t.h;var n=new an;n.i=e.i,e.g&&(n.g=new Ue(e.g),n.h=e.h),Qe(this,n),this.o=t.o}else t&&(n=String(t).match(qe))?(this.g=!!e,We(this,n[1]||"",!0),this.s=Je(n[2]||""),Ke(this,n[3]||"",!0),Ge(this,n[4]),this.l=Je(n[5]||"",!0),Qe(this,n[6]||"",!0),this.o=Je(n[7]||"")):(this.g=!!e,this.h=new an(null,this.g))}function He(t){return new ze(t)}function We(t,e,n){t.j=n?Je(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ke(t,e,n){t.i=n?Je(e,!0):e}function Ge(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Qe(t,e,n){e instanceof an?(t.h=e,function(t,e){e&&!t.j&&(sn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(un(this,e),ln(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=$e(e,rn)),t.h=new an(e,t.g))}function Xe(t,e,n){t.h.set(e,n)}function Ye(t){return Xe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Je(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function $e(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ze),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ze(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ze.prototype.toString=function(){var t=[],e=this.j;e&&t.push($e(e,tn,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push($e(e,tn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push($e(n,"/"==n.charAt(0)?nn:en,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",$e(n,on)),t.join("")};var tn=/[#\/\?@]/g,en=/[#\?:]/g,nn=/[#\?]/g,rn=/[#\?@]/g,on=/#/g;function an(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sn(t){t.g||(t.g=new Ue,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function un(t,e){sn(t),e=fn(t,e),je(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,je((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Ve(t)))}function cn(t,e){return sn(t),e=fn(t,e),je(t.g.h,e)}function ln(t,e,n){un(t,e),0<n.length&&(t.i=null,t.g.set(fn(t,e),O(n)),t.h+=n.length)}function fn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(a=an.prototype).add=function(t,e){sn(this),this.i=null,t=fn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},a.forEach=function(t,e){sn(this),this.g.forEach((function(n,r){N(n,(function(n){t.call(e,n,r,this)}),this)}),this)},a.T=function(){sn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},a.R=function(t){sn(this);var e=[];if("string"==typeof t)cn(this,t)&&(e=D(e,this.g.get(fn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=D(e,t[n])}return e},a.set=function(t,e){return sn(this),this.i=null,cn(this,t=fn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},a.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},a.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var hn=function t(n,r){"use strict";e(s)(this,t),this.h=n,this.g=r};function dn(t){this.l=t||pn,g.PerformanceNavigationTiming?t=0<(t=g.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(g.g&&g.g.Ea&&g.g.Ea()&&g.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var pn=10;function vn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function yn(t){return t.h?1:t.g?t.g.size:0}function gn(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function mn(t,e){t.g?t.g.add(e):t.h=e}function wn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function bn(t){if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var e=t.i,n=!0,r=!1,i=void 0;try{for(var o,a=t.g.values()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e=e.concat(s.D)}}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}return O(t.i)}function kn(){}function xn(){this.g=new kn}function En(t,e,n){var r=n||"";try{Fe(t,(function(t,n){var i=t;b(t)&&(i=Rt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function _n(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function Tn(t){this.l=t.$b||null,this.j=t.ib||!1}function Sn(t,e){Dt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=In,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dn.prototype.cancel=function(){if(this.i=bn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var t=!0,e=!1,n=void 0;try{for(var r,i=this.g.values()[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){r.value.cancel()}}catch(t){e=!0,n=t}finally{try{t||null==i.return||i.return()}finally{if(e)throw n}}this.g.clear()}},kn.prototype.stringify=function(t){return g.JSON.stringify(t,void 0)},kn.prototype.parse=function(t){return g.JSON.parse(t,void 0)},I(Tn,pe),Tn.prototype.g=function(){return new Sn(this.l,this.j)},Tn.prototype.i=function(t){return function(){return t}}({}),I(Sn,Dt);var In=0;function Cn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function An(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Ln(t)}function Ln(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(a=Sn.prototype).open=function(t,e){if(this.readyState!=In)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Ln(this)},a.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||g).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},a.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,An(this)),this.readyState=In},a.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==g.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},a.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?An(this):Ln(this),3==this.readyState&&Cn(this)}},a.Ua=function(t){this.g&&(this.response=this.responseText=t,An(this))},a.Ta=function(t){this.g&&(this.response=t,An(this))},a.ha=function(){this.g&&An(this)},a.setRequestHeader=function(t,e){this.v.append(t,e)},a.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},a.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Sn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Nn=g.JSON.parse;function Dn(t){Dt.call(this),this.headers=new Ue,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=On,this.K=this.L=!1}I(Dn,Dt);var On="",Mn=/^https?$/i,Rn=["POST","PUT"];function Pn(t){return"content-type"==t.toLowerCase()}function Bn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Fn(t),Vn(t)}function Fn(t){t.D||(t.D=!0,Ot(t,"complete"),Ot(t,"error"))}function Un(t){if(t.h&&void 0!==y&&(!t.C[1]||4!=qn(t)||2!=t.ba()))if(t.v&&4==qn(t))Qt(t.Fa,0,t);else if(Ot(t,"readystatechange"),4==qn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(qe)[1]||null;if(!o&&g.self&&g.self.location){var a=g.self.location.protocol;o=a.substr(0,a.length-1)}i=!Mn.test(o?o.toLowerCase():"")}e=i}if(e)Ot(t,"complete"),Ot(t,"success");else{t.m=6;try{var s=2<qn(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",Fn(t)}}finally{Vn(t)}}}function Vn(t,e){if(t.g){jn(t);var n=t.g,r=t.C[0]?m:null;t.g=null,t.C=null,e||Ot(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function jn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(g.clearTimeout(t.A),t.A=null)}function qn(t){return t.g?t.g.readyState:0}function zn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case On:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Hn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return j(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Xe(t,e,n))}function Wn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Kn(t){this.za=0,this.l=[],this.h=new ee,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Wn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Wn("baseRetryDelayMs",5e3,t),this.$a=Wn("retryDelaySeedMs",1e4,t),this.Ya=Wn("forwardChannelMaxRetries",2,t),this.ra=Wn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new dn(t&&t.concurrentRequestLimit),this.Ca=new xn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Gn(t){if(Xn(t),3==t.G){var e=t.V++,n=He(t.F);Xe(n,"SID",t.J),Xe(n,"RID",e),Xe(n,"TYPE","terminate"),Zn(t,n),(e=new xe(t,t.h,e,void 0)).K=2,e.v=Ye(He(n)),n=!1,g.navigator&&g.navigator.sendBeacon&&(n=g.navigator.sendBeacon(e.v.toString(),"")),!n&&g.Image&&((new Image).src=e.v,n=!0),n||(e.g=fr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),De(e)}cr(t)}function Qn(t){t.g&&(rr(t),t.g.cancel(),t.g=null)}function Xn(t){Qn(t),t.u&&(g.clearTimeout(t.u),t.u=null),or(t),t.i.cancel(),t.m&&("number"==typeof t.m&&g.clearTimeout(t.m),t.m=null)}function Yn(t,e){t.l.push(new hn(t.Za++,e)),3==t.G&&Jn(t)}function Jn(t){vn(t.i)||t.m||(t.m=!0,qt(t.Ha,t),t.C=0)}function $n(t,e){var n;n=e?e.m:t.V++;var r=He(t.F);Xe(r,"SID",t.J),Xe(r,"RID",n),Xe(r,"AID",t.U),Zn(t,r),t.o&&t.s&&Hn(r,t.o,t.s),n=new xe(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=tr(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),mn(t.i,n),Ie(n,r,e)}function Zn(t,e){t.j&&Fe({},(function(t,n){Xe(e,n,t)}))}function tr(t,e,n){n=Math.min(t.l.length,n);var r=t.j?T(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{En(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function er(t){t.g||t.u||(t.Y=1,qt(t.Ga,t),t.A=0)}function nr(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=fe(T(t.Ga,t),sr(t,t.A)),t.A++,!0)}function rr(t){null!=t.B&&(g.clearTimeout(t.B),t.B=null)}function ir(t){t.g=new xe(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=He(t.oa);Xe(e,"RID","rpc"),Xe(e,"SID",t.J),Xe(e,"CI",t.N?"0":"1"),Xe(e,"AID",t.U),Zn(t,e),Xe(e,"TYPE","xmlhttp"),t.o&&t.s&&Hn(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ye(He(e)),n.s=null,n.U=!0,Ce(n,t)}function or(t){null!=t.v&&(g.clearTimeout(t.v),t.v=null)}function ar(t,e){var n=null;if(t.g==e){or(t),rr(t),t.g=null;var r=2}else{if(!gn(t.i,e))return;n=e.D,wn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Ot(r=oe(),new le(r,n,e,i)),Jn(t)}else er(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(yn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=fe(T(t.Ha,t,e),sr(t,t.C)),t.C++,0)))}(t,e)||2==r&&nr(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:ur(t,5);break;case 4:ur(t,10);break;case 3:ur(t,6);break;default:ur(t,2)}}function sr(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function ur(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=T(t.jb,t);n||(n=new ze("//www.google.com/images/cleardot.gif"),g.location&&"http"==g.location.protocol||We(n,"https"),Ye(n)),function(t,e){var n=new ee;if(g.Image){var r=new Image;r.onload=S(_n,n,r,"TestLoadImage: loaded",!0,e),r.onerror=S(_n,n,r,"TestLoadImage: error",!1,e),r.onabort=S(_n,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=S(_n,n,r,"TestLoadImage: timeout",!1,e),g.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ce(2);t.G=0,t.j&&t.j.va(e),cr(t),Xn(t)}function cr(t){t.G=0,t.I=-1,t.j&&(0==bn(t.i).length&&0==t.l.length||(t.i.i.length=0,O(t.l),t.l.length=0),t.j.ua())}function lr(t,e,n){var r=function(t){return t instanceof ze?He(t):new ze(t,void 0)}(n);if(""!=r.i)e&&Ke(r,e+"."+r.i),Ge(r,r.m);else{var i=g.location;r=function(t,e,n,r){var i=new ze(null,void 0);return t&&We(i,t),e&&Ke(i,e),n&&Ge(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&j(t.aa,(function(t,e){Xe(r,e,t)})),e=t.D,n=t.sa,e&&n&&Xe(r,e,n),Xe(r,"VER",t.ma),Zn(t,r),r}function fr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Dn(new Tn({ib:!0})):new Dn(t.qa)).L=t.H,e}function hr(){}function dr(){if(X&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function pr(t,e){Dt.call(this),this.g=new Kn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!M(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!M(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new gr(this)}function vr(t){we.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function yr(){be.call(this),this.status=1}function gr(t){this.g=t}(a=Dn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ge.g(),this.C=this.u?ve(this.u):ve(ge),this.g.onreadystatechange=T(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void Bn(this,t)}t=n||"";var i=new Ue(this.headers);r&&Fe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Pn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=g.FormData&&t instanceof g.FormData,!(0<=L(Rn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{jn(this),0<this.B&&((this.K=function(t){return X&&at()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=T(this.pa,this)):this.A=Qt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){Bn(this,t)}},a.pa=function(){void 0!==y&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ot(this,"timeout"),this.abort(8))},a.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ot(this,"complete"),Ot(this,"abort"),Vn(this))},a.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vn(this,!0)),Dn.Z.M.call(this)},a.Fa=function(){this.s||(this.F||this.v||this.l?Un(this):this.cb())},a.cb=function(){Un(this)},a.ba=function(){try{return 2<qn(this)?this.g.status:-1}catch(t){return-1}},a.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},a.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Nn(e)}},a.Da=function(){return this.m},a.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(a=Kn.prototype).ma=8,a.G=1,a.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},a.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new xe(this,this.h,t,void 0),n=this.s;if(this.P&&(n?H(n=q(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=tr(this,e,r),Xe(i=He(this.F),"RID",t),Xe(i,"CVER",22),this.D&&Xe(i,"X-HTTP-Session-Id",this.D),Zn(this,i),this.o&&n&&Hn(i,this.o,n),mn(this.i,e),this.Ra&&Xe(i,"TYPE","init"),this.ja?(Xe(i,"$req",r),Xe(i,"SID","null"),e.$=!0,Ie(e,i,null)):Ie(e,i,r),this.G=2}}else 3==this.G&&(t?$n(this,t):0==this.l.length||vn(this.i)||$n(this))},a.Ga=function(){if(this.u=null,ir(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=fe(T(this.bb,this),t)}},a.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,ce(10),Qn(this),ir(this))},a.ab=function(){null!=this.v&&(this.v=null,Qn(this),nr(this),ce(19))},a.jb=function(t){t?(this.h.info("Successfully pinged google.com"),ce(2)):(this.h.info("Failed to ping google.com"),ce(1))},(a=hr.prototype).xa=function(){},a.wa=function(){},a.va=function(){},a.ua=function(){},a.Oa=function(){},dr.prototype.g=function(t,e){return new pr(t,e)},I(pr,Dt),pr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),qt(T(t.hb,t,e))),ce(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=lr(t,null,t.W),Jn(t)},pr.prototype.close=function(){Gn(this.g)},pr.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Yn(this.g,e)}else this.v?((e={}).__data__=Rt(t),Yn(this.g,e)):Yn(this.g,t)},pr.prototype.M=function(){this.g.j=null,delete this.j,Gn(this.g),delete this.g,pr.Z.M.call(this)},I(vr,we),I(yr,be),I(gr,hr),gr.prototype.xa=function(){Ot(this.g,"a")},gr.prototype.wa=function(t){Ot(this.g,new vr(t))},gr.prototype.va=function(t){Ot(this.g,new yr(t))},gr.prototype.ua=function(){Ot(this.g,"b")},dr.prototype.createWebChannel=dr.prototype.g,pr.prototype.send=pr.prototype.u,pr.prototype.open=pr.prototype.m,pr.prototype.close=pr.prototype.close,he.NO_ERROR=0,he.TIMEOUT=8,he.HTTP_ERROR=6,de.COMPLETE="complete",ye.EventType=me,me.OPEN="a",me.CLOSE="b",me.ERROR="c",me.MESSAGE="d",Dt.prototype.listen=Dt.prototype.N,Dn.prototype.listenOnce=Dn.prototype.O,Dn.prototype.getLastError=Dn.prototype.La,Dn.prototype.getLastErrorCode=Dn.prototype.Da,Dn.prototype.getStatus=Dn.prototype.ba,Dn.prototype.getResponseJson=Dn.prototype.Qa,Dn.prototype.getResponseText=Dn.prototype.ga,Dn.prototype.send=Dn.prototype.ea;var mr=v.createWebChannelTransport=function(){return new dr},wr=v.getStatEventTarget=function(){return oe()},br=v.ErrorCode=he,kr=v.EventType=de,xr=v.Event=re,Er=v.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},_r=v.FetchXmlHttpFactory=Tn,Tr=v.WebChannel=ye,Sr=v.XhrIo=Dn})),o.register("9OvHE",(function(e,n){t(e.exports,"notiflixLoading",(function(){return i})),t(e.exports,"notiflixLoadingRemove",(function(){return a}));var r=o("7rQOT");function i(){r.Loading.dots({svgColor:"rgba(255,107,1)",svgSize:"200px"})}function a(){r.Loading.remove()}})),o.register("7rQOT",(function(t,e){var r,i;r=void 0!==n?n:"undefined"!=typeof window?window:t.exports,i=function(t){"use strict";if(void 0===t&&void 0===t.document)return!1;var e,n="Standard",r="Hourglass",i="Circle",o="Arrows",a="Dots",s="Pulse",u="Custom",c="Notiflix",l={ID:"NotiflixLoadingWrap",className:"notiflix-loading",zindex:4e3,backgroundColor:"rgba(0,0,0,0.8)",rtl:!1,fontFamily:"Quicksand",cssAnimation:!0,cssAnimationDuration:400,clickToClose:!1,customSvgUrl:null,customSvgCode:null,svgSize:"80px",svgColor:"#32c682",messageID:"NotiflixLoadingMessage",messageFontSize:"15px",messageMaxLength:34,messageColor:"#dcdcdc"},f=function(t){return console.error("%c Notiflix Error ","padding:2px;border-radius:20px;color:#fff;background:#ff5549","\n"+t+"\n\nVisit documentation page to learn more: https://notiflix.github.io/documentation")},h=function(e){return e||(e="head"),null!==t.document[e]||(f('\nNotiflix needs to be appended to the "<'+e+'>" element, but you called it before the "<'+e+'>" element has been created.'),!1)},d=function(){var t={},e=!1,n=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],n++);for(var r=function(n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e&&"[object Object]"===Object.prototype.toString.call(n[r])?t[r]=d(t[r],n[r]):t[r]=n[r])};n<arguments.length;n++)r(arguments[n]);return t},p=function(e){var n=t.document.createElement("div");return n.innerHTML=e,n.textContent||n.innerText||""},v=function(){return'[id^=NotiflixLoadingWrap]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:fixed;z-index:4000;width:100%;height:100%;left:0;top:0;right:0;bottom:0;margin:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;text-align:center;-webkit-box-sizing:border-box;box-sizing:border-box;background:rgba(0,0,0,.8);font-family:"Quicksand",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}[id^=NotiflixLoadingWrap] *{-webkit-box-sizing:border-box;box-sizing:border-box}[id^=NotiflixLoadingWrap].nx-loading-click-to-close{cursor:pointer}[id^=NotiflixLoadingWrap]>div[class*="-icon"]{width:60px;height:60px;position:relative;-webkit-transition:top .2s ease-in-out;-o-transition:top .2s ease-in-out;transition:top .2s ease-in-out;margin:0 auto}[id^=NotiflixLoadingWrap]>div[class*="-icon"] img,[id^=NotiflixLoadingWrap]>div[class*="-icon"] svg{max-width:unset;max-height:unset;width:100%;height:auto;position:absolute;left:0;top:0}[id^=NotiflixLoadingWrap]>p{position:relative;margin:10px auto 0;font-family:inherit!important;font-weight:normal;font-size:15px;line-height:1.4;padding:0 10px;width:100%;text-align:center}[id^=NotiflixLoadingWrap].nx-with-animation{-webkit-animation:loading-animation-fade .3s ease-in-out 0s normal;animation:loading-animation-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-animation-fade{0%{opacity:0}100%{opacity:1}}[id^=NotiflixLoadingWrap].nx-with-animation.nx-remove{opacity:0;-webkit-animation:loading-animation-fade-remove .3s ease-in-out 0s normal;animation:loading-animation-fade-remove .3s ease-in-out 0s normal}@-webkit-keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}@keyframes loading-animation-fade-remove{0%{opacity:1}100%{opacity:0}}[id^=NotiflixLoadingWrap]>p.nx-loading-message-new{-webkit-animation:loading-new-message-fade .3s ease-in-out 0s normal;animation:loading-new-message-fade .3s ease-in-out 0s normal}@-webkit-keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}@keyframes loading-new-message-fade{0%{opacity:0}100%{opacity:1}}'},y=function(c,v,y,m,w){if(!h("body"))return!1;e||g.Loading.init({});var b=d(!0,e,{});if("object"==typeof v&&!Array.isArray(v)||"object"==typeof y&&!Array.isArray(y)){var k={};"object"==typeof v?k=v:"object"==typeof y&&(k=y),e=d(!0,e,k)}var x,E,_="";if("string"==typeof v&&v.length>0&&(_=v),m){var T="";(_=_.length>e.messageMaxLength?p(_).toString().substring(0,e.messageMaxLength)+"...":p(_).toString()).length>0&&(T='<p id="'+e.messageID+'" class="nx-loading-message" style="color:'+e.messageColor+";font-size:"+e.messageFontSize+';">'+_+"</p>"),e.cssAnimation||(e.cssAnimationDuration=0);var S="";if(c===n)x=e.svgSize,E=e.svgColor,x||(x="60px"),E||(E="#32c682"),S='<svg xmlns="http://www.w3.org/2000/svg" stroke="'+E+'" width="'+x+'" height="'+x+'" transform="scale(.8)" viewBox="0 0 38 38"><g fill="none" fill-rule="evenodd" stroke-width="2" transform="translate(1 1)"><circle cx="18" cy="18" r="18" stroke-opacity=".25"/><path d="M36 18c0-9.94-8.06-18-18-18"><animateTransform attributeName="transform" dur="1s" from="0 18 18" repeatCount="indefinite" to="360 18 18" type="rotate"/></path></g></svg>';else if(c===r)S=function(t,e){return t||(t="60px"),e||(e="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingHourglass" fill="'+e+'" width="'+t+'" height="'+t+'" viewBox="0 0 200 200"><style>@-webkit-keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@keyframes NXhourglass5-animation{0%{-webkit-transform:scale(1,1);transform:scale(1,1)}16.67%{-webkit-transform:scale(1,.8);transform:scale(1,.8)}33.33%{-webkit-transform:scale(.88,.6);transform:scale(.88,.6)}37.5%{-webkit-transform:scale(.85,.55);transform:scale(.85,.55)}41.67%{-webkit-transform:scale(.8,.5);transform:scale(.8,.5)}45.83%{-webkit-transform:scale(.75,.45);transform:scale(.75,.45)}50%{-webkit-transform:scale(.7,.4);transform:scale(.7,.4)}54.17%{-webkit-transform:scale(.6,.35);transform:scale(.6,.35)}58.33%{-webkit-transform:scale(.5,.3);transform:scale(.5,.3)}83.33%,to{-webkit-transform:scale(.2,0);transform:scale(.2,0)}}@-webkit-keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@keyframes NXhourglass3-animation{0%{-webkit-transform:scale(1,.02);transform:scale(1,.02)}79.17%,to{-webkit-transform:scale(1,1);transform:scale(1,1)}}@-webkit-keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}@keyframes NXhourglass1-animation{0%,83.33%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(180deg);transform:rotate(180deg)}}#NXLoadingHourglass *{-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-webkit-animation-timing-function:cubic-bezier(0,0,1,1);animation-timing-function:cubic-bezier(0,0,1,1)}</style><g data-animator-group="true" data-animator-type="1" style="-webkit-animation-name:NXhourglass1-animation;animation-name:NXhourglass1-animation;-webkit-transform-origin:50% 50%;transform-origin:50% 50%;transform-box:fill-box"><g id="NXhourglass2" fill="inherit"><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass3-animation;animation-name:NXhourglass3-animation;-webkit-animation-timing-function:cubic-bezier(.42,0,.58,1);animation-timing-function:cubic-bezier(.42,0,.58,1);-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass4" d="M100 100l-34.38 32.08v31.14h68.76v-31.14z"/></g><g data-animator-group="true" data-animator-type="2" style="-webkit-animation-name:NXhourglass5-animation;animation-name:NXhourglass5-animation;-webkit-transform-origin:50% 100%;transform-origin:50% 100%;transform-box:fill-box" opacity=".4"><path id="NXhourglass6" d="M100 100L65.62 67.92V36.78h68.76v31.14z"/></g><path d="M51.14 38.89h8.33v14.93c0 15.1 8.29 28.99 23.34 39.1 1.88 1.25 3.04 3.97 3.04 7.08s-1.16 5.83-3.04 7.09c-15.05 10.1-23.34 23.99-23.34 39.09v14.93h-8.33a4.859 4.859 0 1 0 0 9.72h97.72a4.859 4.859 0 1 0 0-9.72h-8.33v-14.93c0-15.1-8.29-28.99-23.34-39.09-1.88-1.26-3.04-3.98-3.04-7.09s1.16-5.83 3.04-7.08c15.05-10.11 23.34-24 23.34-39.1V38.89h8.33a4.859 4.859 0 1 0 0-9.72H51.14a4.859 4.859 0 1 0 0 9.72zm79.67 14.93c0 15.87-11.93 26.25-19.04 31.03-4.6 3.08-7.34 8.75-7.34 15.15 0 6.41 2.74 12.07 7.34 15.15 7.11 4.78 19.04 15.16 19.04 31.03v14.93H69.19v-14.93c0-15.87 11.93-26.25 19.04-31.02 4.6-3.09 7.34-8.75 7.34-15.16 0-6.4-2.74-12.07-7.34-15.15-7.11-4.78-19.04-15.16-19.04-31.03V38.89h61.62v14.93z"/></g></g></svg>'}(e.svgSize,e.svgColor);else if(c===i)S=function(t,e){return t||(t="60px"),e||(e="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+t+'" viewBox="25 25 50 50" style="-webkit-animation:rotate 2s linear infinite;animation:rotate 2s linear infinite;height:'+t+";-webkit-transform-origin:center center;-ms-transform-origin:center center;transform-origin:center center;width:"+t+';position:absolute;top:0;left:0;margin:auto"><style>@-webkit-keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}</style><circle cx="50" cy="50" r="20" fill="none" stroke="'+e+'" stroke-width="2" style="-webkit-animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite;animation:dash 1.5s ease-in-out infinite,color 1.5s ease-in-out infinite" stroke-dasharray="150 200" stroke-dashoffset="-10" stroke-linecap="round"/></svg>'}(e.svgSize,e.svgColor);else if(c===o)S=function(t,e){return t||(t="60px"),e||(e="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+e+'" width="'+t+'" height="'+t+'" viewBox="0 0 128 128"><g><path fill="inherit" d="M109.25 55.5h-36l12-12a29.54 29.54 0 0 0-49.53 12H18.75A46.04 46.04 0 0 1 96.9 31.84l12.35-12.34v36zm-90.5 17h36l-12 12a29.54 29.54 0 0 0 49.53-12h16.97A46.04 46.04 0 0 1 31.1 96.16L18.74 108.5v-36z"/><animateTransform attributeName="transform" dur="1.5s" from="0 64 64" repeatCount="indefinite" to="360 64 64" type="rotate"/></g></svg>'}(e.svgSize,e.svgColor);else if(c===a)S=function(t,e){return t||(t="60px"),e||(e="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" fill="'+e+'" width="'+t+'" height="'+t+'" viewBox="0 0 100 100"><g transform="translate(25 50)"><circle r="9" fill="inherit" transform="scale(.239)"><animateTransform attributeName="transform" begin="-0.266s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(50 50)"><circle r="9" fill="inherit" transform="scale(.00152)"><animateTransform attributeName="transform" begin="-0.133s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g><g transform="translate(75 50)"><circle r="9" fill="inherit" transform="scale(.299)"><animateTransform attributeName="transform" begin="0s" calcMode="spline" dur="0.8s" keySplines="0.3 0 0.7 1;0.3 0 0.7 1" keyTimes="0;0.5;1" repeatCount="indefinite" type="scale" values="0;1;0"/></circle></g></svg>'}(e.svgSize,e.svgColor);else if(c===s)S=function(t,e){return t||(t="60px"),e||(e="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" stroke="'+e+'" width="'+t+'" height="'+t+'" viewBox="0 0 44 44"><g fill="none" fill-rule="evenodd" stroke-width="2"><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="0s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle><circle cx="22" cy="22" r="1"><animate attributeName="r" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.165, 0.84, 0.44, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 20"/><animate attributeName="stroke-opacity" begin="-0.9s" calcMode="spline" dur="1.8s" keySplines="0.3, 0.61, 0.355, 1" keyTimes="0; 1" repeatCount="indefinite" values="1; 0"/></circle></g></svg>'}(e.svgSize,e.svgColor);else if(c===u&&null!==e.customSvgCode&&null===e.customSvgUrl)S=e.customSvgCode||"";else if(c===u&&null!==e.customSvgUrl&&null===e.customSvgCode)S='<img class="nx-custom-loading-icon" width="'+e.svgSize+'" height="'+e.svgSize+'" src="'+e.customSvgUrl+'" alt="Notiflix">';else{if(c===u&&(null===e.customSvgUrl||null===e.customSvgCode))return f('You have to set a static SVG url to "customSvgUrl" option to use Loading Custom.'),!1;S=function(t,e,n){return t||(t="60px"),e||(e="#f8f8f8"),n||(n="#32c682"),'<svg xmlns="http://www.w3.org/2000/svg" id="NXLoadingNotiflixLib" width="'+t+'" height="'+t+'" viewBox="0 0 200 200"><defs><style>@keyframes notiflix-n{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-x{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes notiflix-dot{0%,to{stroke-width:0}50%{stroke-width:12}}.nx-icon-line{stroke:'+e+';stroke-width:12;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:22;fill:none}</style></defs><path d="M47.97 135.05a6.5 6.5 0 1 1 0 13 6.5 6.5 0 0 1 0-13z" style="animation-name:notiflix-dot;animation-timing-function:ease-in-out;animation-duration:1.25s;animation-iteration-count:infinite;animation-direction:normal" fill="'+n+'" stroke="'+n+'" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="22" stroke-width="12"/><path class="nx-icon-line" d="M10.14 144.76V87.55c0-5.68-4.54-41.36 37.83-41.36 42.36 0 37.82 35.68 37.82 41.36v57.21" style="animation-name:notiflix-n;animation-timing-function:linear;animation-duration:2.5s;animation-delay:0s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/><path class="nx-icon-line" d="M115.06 144.49c24.98-32.68 49.96-65.35 74.94-98.03M114.89 46.6c25.09 32.58 50.19 65.17 75.29 97.75" style="animation-name:notiflix-x;animation-timing-function:linear;animation-duration:2.5s;animation-delay:.2s;animation-iteration-count:infinite;animation-direction:normal" stroke-dasharray="500"/></svg>'}(e.svgSize,"#f8f8f8","#32c682")}var I=parseInt((e.svgSize||"").replace(/[^0-9]/g,"")),C=t.innerWidth,A=I>=C?C-40+"px":I+"px",L='<div style="width:'+A+"; height:"+A+';" class="'+e.className+"-icon"+(_.length>0?" nx-with-message":"")+'">'+S+"</div>",N=t.document.createElement("div");N.id=l.ID,N.className=e.className+(e.cssAnimation?" nx-with-animation":"")+(e.clickToClose?" nx-loading-click-to-close":""),N.style.zIndex=e.zindex,N.style.background=e.backgroundColor,N.style.animationDuration=e.cssAnimationDuration+"ms",N.style.fontFamily='"'+e.fontFamily+'", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif',N.style.display="flex",N.style.flexWrap="wrap",N.style.flexDirection="column",N.style.alignItems="center",N.style.justifyContent="center",e.rtl&&(N.setAttribute("dir","rtl"),N.classList.add("nx-rtl-on")),N.innerHTML=L+T,t.document.getElementById(N.id)||(t.document.body.appendChild(N),e.clickToClose&&t.document.getElementById(N.id).addEventListener("click",(function(){N.classList.add("nx-remove");var t=setTimeout((function(){null!==N.parentNode&&(N.parentNode.removeChild(N),clearTimeout(t))}),e.cssAnimationDuration)})))}else if(t.document.getElementById(l.ID))var D=t.document.getElementById(l.ID),O=setTimeout((function(){D.classList.add("nx-remove");var t=setTimeout((function(){null!==D.parentNode&&(D.parentNode.removeChild(D),clearTimeout(t))}),e.cssAnimationDuration);clearTimeout(O)}),w);e=d(!0,e,b)},g={Loading:{init:function(n){e=d(!0,l,n),function(e,n){if(!h("head"))return!1;if(null!==e()&&!t.document.getElementById(n)){var r=t.document.createElement("style");r.id=n,r.innerHTML=e(),t.document.head.appendChild(r)}}(v,"NotiflixLoadingInternalCSS")},merge:function(t){if(!e)return f("You have to initialize the Loading module before call Merge function."),!1;e=d(!0,e,t)},standard:function(t,e){y(n,t,e,!0,0)},hourglass:function(t,e){y(r,t,e,!0,0)},circle:function(t,e){y(i,t,e,!0,0)},arrows:function(t,e){y(o,t,e,!0,0)},dots:function(t,e){y(a,t,e,!0,0)},pulse:function(t,e){y(s,t,e,!0,0)},custom:function(t,e){y(u,t,e,!0,0)},notiflix:function(t,e){y(c,t,e,!0,0)},remove:function(t){"number"!=typeof t&&(t=0),y(null,null,null,!1,t)},change:function(n){!function(n){"string"!=typeof n&&(n="");var r=t.document.getElementById(l.ID);if(r)if(n.length>0){n=n.length>e.messageMaxLength?p(n).substring(0,e.messageMaxLength)+"...":p(n);var i=r.getElementsByTagName("p")[0];if(i)i.innerHTML=n;else{var o=t.document.createElement("p");o.id=e.messageID,o.className="nx-loading-message nx-loading-message-new",o.style.color=e.messageColor,o.style.fontSize=e.messageFontSize,o.innerHTML=n,r.appendChild(o)}}else f("Where is the new message?")}(n)}}};return"object"==typeof t.Notiflix?d(!0,t.Notiflix,{Loading:g.Loading}):{Loading:g.Loading}},"function"==typeof define&&define.amd?define([],(function(){return i(r)})):"object"==typeof t.exports?t.exports=i(r):r.Notiflix=i(r)})),o.register("lCy78",(function(e,n){function r(){var t=document.querySelector(".add-btn__watched"),e=document.querySelector(".add-btn__queue"),n=t.id,r=t.classList.contains("disabl"),i=e.classList.contains("disabl"),o=document.querySelector('[data-id="'.concat(n,'"]')),a=o.querySelector("svg"),s=o.querySelector("use");"Filmoteka"===document.title&&(r&&(a.style.opacity="1",s.setAttribute("href","".concat("/Filmoteka/login-icon.2e0a9156.svg#icon-watched"))),i&&(a.style.opacity="1",s.setAttribute("href","".concat("/Filmoteka/login-icon.2e0a9156.svg#icon-queue"))),i||r||(a.style.opacity="0")),"Filmoteka-library"===document.title&&(document.querySelector("#queueBtn").classList.contains("selected")&&!i&&o.remove(),document.querySelector("#watchedBtn").classList.contains("selected")&&!r&&o.remove())}t(e.exports,"cardAddIcon",(function(){return r}))})),o.register("5YNLl",(function(t,e){var n=o("3gckm"),r={openModalBtn:document.querySelector(".footer_link"),closeModalBtn:document.querySelector(".modal-close-btn"),Background:document.querySelector(".backdrop-footer"),modal:document.querySelector(".modal-footer"),list:document.querySelector(".list-developer"),body:document.body};function i(){r.body.classList.remove("disable-scroll")}function a(){r.modal.classList.toggle("open-footer"),r.Background.classList.toggle("open-footer"),r.body.classList.add("disable-scroll"),r.closeModalBtn.addEventListener("click",a),r.Background.addEventListener("click",s),r.modal.classList.contains("open-footer")||(i(),r.closeModalBtn.removeEventListener("click",a),r.Background.removeEventListener("click",s))}function s(){if(r.modal.classList.contains("open-footer"))return r.modal.classList.toggle("open-footer"),r.Background.classList.toggle("open-footer"),i(),r.closeModalBtn.removeEventListener("click",a),void r.Background.removeEventListener("click",s)}r.openModalBtn.addEventListener("click",a),window.addEventListener("keydown",(function(t){if("Escape"===t.code&&r.modal.classList.contains("open-footer"))return r.modal.classList.toggle("open-footer"),r.Background.classList.toggle("open-footer"),i(),r.closeModalBtn.removeEventListener("click",a),void r.Background.removeEventListener("click",s)})),r.list.insertAdjacentHTML("beforeend",n.devolopers.reduce((function(t,e){return t+'<div class="developer-list">\n<img class="developer-foto" src="'.concat(e.image,'" alt="').concat(e.name,'" >\n<div class="developer-diskription" >\n<div class="box-item">\n    <p class="developer-name">').concat(e.name,'</p>\n    <p class="developer-work">').concat(e.work,'</p>\n    \n  </li>\n</div>\n<div class="git-hub">\n<li class="box-list">\n    <a class="footer-link" href=').concat(e.media,' target="_blank">\n    <img class="footer-logo" src="https://icones.pro/wp-content/uploads/2021/06/icone-github-orange.png" alt="GIT HUB" >\n    </a>\n</div>\n</div>\n</div>')}),""))})),o.register("3gckm",(function(e,n){t(e.exports,"devolopers",(function(){return r}));var r=[{name:"Volodymyr Todorov",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Volodymyr-Todorov.png?raw=true",work:"Team Leader",media:"https://github.com/LazyFatRaccoon"},{name:"Stanislav Tyshchenko",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Stanislav-Tishchenko.jpg?raw=true",work:"Developer",media:"https://github.com/Stanislav2022"},{name:"Oleksandr Gorzhii",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Horzhiy-Oleksandr.JPG?raw=true",work:"Developer",media:"https://github.com/AlexHorzhij"},{name:"Andriy Bachynskyi",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Andriy-Bachynskyi.jpg?raw=true",work:"Developer",media:"https://github.com/Bachynckyi"},{name:"Evgeny Medyanik",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Evgeny-Medyanik.jpg?raw=true",work:"Developer",media:"https://github.com/roowdy"},{name:"Oleksadr Kravtsov",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Oleksandr-Kravtsov.jpg?raw=true",work:"Developer",media:"https://github.com/Kravtsov9983"},{name:"Oleksandr Tolochko",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Oleksandr-Tolochko.jpg?raw=true",work:"Scrum Master",media:"https://github.com/Alex-T-T"},{name:"Volodymyr Bolgov",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Volodymyr-Bolgov.jpg?raw=true",work:"Developer",media:"https://github.com/VladymyrBolgov"},{name:"Stanislav Zavadskyi",image:"https://github.com/LazyFatRaccoon/Filmoteka/blob/main/src/images/Stanislav-Zavadskyi.jpg?raw=true",work:"Developer",media:"https://github.com/uncle-Stas"}]})),o.register("bhg5s",(function(n,r){t(n.exports,"initPagination",(function(){return p}));var i,a=o("bpxeT"),s=o("2TvXO"),u=o("1VFfL"),c=o("1bHFN"),l=o("j2NRO"),f=o("9OvHE"),h=document.getElementById("pagination"),d={startPage:1,searchType:null,pagination:null,totalItemsHome:null},p=(i=e(a)(e(s).mark((function t(n){var r,i,o,p,v,y,g,m,w,b,k,x,E;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.page,i=n.itemsPerPage,o=n.totalItems,p=n.data,v=n.query,y=n.firstTime,g=n.list,m={page:r,itemsPerPage:i,totalItems:o,visiblePages:5,centerAlign:!0,data:p,query:v,firstTime:y,list:g},w=new(e(u))(h,m),d.pagination=w,!m.firstTime){t.next=48;break}if("search"!==m.data.toString()){t.next=19;break}return t.prev=6,(0,f.notiflixLoading)(),t.next=10,c.default.getModifiedMoviesList(r,m.query);case 10:b=t.sent,(0,l.createGallery)(b.results),m.firstTime=!1,(0,f.notiflixLoadingRemove)(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(6),console.log(t.t0);case 19:if("popular"!==m.data.toString()){t.next=33;break}return t.prev=20,(0,f.notiflixLoading)(),t.next=24,c.default.getModifiedMoviesList(r);case 24:k=t.sent,(0,l.createGallery)(k.results),m.firstTime=!1,(0,f.notiflixLoadingRemove)(),t.next=33;break;case 30:t.prev=30,t.t1=t.catch(20),console.log(t.t1);case 33:if("library"!==m.data.toString()){t.next=48;break}return t.prev=34,(0,f.notiflixLoading)(),x=m.list.slice(0,m.itemsPerPage),t.next=39,Promise.all(x.map(function(){var t=e(a)(e(s).mark((function t(n){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.default.getModifiedSingleMovie(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 39:E=t.sent,(0,l.createGallery)(E),m.firstTime=!1,(0,f.notiflixLoadingRemove)(),t.next=48;break;case 45:t.prev=45,t.t2=t.catch(34),console.log(t.t2);case 48:return w.on("afterMove",function(){var t=e(a)(e(s).mark((function t(n){var r,i,o,u,h;return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.page,"search"!==m.data.toString()){t.next=14;break}return t.prev=2,(0,f.notiflixLoading)(),t.next=6,c.default.getModifiedMoviesList(r,m.query);case 6:i=t.sent,(0,l.createGallery)(i.results),(0,f.notiflixLoadingRemove)(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),console.log(t.t0);case 14:if("popular"!==m.data.toString()){t.next=27;break}return t.prev=15,(0,f.notiflixLoading)(),t.next=19,c.default.getModifiedMoviesList(r);case 19:o=t.sent,(0,l.createGallery)(o.results),(0,f.notiflixLoadingRemove)(),t.next=27;break;case 24:t.prev=24,t.t1=t.catch(15),console.log(t.t1);case 27:if("library"!==m.data.toString()){t.next=41;break}return t.prev=28,(0,f.notiflixLoading)(),u=m.list.slice((r-1)*m.itemsPerPage,r*m.itemsPerPage),t.next=33,Promise.all(u.map(function(){var t=e(a)(e(s).mark((function t(n){return e(s).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.default.getModifiedSingleMovie(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 33:h=t.sent,(0,l.createGallery)(h),(0,f.notiflixLoadingRemove)(),t.next=41;break;case 38:t.prev=38,t.t2=t.catch(28),console.log(t.t2);case 41:case"end":return t.stop()}}),t,null,[[2,11],[15,24],[28,38]])})));return function(e){return t.apply(this,arguments)}}()),t.abrupt("return",w);case 50:case"end":return t.stop()}}),t,null,[[6,16],[20,30],[34,45]])}))),function(t){return i.apply(this,arguments)})})),o.register("1VFfL",(function(t,e){
/*!
 * TOAST UI Pagination
 * @version 3.4.1
 * @author NHN FE Development Team <dl_javascript@nhn.com>
 * @license MIT
 */
var n;window,n=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="dist",n(n.s=10)}([function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,o,a=Object.prototype.hasOwnProperty;for(i=1,o=arguments.length;i<o;i+=1)for(r in n=arguments[i])a.call(n,r)&&(t[r]=n[r]);return t}},function(t,e,n){"use strict";t.exports=function(t){return void 0===t}},function(t,e,n){"use strict";t.exports=function(t){return t instanceof Array}},function(t,e,n){"use strict";var r=n(2),i=n(17),o=n(6);t.exports=function(t,e,n){r(t)?i(t,e,n):o(t,e,n)}},function(t,e,n){"use strict";t.exports=function(t){return"string"==typeof t||t instanceof String}},function(t,e,n){"use strict";t.exports=function(t){return t instanceof Function}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r;for(r in n=n||null,t)if(t.hasOwnProperty(r)&&!1===e.call(n,t[r],r,t))break}},function(t,e,n){"use strict";var r=n(18),i=n(0);t.exports=function(t,e){var n;return e||(e=t,t=null),n=e.init||function(){},t&&r(n,t),e.hasOwnProperty("static")&&(i(n,e.static),delete e.static),i(n.prototype,e),n}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t,e,n){var i,o;if(n=n||0,!r(e))return-1;if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(o=e.length,i=n;n>=0&&i<o;i+=1)if(e[i]===t)return i;return-1}},function(t,e,n){"use strict";var r=n(29),i=n(30),o=n(5),a={capitalizeFirstLetter:function(t){return t.substring(0,1).toUpperCase()+t.substring(1,t.length)},isContained:function(t,e){return!!e&&(t===e||e.contains(t))},createElementByTemplate:function(t,e){var n=document.createElement("div"),i=o(t)?t(e):r(t,e);return n.innerHTML=i,n.firstChild},bind:function(t,e){var n,r=Array.prototype.slice;return t.bind?t.bind.apply(t,r.call(arguments,1)):(n=r.call(arguments,2),function(){return t.apply(e,n.length?n.concat(r.call(arguments)):arguments)})},sendHostName:function(){i("pagination","UA-129987462-1")}};t.exports=a},function(t,e,n){"use strict";n(11),t.exports=n(12)},function(t,e,n){},function(t,e,n){"use strict";var r=n(13),i=n(7),o=n(0),a=n(1),s=n(20),u=n(9),c={totalItems:10,itemsPerPage:10,visiblePages:10,page:1,centerAlign:!1,firstItemClassName:"tui-first-child",lastItemClassName:"tui-last-child",usageStatistics:!0},l=i({init:function(t,e){this._options=o({},c,e),this._currentPage=0,this._view=new s(t,this._options,u.bind(this._onClickHandler,this)),this._paginate(),this._options.usageStatistics&&u.sendHostName()},_setCurrentPage:function(t){this._currentPage=t||this._options.page},_getLastPage:function(){var t=Math.ceil(this._options.totalItems/this._options.itemsPerPage);return t||1},_getPageIndex:function(t){var e;return this._options.centerAlign?(e=t-Math.floor(this._options.visiblePages/2),e=Math.max(e,1),e=Math.min(e,this._getLastPage()-this._options.visiblePages+1)):Math.ceil(t/this._options.visiblePages)},_getRelativePage:function(t){var e="prev"===t,n=this.getCurrentPage();return e?n-1:n+1},_getMorePageIndex:function(t){var e=this._getPageIndex(this.getCurrentPage()),n=this._options.visiblePages,r="prev"===t;return this._options.centerAlign?r?e-1:e+n:r?(e-1)*n:e*n+1},_convertToValidPage:function(t){var e=this._getLastPage();return t=Math.max(t,1),t=Math.min(t,e)},_paginate:function(t){var e=this._makeViewData(t||this._options.page);this._setCurrentPage(t),this._view.update(e)},_makeViewData:function(t){var e={},n=this._getLastPage(),r=this._getPageIndex(t),i=this._getPageIndex(n),o=this._getEdge(t);return e.leftPageNumber=o.left,e.rightPageNumber=o.right,e.prevMore=r>1,e.nextMore=r<i,e.page=t,e.currentPageIndex=t,e.lastPage=n,e.lastPageListIndex=n,e},_getEdge:function(t){var e,n,r,i=this._getLastPage(),o=this._options.visiblePages,a=this._getPageIndex(t);return this._options.centerAlign?(r=Math.floor(o/2),(n=(e=Math.max(t-r,1))+o-1)>i&&(e=Math.max(i-o+1,1),n=i)):(e=(a-1)*o+1,n=a*o,n=Math.min(n,i)),{left:e,right:n}},_onClickHandler:function(t,e){switch(t){case"first":e=1;break;case"prev":e=this._getRelativePage("prev");break;case"next":e=this._getRelativePage("next");break;case"prevMore":e=this._getMorePageIndex("prev");break;case"nextMore":e=this._getMorePageIndex("next");break;case"last":e=this._getLastPage();break;default:if(!e)return}this.movePageTo(e)},reset:function(t){a(t)&&(t=this._options.totalItems),this._options.totalItems=t,this._paginate(1)},movePageTo:function(t){t=this._convertToValidPage(t),this.invoke("beforeMove",{page:t})&&(this._paginate(t),this.fire("afterMove",{page:t}))},setTotalItems:function(t){this._options.totalItems=t},setItemsPerPage:function(t){this._options.itemsPerPage=t},getCurrentPage:function(){return this._currentPage||this._options.page}});r.mixin(l),t.exports=l},function(t,e,n){"use strict";var r=n(0),i=n(14),o=n(4),a=n(16),s=n(2),u=n(5),c=n(3),l=/\s+/g;function f(){this.events=null,this.contexts=null}f.mixin=function(t){r(t.prototype,f.prototype)},f.prototype._getHandlerItem=function(t,e){var n={handler:t};return e&&(n.context=e),n},f.prototype._safeEvent=function(t){var e,n=this.events;return n||(n=this.events={}),t&&((e=n[t])||(e=[],n[t]=e),n=e),n},f.prototype._safeContext=function(){var t=this.contexts;return t||(t=this.contexts=[]),t},f.prototype._indexOfContext=function(t){for(var e=this._safeContext(),n=0;e[n];){if(t===e[n][0])return n;n+=1}return-1},f.prototype._memorizeContext=function(t){var e,n;i(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1?e[n][1]+=1:e.push([t,1]))},f.prototype._forgetContext=function(t){var e,n;i(t)&&(e=this._safeContext(),(n=this._indexOfContext(t))>-1&&(e[n][1]-=1,e[n][1]<=0&&e.splice(n,1)))},f.prototype._bindEvent=function(t,e,n){var r=this._safeEvent(t);this._memorizeContext(n),r.push(this._getHandlerItem(e,n))},f.prototype.on=function(t,e,n){var r=this;o(t)?(t=t.split(l),c(t,(function(t){r._bindEvent(t,e,n)}))):a(t)&&(n=e,c(t,(function(t,e){r.on(e,t,n)})))},f.prototype.once=function(t,e,n){var r=this;if(a(t))return n=e,void c(t,(function(t,e){r.once(e,t,n)}));this.on(t,(function i(){e.apply(n,arguments),r.off(t,i,n)}),n)},f.prototype._spliceMatches=function(t,e){var n,r=0;if(s(t))for(n=t.length;r<n;r+=1)!0===e(t[r])&&(t.splice(r,1),n-=1,r-=1)},f.prototype._matchHandler=function(t){var e=this;return function(n){var r=t===n.handler;return r&&e._forgetContext(n.context),r}},f.prototype._matchContext=function(t){var e=this;return function(n){var r=t===n.context;return r&&e._forgetContext(n.context),r}},f.prototype._matchHandlerAndContext=function(t,e){var n=this;return function(r){var i=t===r.handler,o=e===r.context,a=i&&o;return a&&n._forgetContext(r.context),a}},f.prototype._offByEventName=function(t,e){var n=this,r=u(e),i=n._matchHandler(e);t=t.split(l),c(t,(function(t){var e=n._safeEvent(t);r?n._spliceMatches(e,i):(c(e,(function(t){n._forgetContext(t.context)})),n.events[t]=[])}))},f.prototype._offByHandler=function(t){var e=this,n=this._matchHandler(t);c(this._safeEvent(),(function(t){e._spliceMatches(t,n)}))},f.prototype._offByObject=function(t,e){var n,r=this;this._indexOfContext(t)<0?c(t,(function(t,e){r.off(e,t)})):o(e)?(n=this._matchContext(t),r._spliceMatches(this._safeEvent(e),n)):u(e)?(n=this._matchHandlerAndContext(e,t),c(this._safeEvent(),(function(t){r._spliceMatches(t,n)}))):(n=this._matchContext(t),c(this._safeEvent(),(function(t){r._spliceMatches(t,n)})))},f.prototype.off=function(t,e){o(t)?this._offByEventName(t,e):arguments.length?u(t)?this._offByHandler(t):a(t)&&this._offByObject(t,e):(this.events={},this.contexts=[])},f.prototype.fire=function(t){this.invoke.apply(this,arguments)},f.prototype.invoke=function(t){var e,n,r,i;if(!this.hasListener(t))return!0;for(e=this._safeEvent(t),n=Array.prototype.slice.call(arguments,1),r=0;e[r];){if(!1===(i=e[r]).handler.apply(i.context,n))return!1;r+=1}return!0},f.prototype.hasListener=function(t){return this.getListenerLength(t)>0},f.prototype.getListenerLength=function(t){return this._safeEvent(t).length},t.exports=f},function(t,e,n){"use strict";var r=n(1),i=n(15);t.exports=function(t){return!r(t)&&!i(t)}},function(t,e,n){"use strict";t.exports=function(t){return null===t}},function(t,e,n){"use strict";t.exports=function(t){return t===Object(t)}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=0,i=t.length;for(n=n||null;r<i&&!1!==e.call(n,t[r],r,t);r+=1);}},function(t,e,n){"use strict";var r=n(19);t.exports=function(t,e){var n=r(e.prototype);n.constructor=t,t.prototype=n}},function(t,e,n){"use strict";t.exports=function(t){function e(){}return e.prototype=t,new e}},function(t,e,n){"use strict";var r=n(3),i=n(7),o=n(21),a=n(22),s=n(24),u=n(25),c=n(0),l=n(4),f=n(28),h=n(9),d={page:'<a href="#" class="tui-page-btn">{{page}}</a>',currentPage:'<strong class="tui-page-btn tui-is-selected">{{page}}</strong>',moveButton:'<a href="#" class="tui-page-btn tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></a>',disabledMoveButton:'<span class="tui-page-btn tui-is-disabled tui-{{type}}"><span class="tui-ico-{{type}}">{{type}}</span></span>',moreButton:'<a href="#" class="tui-page-btn tui-{{type}}-is-ellip"><span class="tui-ico-ellip">...</span></a>'},p=["first","prev","next","last"],v=["prev","next"],y=i({init:function(t,e,n){this._containerElement=null,this._firstItemClassName=e.firstItemClassName,this._lastItemClassName=e.lastItemClassName,this._template=c({},d,e.template),this._buttons={},this._enabledPageElements=[],this._setRootElement(t),this._setMoveButtons(),this._setDisabledMoveButtons(),this._setMoreButtons(),this._attachClickEvent(n)},_setRootElement:function(t){if(l(t)?t=document.getElementById(t)||document.querySelector(t):t.jquery&&(t=t[0]),!f(t))throw new Error("The container element is invalid.");this._containerElement=t},_setMoveButtons:function(){r(p,(function(t){this._buttons[t]=h.createElementByTemplate(this._template.moveButton,{type:t})}),this)},_setDisabledMoveButtons:function(){r(p,(function(t){var e="disabled"+h.capitalizeFirstLetter(t);this._buttons[e]=h.createElementByTemplate(this._template.disabledMoveButton,{type:t})}),this)},_setMoreButtons:function(){r(v,(function(t){var e=t+"More";this._buttons[e]=h.createElementByTemplate(this._template.moreButton,{type:t})}),this)},_getContainerElement:function(){return this._containerElement},_appendFirstButton:function(t){var e;e=t.page>1?this._buttons.first:this._buttons.disabledFirst,this._getContainerElement().appendChild(e)},_appendPrevButton:function(t){var e;e=t.currentPageIndex>1?this._buttons.prev:this._buttons.disabledPrev,this._getContainerElement().appendChild(e)},_appendNextButton:function(t){var e;e=t.currentPageIndex<t.lastPageListIndex?this._buttons.next:this._buttons.disabledNext,this._getContainerElement().appendChild(e)},_appendLastButton:function(t){var e;e=t.page<t.lastPage?this._buttons.last:this._buttons.disabledLast,this._getContainerElement().appendChild(e)},_appendPrevMoreButton:function(t){var e;t.prevMore&&(e=this._buttons.prevMore,u(e,this._firstItemClassName),this._getContainerElement().appendChild(e))},_appendNextMoreButton:function(t){var e;t.nextMore&&(e=this._buttons.nextMore,u(e,this._lastItemClassName),this._getContainerElement().appendChild(e))},_appendPages:function(t){var e,n,r=t.leftPageNumber,i=t.rightPageNumber;for(n=r;n<=i;n+=1)n===t.page?e=h.createElementByTemplate(this._template.currentPage,{page:n}):(e=h.createElementByTemplate(this._template.page,{page:n}),this._enabledPageElements.push(e)),n!==r||t.prevMore||u(e,this._firstItemClassName),n!==i||t.nextMore||u(e,this._lastItemClassName),this._getContainerElement().appendChild(e)},_attachClickEvent:function(t){var e=this._getContainerElement();a(e,"click",(function(e){var n,r,i=o(e);s(e),(r=this._getButtonType(i))||(n=this._getPageNumber(i)),t(r,n)}),this)},_getButtonType:function(t){var e,n=this._buttons;return r(n,(function(n,r){return!h.isContained(t,n)||(e=r,!1)}),this),e},_getPageNumber:function(t){var e,n=this._findPageElement(t);return n&&(e=parseInt(n.innerText,10)),e},_findPageElement:function(t){for(var e,n=0,r=this._enabledPageElements.length;n<r;n+=1)if(e=this._enabledPageElements[n],h.isContained(t,e))return e;return null},_empty:function(){this._enabledPageElements=[],r(this._buttons,(function(t,e){this._buttons[e]=t.cloneNode(!0)}),this),this._getContainerElement().innerHTML=""},update:function(t){this._empty(),this._appendFirstButton(t),this._appendPrevButton(t),this._appendPrevMoreButton(t),this._appendPages(t),this._appendNextMoreButton(t),this._appendNextButton(t),this._appendLastButton(t)}});t.exports=y},function(t,e,n){"use strict";t.exports=function(t){return t.target||t.srcElement}},function(t,e,n){"use strict";var r=n(4),i=n(3),o=n(23);function a(t,e,n,r){function a(e){n.call(r||t,e||window.event)}"addEventListener"in t?t.addEventListener(e,a):"attachEvent"in t&&t.attachEvent("on"+e,a),function(t,e,n,r){var a=o(t,e),s=!1;i(a,(function(t){return t.handler!==n||(s=!0,!1)})),s||a.push({handler:n,wrappedHandler:r})}(t,e,n,a)}t.exports=function(t,e,n,o){r(e)?i(e.split(/\s+/g),(function(e){a(t,e,n,o)})):i(e,(function(e,r){a(t,r,e,n)}))}},function(t,e,n){"use strict";var r="_feEventKey";t.exports=function(t,e){var n,i=t[r];return i||(i=t[r]={}),(n=i[e])||(n=i[e]=[]),n}},function(t,e,n){"use strict";t.exports=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1}},function(t,e,n){"use strict";var r=n(3),i=n(8),o=n(26),a=n(27);t.exports=function(t){var e,n=Array.prototype.slice.call(arguments,1),s=t.classList,u=[];s?r(n,(function(e){t.classList.add(e)})):((e=o(t))&&(n=[].concat(e.split(/\s+/),n)),r(n,(function(t){i(t,u)<0&&u.push(t)})),a(t,u))}},function(t,e,n){"use strict";var r=n(1);t.exports=function(t){return t&&t.className?r(t.className.baseVal)?t.className:t.className.baseVal:""}},function(t,e,n){"use strict";var r=n(2),i=n(1);t.exports=function(t,e){e=(e=r(e)?e.join(" "):e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),i(t.className.baseVal)?t.className=e:t.className.baseVal=e}},function(t,e,n){"use strict";t.exports=function(t){return"object"==typeof HTMLElement?t&&(t instanceof HTMLElement||!!t.nodeType):!(!t||!t.nodeType)}},function(t,e,n){"use strict";var r=n(8),i=n(3),o=n(2),a=n(4),s=n(0),u=/{{\s?|\s?}}/g,c=/^[a-zA-Z0-9_@]+\[[a-zA-Z0-9_@"']+\]$/,l=/\[\s?|\s?\]/,f=/^[a-zA-Z_]+\.[a-zA-Z_]+$/,h=/\./,d=/^["']\w+["']$/,p=/"|'/g,v=/^-?\d+\.?\d*$/,y={if:function(t,e,n){var r=function(t,e){var n=[t],r=[],o=0,a=0;return i(e,(function(t,i){0===t.indexOf("if")?o+=1:"/if"===t?o-=1:o||0!==t.indexOf("elseif")&&"else"!==t||(n.push("else"===t?["true"]:t.split(" ").slice(1)),r.push(e.slice(a,i)),a=i+1)})),r.push(e.slice(a)),{exps:n,sourcesInsideIf:r}}(t,e),o=!1,a="";return i(r.exps,(function(t,e){return(o=b(t,n))&&(a=k(r.sourcesInsideIf[e],n)),!o})),a},each:function(t,e,n){var r=b(t,n),a=o(r)?"@index":"@key",u={},c="";return i(r,(function(t,r){u[a]=r,u["@this"]=t,s(n,u),c+=k(e.slice(),n)})),c},with:function(t,e,n){var i=r("as",t),o=t[i+1],a=b(t.slice(0,i),n),u={};return u[o]=a,k(e,s(n,u))||""}},g=3==="a".split(/a/).length?function(t,e){return t.split(e)}:function(t,e){var n,r,i=[],o=0;for(e.global||(e=new RegExp(e,"g")),n=e.exec(t);null!==n;)r=n.index,i.push(t.slice(o,r)),o=r+n[0].length,n=e.exec(t);return i.push(t.slice(o)),i};function m(t,e){var n,r=e[t];return"true"===t?r=!0:"false"===t?r=!1:d.test(t)?r=t.replace(p,""):c.test(t)?r=m((n=t.split(l))[0],e)[m(n[1],e)]:f.test(t)?r=m((n=t.split(h))[0],e)[n[1]]:v.test(t)&&(r=parseFloat(t)),r}function w(t,e,n){for(var r,i,o,s,u=y[t],c=1,l=2,f=e[l];c&&a(f);)0===f.indexOf(t)?c+=1:0===f.indexOf("/"+t)&&(c-=1,r=l),f=e[l+=2];if(c)throw Error(t+" needs {{/"+t+"}} expression.");return e[0]=u(e[0].split(" ").slice(1),(i=0,o=r,(s=e.splice(i+1,o-i)).pop(),s),n),e}function b(t,e){var n=m(t[0],e);return n instanceof Function?function(t,e,n){var r=[];return i(e,(function(t){r.push(m(t,n))})),t.apply(null,r)}(n,t.slice(1),e):n}function k(t,e){for(var n,r,i,o=1,s=t[o];a(s);)r=(n=s.split(" "))[0],y[r]?(i=w(r,t.splice(o,t.length-o),e),t=t.concat(i)):t[o]=b(n,e),s=t[o+=2];return t.join("")}t.exports=function(t,e){return k(g(t,u),e)}},function(t,e,n){"use strict";var r=n(1),i=n(31);t.exports=function(t,e){var n=location.hostname,o="TOAST UI "+t+" for "+n+": Statistics",a=window.localStorage.getItem(o);(r(window.tui)||!1!==window.tui.usageStatistics)&&(a&&!function(t){return(new Date).getTime()-t>6048e5}(a)||(window.localStorage.setItem(o,(new Date).getTime()),setTimeout((function(){"interactive"!==document.readyState&&"complete"!==document.readyState||i("https://www.google-analytics.com/collect",{v:1,t:"event",tid:e,cid:n,dp:n,dh:t,el:t,ec:"use"})}),1e3)))}},function(t,e,n){"use strict";var r=n(6);t.exports=function(t,e){var n=document.createElement("img"),i="";return r(e,(function(t,e){i+="&"+e+"="+t})),i=i.substring(1),n.src=t+"?"+i,n.style.display="none",document.body.appendChild(n),document.body.removeChild(n),n}}])},t.exports=n()})),o.register("j2NRO",(function(n,r){t(n.exports,"createGallery",(function(){return h}));var i=o("bpxeT"),a=o("2TvXO"),s=o("1bHFN"),u=o("bhg5s"),c=o("MZOJE");function l(){return(l=e(i)(e(a).mark((function t(){var n,r,i,o;return e(a).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.getModifiedMoviesList(1);case 2:n=t.sent,r=n.page,i=n.results,o=n.total_results,(0,u.initPagination)({page:r,itemsPerPage:i.length,totalItems:o,data:"popular",firstTime:!0});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}"Filmoteka"===document.title&&function(){l.apply(this,arguments)}();var f=document.querySelector(".films__list");function h(t){var e;f.innerHTML="";var n=t.reduce((function(t,n){return t+'\n            <li class="films__item" data-id="'.concat(n.id,'">\n              <img class="films__img" loading="lazy" src="').concat((s=n.poster_path,s?"https://image.tmdb.org/t/p/w600_and_h900_bestv2".concat(s):"/Filmoteka/camera.29a7bb66.jpg"),'" alt="').concat(n.overview,'" />\n                <div class="films__decor">\n                  <h2 class="films__title">').concat(n.title,'</h2>\n                  <div class="films__description"> \n                   <p class="films__description-text">').concat(function(t){if(0!==t.length){var e=[];return t.reduce((function(t,n){e.push(" ".concat(n))}),0),e.length>2&&(e.push(" Other"),e.splice(2,e.length-3)),e}return"No genre"}(null!==(e=n.genre_ids)&&void 0!==e?e:n.genres)," | ").concat((a=String(n.release_date).slice(0,4),a||"N/A"),'</p>\n                   <p class="films__description-rating">').concat((o=n.vote_average,o?o.toFixed(1):"0.0"),"</p>\n                  </div>\n                ").concat((r=n.watched,i=n.queue,r?'<svg class="films__svg" width="30" height="30">\n                    <use href="/Filmoteka/login-icon.2e0a9156.svg#icon-watched"></use>\n                  </svg>':i?'<svg class="films__svg" width="30" height="30">\n                    <use href="/Filmoteka/login-icon.2e0a9156.svg#icon-queue"></use>\n                  </svg>':'<svg class="films__svg" width="30" height="30" opacity="0">\n                <use href=""></use>\n</svg>'),"  \n             </div>\n            </li>");var r,i,o,a,s}),"");f.insertAdjacentHTML("beforeend",n),(0,c.scrollTopTop)()}}))}();
//# sourceMappingURL=library.c92759fa.js.map
